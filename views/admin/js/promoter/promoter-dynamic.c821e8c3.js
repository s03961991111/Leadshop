(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["promoter/promoter-dynamic"],{"2f93":function(e,t,a){"use strict";a.r(t);var n,l,r=a("4c02"),o=a.n(r),i=(a("2e9c"),a("5d63"),a("e939"),a("8236")),c=a("0e28"),s={name:"dynamic",mixins:[i["a"]],data:function(){return{form:{type:"",name:"",created_time:[]},page:{count:1},list:[]}},methods:{createDynamic:function(){this.$router.push({path:"/promoter/dynamic-edit"})},filter:function(){this.getPromoterzoneList()},empty:function(){this.form={type:"",name:"",created_time:[]},this.filter()},switchPage:function(e){this.page.page=e,this.replaceQuery()},deleteDynamic:function(e,t){var a=this;this.$confirm("是否确认删除此动态？").then((function(){Object(c["f"])(e.id).then((function(){a.$delete(a.list,t),a.$message.success("删除成功")}))})).catch((function(){}))},getPromoterzoneList:function(){var e,t=this,a=this.$_.cloneDeep(this.form);null!==(e=a.created_time)&&void 0!==e&&e.length?(a.begin_time=a.created_time[0]/1e3,a.end_time=a.created_time[1]/1e3):(a.begin_time=0,a.end_time=0),delete a.created_time,Object(c["E"])(this.page.page,a).then((function(e){var a=e.data,n=e.pagination;t.list=a,t.page={page:n.current,count:n.pageCount}}))},editDynamic:function(e){this.$router.push({path:"/promoter/dynamic-edit",query:{id:e.id}})}},mounted:function(){this.getPromoterzoneList()},render:function(){var e=this,t=arguments[0],a=this,n=[{label:"全部",value:""},{label:"图片",value:"1"},{label:"视频",value:"2"}];return t("div",{class:"le-main"},[t("el-button",{attrs:{type:"primary"},on:{click:a.createDynamic}},["添加动态"]),t("el-form",{class:"le-card",attrs:{"label-width":"112px",inline:!0}},[t("el-form-item",{attrs:{label:"动态名称搜索"}},[t("el-input",o()([{attrs:{placeholder:"输入动态名称搜索"}},{nativeOn:{keyup:function(e){"Enter"===e.key&&a.getPromoterzoneList()}}},{attrs:{clearable:!0},on:{clear:function(){a.getPromoterzoneList()}},model:{value:a.form.name,callback:function(t){e.$set(a.form,"name",t)}}}]))]),t("el-form-item",{attrs:{label:"动态类型"}},[t("el-select",{attrs:{placeholder:"请选择"},model:{value:a.form.type,callback:function(t){e.$set(a.form,"type",t)}}},[n.map((function(e,a){return t("el-option",{key:a,attrs:{label:e.label,value:e.value}})}))])]),t("el-form-item",{attrs:{label:"发布时间"}},[t("el-date-picker",{attrs:{size:"small","value-format":"timestamp",type:"datetimerange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:a.form.created_time,callback:function(t){e.$set(a.form,"created_time",t)}}})]),t("div",{class:"le-button"},[t("el-button",{attrs:{type:"primary"},on:{click:a.filter}},["筛选"]),t("el-button",{on:{click:a.empty}},["清空"])])]),t("div",{class:"le-card le-table"},[t("el-table",o()([{attrs:{"row-class-name":"le-table-row","header-row-class-name":"le-table-header"}},{props:{data:a.list}}]),[t("el-table-column",{attrs:{label:"动态名称",prop:"name"}}),t("el-table-column",{attrs:{label:"动态文案"},scopedSlots:{default:function(e){return t("el-popover",{attrs:{placement:"top-start",width:"400",trigger:"click"}},[t("div",{class:"he-content-popover"},[e.row.content]),t("div",{class:"he-line-2",slot:"reference"},[e.row.content])])}}}),t("el-table-column",{attrs:{label:"动态类型"},scopedSlots:{default:function(e){return 1===e.row.type?"图片":2===e.row.type?"视频":""}}}),t("el-table-column",{attrs:{label:"跳转链接",prop:"link.name"}}),t("el-table-column",{attrs:{label:"创建时间"},scopedSlots:{default:function(e){return a.$moment(new Date(1e3*e.row.created_time)).format("Y-MM-DD HH:mm:ss")}}}),t("el-table-column",{attrs:{label:"操作",width:"160"},scopedSlots:{default:function(e){return t("div",{class:"le-table-operate flex align-center"},[t("el-button",{attrs:{type:"text"},on:{click:a.editDynamic.bind(a,e.row)}},["编辑"]),t("span",{class:"le-line"}),t("el-button",{attrs:{type:"text"},on:{click:a.deleteDynamic.bind(a,e.row,e.$index)}},["删除"])])}}})]),t("div",{class:"flex le-pagination justify-end"},[t("el-pagination",{attrs:{background:!0,"current-page":a.page.page,layout:"prev, pager, next, jumper","page-count":a.page.count},on:{"current-change":a.switchPage}})])])])}},m=s,u=(a("4d36"),a("cba8")),p=Object(u["a"])(m,n,l,!1,null,"4325103d",null);t["default"]=p.exports},"4d36":function(e,t,a){"use strict";a("acf4")},acf4:function(e,t,a){}}]);
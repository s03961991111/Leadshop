(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["plugins/practical/evaluation/add-evaluation"],{"5ac3":function(e,t,s){"use strict";s("899d")},"899d":function(e,t,s){},a22f:function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"le-main"},[s("div",{staticClass:"le-card"},[s("div",{staticClass:"le-title"},[e._v("评价库名称："+e._s(e.$route.query.name))])]),s("div",{staticClass:"le-card"},[s("el-table",{attrs:{data:e.evaluationList,"cell-class-name":"le-cell-table"}},[s("el-table-column",{attrs:{"min-width":"156"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("div",[e._v("评分")]),s("el-rate",{attrs:{colors:e.colors},model:{value:t.row.star,callback:function(s){e.$set(t.row,"star",s)},expression:"scope.row.star"}})]}}])},[s("template",{slot:"header"},[s("span",{staticClass:"le-required"},[e._v("评价等级")])])],2),s("el-table-column",{attrs:{prop:"name",width:"572"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-input",{attrs:{placeholder:"最少输入10个字，最多输入300个字",maxlength:300,type:"textarea",resize:"none",rows:13},model:{value:t.row.content,callback:function(s){e.$set(t.row,"content",s)},expression:"scope.row.content"}})]}}])},[s("template",{slot:"header"},[s("span",{staticClass:"le-required"},[e._v("评价内容")])])],2),s("el-table-column",{attrs:{"min-width":"416",label:"图片"},scopedSlots:e._u([{key:"default",fn:function(t){return s("div",{},[s("vuedraggable",{model:{value:t.row.images,callback:function(s){e.$set(t.row,"images",s)},expression:"scope.row.images"}},e._l(t.row.images,(function(a,l){return s("div",{key:l,staticClass:"le-label__require-item",class:{"le-label__require-image":0===l}},[s("div",{staticClass:"select-cover__120"},[s("pictureDialog",{attrs:{limit:1},scopedSlots:e._u([{key:"preview",fn:function(a){return s("div",{staticClass:"select-cover__120-edit"},[s("el-image",{attrs:{src:a.url,fit:"cover"}}),s("div",{staticClass:"select-cover__120-tips"},[s("span",[e._v("替换")]),e._v(" | "),s("span",{on:{click:function(e){return e.stopPropagation(),function(){t.row.images.splice(l,1)}.apply(null,arguments)}}},[e._v("删除")])])],1)}}],null,!0),model:{value:t.row.images[l],callback:function(s){e.$set(t.row.images,l,s)},expression:"scope.row.images[index]"}},[s("div",{staticClass:"select-cover__120-add",attrs:{slot:"upload"},slot:"upload"},[s("i",{staticClass:"le-icon le-icon-add select-cover__120-icon"}),s("span",{staticClass:"select-cover__120-text"},[e._v("添加图片")])])])],1)])})),0),t.row.images.length<6?s("div",{staticClass:"le-label__require-item"},[s("div",{staticClass:"select-cover__120"},[s("pictureDialog",{attrs:{limit:6-t.row.images.length,max:9},on:{confirm:function(s){return e.arrayConcat(s,t.$index)}},scopedSlots:e._u([{key:"preview",fn:function(t){return s("div",{staticClass:"select-cover__120-add"},[s("i",{staticClass:"le-icon le-icon-add select-cover__120-icon"}),s("span",{staticClass:"select-cover__120-text"},[e._v("添加图片")])])}}],null,!0)},[s("div",{staticClass:"select-cover__120-add",attrs:{slot:"upload"},slot:"upload"},[s("i",{staticClass:"le-icon le-icon-add select-cover__120-icon"}),s("span",{staticClass:"select-cover__120-text"},[e._v("添加图片")])])])],1)]):e._e()],1)}}])}),s("el-table-column",{attrs:{prop:"name",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-button",{attrs:{type:"text",size:"small"},on:{click:function(s){return e.del(t.$index)}}},[e._v(" 删除 ")])]}}])})],1),s("el-button",{attrs:{disabled:50===e.evaluationList.length,plain:""},on:{click:e.pushNew}},[e._v("添加评价 ")]),s("span",{staticClass:"le-prompt-text"},[e._v("一次最多添加50条评价")])],1),s("div",{staticClass:"le-cardpin"},[s("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")])],1)])},l=[],i=s("f2b6"),o=s("3335"),n=s.n(o),c={name:"add-evaluation",data:function(){return{evaluationList:[],colors:["#99A9BF","#F7BA2A","#FF9900"]}},components:{vuedraggable:n.a},methods:{arrayConcat:function(e,t){var s;(s=this.evaluationList[t].images).push.apply(s,Object(i["a"])(e))},pushNew:function(){this.evaluationList.push({repository_id:this.$route.query.id,images:[],star:5,content:""})},del:function(e){this.$delete(this.evaluationList,e)},save:function(){for(var e=this,t=0;t<this.evaluationList.length;t++){if(!this.evaluationList[t].content)return void this.$message({type:"error",message:"评价内容不能为空"});if(this.evaluationList[t].content.length<10)return void this.$message({type:"error",message:"评价内容不能少于10个字"})}this.$heshop.plugin("post",{include:"evaluate",model:"repository",behavior:"evaluate"},{form:this.evaluationList}).then((function(){e.$message({type:"success",message:"保存成功"}),e.$router.back()}))}},mounted:function(){this.pushNew()}},r=c,u=(s("5ac3"),s("cba8")),d=Object(u["a"])(r,a,l,!1,null,"bb1f302c",null);t["default"]=d.exports}}]);
{"version":3,"sources":["webpack:///./src/pages/pages/index.vue?a131","webpack:///./src/pages/pages/index.vue?c09c","webpack:///src/pages/pages/index.vue","webpack:///./src/pages/pages/index.vue?2c9e","webpack:///./src/pages/pages/index.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","slot","staticStyle","_v","tableData","scopedSlots","_u","key","fn","scope","_s","row","title","_e","dateFormat","path","query","id","status","on","$event","handleDelete","directives","name","rawName","value","data","promoteType","expression","modifiers","handleDefault","pageInfo","total","size","current","handlePageChange","staticRenderFns","component"],"mappings":"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","file":"js/finish-index.8952888f.js","sourcesContent":["export * from \"-!../../../node_modules/_mini-css-extract-plugin@0.9.0@mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/_css-loader@3.6.0@css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../node_modules/_vue-loader@15.9.7@vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/_postcss-loader@3.0.0@postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/_less-loader@5.0.0@less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/_vue-loader@15.9.7@vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=238bab5d&lang=less&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"layout-page\"},[_c('el-card',[_c('div',{staticClass:\"clearfix\",attrs:{\"slot\":\"header\"},slot:\"header\"},[_c('templateSelect',{staticStyle:{\"margin\":\"0\"}},[_c('el-button',{attrs:{\"type\":\"primary\"}},[_vm._v(\"新建微页面\")])],1)],1),_c('div',{staticClass:\"layout-page-body\"},[[_c('el-table',{attrs:{\"data\":_vm.tableData,\"size\":\"medium\"}},[_c('el-table-column',{attrs:{\"label\":\"名称\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_vm._v(\" \"+_vm._s(scope.row.title)+\" \"),(scope.row.status)?_c('span',{staticClass:\"layout-table-tag\"},[_vm._v(\"首页\")]):_vm._e()]}}])}),_c('el-table-column',{attrs:{\"prop\":\"created_time\",\"label\":\"创建时间\",\"formatter\":_vm.dateFormat}}),_c('el-table-column',{staticClass:\"layout-table-action\",attrs:{\"label\":\"操作\",\"width\":\"260\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('router-link',{staticClass:\"layout-table-link\",attrs:{\"to\":{path:'/package/index',query:{id:scope.row.id}},\"target\":\"_blank\"}},[_c('el-button',{attrs:{\"type\":\"text\",\"size\":\"medium\"}},[_vm._v(\"编辑\")])],1),(!scope.row.status)?_c('span',{staticClass:\"layout-table-line\"},[_vm._v(\"|\")]):_vm._e(),(!scope.row.status)?_c('popconfirm',{attrs:{\"width\":\"320px\"},on:{\"confirm\":function($event){return _vm.handleDelete(scope.row)}}},[_c('el-button',{attrs:{\"type\":\"text\",\"size\":\"medium\"}},[_vm._v(\"删除\")])],1):_vm._e(),_c('span',{staticClass:\"layout-table-line\"},[_vm._v(\"|\")]),_c('el-button',{directives:[{name:\"popup\",rawName:\"v-popup.promote\",value:({\n                                            data: scope.row,\n                                            promoteType: 'pages'\n                                   }),expression:\"{\\n                                            data: scope.row,\\n                                            promoteType: 'pages'\\n                                   }\",modifiers:{\"promote\":true}}],staticStyle:{\"margin\":\"0 5px\"},attrs:{\"type\":\"text\",\"size\":\"medium\",\"module\":\"goods\",\"title\":\"推广\",\"hide_footer\":true,\"id\":scope.row.id,\"width\":\"791\"}},[_vm._v(\"推广\")]),(!scope.row.status)?_c('span',{staticClass:\"layout-table-line\"},[_vm._v(\"|\")]):_vm._e(),(!scope.row.status)?_c('popconfirm',{attrs:{\"width\":\"320px\",\"title\":\"确认设置该微页面为首页？\"},on:{\"confirm\":function($event){return _vm.handleDefault(scope.row)}}},[_c('el-button',{attrs:{\"type\":\"text\",\"size\":\"medium\"}},[_vm._v(\"设为首页\")])],1):_vm._e()]}}])})],1),_c('div',{staticClass:\"layout-table-paging\"},[_c('el-pagination',{attrs:{\"background\":\"\",\"layout\":\"prev, pager, next,jumper\",\"total\":_vm.pageInfo.total,\"page-size\":_vm.pageInfo.size,\"current-page\":_vm.pageInfo.current},on:{\"current-change\":_vm.handlePageChange}})],1)]],2)])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n    <div class=\"layout-page\">\r\n        <el-card>\r\n            <div slot=\"header\" class=\"clearfix\">\r\n                <templateSelect style=\"margin: 0\">\r\n                    <el-button type=\"primary\">新建微页面</el-button>\r\n                </templateSelect>\r\n            </div>\r\n            <div class=\"layout-page-body\">\r\n                <template>\r\n                    <el-table :data=\"tableData\" size=\"medium\">\r\n                        <el-table-column label=\"名称\">\r\n                            <template slot-scope=\"scope\">\r\n                                {{scope.row.title}}\r\n                                <span class=\"layout-table-tag\" v-if=\"scope.row.status\">首页</span>\r\n                            </template>\r\n                        </el-table-column>\r\n                        <!-- <el-table-column prop=\"goods_number\" label=\"商品数\" width=\"180\">\r\n                        </el-table-column>\r\n                        <el-table-column label=\"浏览人数/浏览人次\">\r\n                            <template slot-scope=\"scope\">\r\n                                {{scope.row.visitor_number}}/{{scope.row.visit_number}}\r\n                            </template>\r\n                        </el-table-column> -->\r\n                        <el-table-column prop=\"created_time\" label=\"创建时间\" :formatter=\"dateFormat\">\r\n                        </el-table-column>\r\n                        <el-table-column label=\"操作\" width=\"260\" class=\"layout-table-action\">\r\n                            <template slot-scope=\"scope\">\r\n                                <router-link :to=\"{path:'/package/index',query:{id:scope.row.id}}\" target=\"_blank\" class=\"layout-table-link\">\r\n                                    <el-button type=\"text\" size=\"medium\">编辑</el-button>\r\n                                </router-link>\r\n                                <span class=\"layout-table-line\" v-if=\"!scope.row.status\">|</span>\r\n                                <popconfirm width=\"320px\" @confirm=\"handleDelete(scope.row)\" v-if=\"!scope.row.status\">\r\n                                    <el-button type=\"text\" size=\"medium\">删除</el-button>\r\n                                </popconfirm>\r\n                                <span class=\"layout-table-line\">|</span>\r\n                                <el-button type=\"text\" style=\"margin: 0 5px;\" size=\"medium\" module=\"goods\" title=\"推广\" :hide_footer=\"true\" :id=\"scope.row.id\" v-popup.promote=\"{\r\n                                                data: scope.row,\r\n                                                promoteType: 'pages'\r\n                                       }\" width=\"791\">推广</el-button>\r\n                                <span class=\"layout-table-line\" v-if=\"!scope.row.status\">|</span>\r\n                                <popconfirm width=\"320px\" @confirm=\"handleDefault(scope.row)\" title=\"确认设置该微页面为首页？\" v-if=\"!scope.row.status\">\r\n                                    <el-button type=\"text\" size=\"medium\">设为首页</el-button>\r\n                                </popconfirm>\r\n                            </template>\r\n                        </el-table-column>\r\n                    </el-table>\r\n                    <div class=\"layout-table-paging\">\r\n                        <el-pagination @current-change=\"handlePageChange\" background layout=\"prev, pager, next,jumper\" :total=\"pageInfo.total\" :page-size=\"pageInfo.size\" :current-page=\"pageInfo.current\"></el-pagination>\r\n                    </div>\r\n                </template>\r\n            </div>\r\n        </el-card>\r\n    </div>\r\n</template>\r\n<script type=\"text/javascript\">\r\nimport popconfirm from '@/components/popconfirm.vue'\r\nimport promotion from '@/components/promotion'\r\nimport templateSelect from '@/components/templateSelect'\r\nexport default {\r\n    components: {\r\n        popconfirm,\r\n        promotion,\r\n        templateSelect\r\n    },\r\n    data() {\r\n        return {\r\n            tableData: [],\r\n            pageInfo: {\r\n                size: 20,\r\n                total: 0,\r\n                current: 1\r\n            },\r\n            fullHeight: document.documentElement.clientHeight\r\n        };\r\n    },\r\n    /**\r\n     * 计算属性\r\n     * @type {Object}\r\n     */\r\n    computed: {\r\n        scrollHeight() {\r\n            return {\r\n                height: (parseInt(this.fullHeight) - 65) + 'px'\r\n            }\r\n        }\r\n    },\r\n    /**\r\n     * 数据监听\r\n     * @type {Object}\r\n     */\r\n    watch: {\r\n\r\n    },\r\n    /**\r\n     * 页面加载执行\r\n     * @return {[type]} [description]\r\n     */\r\n    mounted() {\r\n        let that = this;\r\n        //监听页面大小\r\n        window.onresize = () => {\r\n            return (() => {\r\n                window.fullHeight = document.documentElement.clientHeight\r\n                that.fullHeight = window.fullHeight;\r\n            })()\r\n        }\r\n        this.handleLoadData();\r\n    },\r\n    methods: {\r\n        /**\r\n         * 格式化时间\r\n         * @param  {[type]} row    [description]\r\n         * @param  {[type]} column [description]\r\n         * @return {[type]}        [description]\r\n         */\r\n        dateFormat(row, column) {\r\n            var date = row[column.property];\r\n            if (date === undefined) {\r\n                return ''\r\n            }\r\n            return this.$moment(date * 1000).format(\"YYYY-MM-DD HH:mm:ss\")\r\n        },\r\n        /**\r\n         * 执行删除事件\r\n         * @return {[type]} [description]\r\n         */\r\n        handleDelete(data) {\r\n            this.$heshop.pages(\"delete\", parseInt(data.id)).page(this.pageInfo.current, this.pageInfo.size).then(data => {\r\n                this.$message({\r\n                    title: '删除成功',\r\n                    message: '成功删除微页面',\r\n                    type: 'success'\r\n                });\r\n                this.handleLoadData();\r\n            }).catch(error => {\r\n                console.error(\"错误信息\", error);\r\n            })\r\n        },\r\n        /**\r\n         * 执行删除事件\r\n         * @return {[type]} [description]\r\n         */\r\n        handleDefault(data) {\r\n            data.status = 1;\r\n            this.$heshop.pages(\"put\", { id: data.id, behavior: 'setting' }, data).then(data => {\r\n                this.$message({\r\n                    title: '设置成功',\r\n                    message: '成功设置该微页面为首页',\r\n                    type: 'success'\r\n                });\r\n                this.handleLoadData();\r\n            }).catch(error => {\r\n                console.error(\"错误信息\", error);\r\n            })\r\n        },\r\n        /**\r\n         * 加载数据信息\r\n         * @return {[type]} [description]\r\n         */\r\n        handleLoadData() {\r\n            this.$heshop.pages(\"get\").page(this.pageInfo.current, this.pageInfo.size).then(data => {\r\n                this.pageInfo = {\r\n                    size: parseInt(data.headers['x-pagination-per-page']),\r\n                    total: parseInt(data.headers['x-pagination-total-count']),\r\n                    current: parseInt(data.headers['x-pagination-current-page'])\r\n                }\r\n                this.tableData = data.data;\r\n            }).catch(error => {\r\n                console.error(\"错误信息\", error);\r\n            })\r\n        },\r\n        handlePageChange(value) {\r\n            this.pageInfo.current = value;\r\n            this.handleLoadData();\r\n        }\r\n    }\r\n};\r\n</script>\r\n<style lang=\"less\" scoped>\r\n@import '../../components/layout.less';\r\n@import './style.less';\r\n</style>","import mod from \"-!../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/_thread-loader@2.1.3@thread-loader/dist/cjs.js!../../../node_modules/_babel-loader@8.2.2@babel-loader/lib/index.js!../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/_vue-loader@15.9.7@vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/_thread-loader@2.1.3@thread-loader/dist/cjs.js!../../../node_modules/_babel-loader@8.2.2@babel-loader/lib/index.js!../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/_vue-loader@15.9.7@vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=238bab5d&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=238bab5d&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/_vue-loader@15.9.7@vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"238bab5d\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}
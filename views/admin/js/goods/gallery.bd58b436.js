(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["goods/gallery"],{13922:function(e,t,i){},"2d8d":function(e,t,i){"use strict";i("13922")},"313f":function(e,t,i){e.exports=i.p+"img/loading.21b2841d.gif"},"5e8c":function(e,t,i){"use strict";i("ddfa")},"6f63":function(e,t,i){"use strict";i("fa1d")},"71b89":function(e,t,i){},"83a4":function(e,t,i){},"87c9":function(e,t,i){"use strict";i("83a4")},af4b:function(e,t,i){"use strict";i("c57d")},b945:function(e,t,i){"use strict";i("c999")},c36c:function(e,t,i){"use strict";i("ee90")},c57d:function(e,t,i){},c999:function(e,t,i){},d52c:function(e,t,i){"use strict";i("71b89")},ddfa:function(e,t,i){},ea48:function(e,t,i){"use strict";i.r(t);var n,a,o,s,c,r,l,d,u,h,p,f,g,m,v,b,k=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"le-matter"},[i("el-tabs",{staticClass:"he-tabs",attrs:{type:"card"},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[i("el-tab-pane",{attrs:{label:"图片",name:"image"}},[i("photoSelect")],1),i("el-tab-pane",{attrs:{label:"视频",name:"video"}},[i("videoSelect")],1)],1)],1)},y=[],_=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"picture-selet"},[i("div",{staticClass:"picture-selet__detail"},[i("el-card",[i("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[i("span",[e._v("分组名称")]),i("span",{staticStyle:{float:"right",padding:"0","font-size":"14px",color:"#8c8c8c","font-weight":"400"}},[e._v("操作")])]),i("div",{staticClass:"picture-selet__detail-group"},[i("el-scrollbar",{style:{height:"632px"}},[i("el-radio-group",{model:{value:e.index,callback:function(t){e.index=t},expression:"index"}},[i("ul",[i("li",[i("el-radio",{staticClass:"picture-selet__detail-radio",attrs:{label:-1}},[i("img",{attrs:{src:"http://manongyun.oss-cn-hangzhou.aliyuncs.com/Qmpaas/le-icon-folder.png"}}),i("span",[e._v("全部")])]),i("div",{staticClass:"picture-selet__detail-action"})],1),e._l(e.groupList,(function(t,n){return i("li",{key:n},[i("el-radio",{staticClass:"picture-selet__detail-radio",attrs:{label:n}},[i("img",{attrs:{src:"http://manongyun.oss-cn-hangzhou.aliyuncs.com/Qmpaas/le-icon-folder.png"}}),e.is_edit===t.id?i("el-input",{attrs:{placeholder:"请输入内容",maxlength:8},model:{value:t.name,callback:function(i){e.$set(t,"name",i)},expression:"item.name"}},[i("el-button",{attrs:{slot:"append",type:"primary"},on:{click:function(i){e.UpdateGroupItem(t),e.is_edit=-1}},slot:"append"},[e._v("确认 ")])],1):i("span",[e._v(e._s(t.name))])],1),n?i("div",{staticClass:"picture-selet__detail-action"},[i("span",{attrs:{type:"text"},on:{click:function(i){e.is_edit=t.id}}},[e._v("编辑")]),e._v(" | "),i("span",{attrs:{type:"text"},on:{click:function(i){return e.handleGroupDelete(t.id,2)}}},[e._v("删除")])]):e._e()],1)}))],2)])],1),i("div",{staticClass:"picture-selet__detail-group-add"},[i("Dialog",{attrs:{title:"新建分组"},on:{confirm:function(t){return e.handleMakeGroup({id:0,name:t,type:e.fileType})}}},[i("el-button",{attrs:{plain:""}},[e._v("新建分组")])],1)],1)],1)]),i("div",{staticClass:"picture-selet__layout"},[i("div",{staticClass:"picture-selet__header"},[i("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},e._l(e.breadcrumb,(function(t,n){return i("el-breadcrumb-item",{key:n},[i("span",{on:{click:function(i){return e.handleCrumbItem(t,n)}}},[e._v(e._s(t.name||t.title_name))])])})),1)],1),i("div",{staticClass:"picture-selet__content"},[i("div",{staticClass:"picture-selet__tools"},[e.index>-1?i("div",{staticClass:"picture-selet__action"},[i("Upload",{attrs:{action:e.uploadFile,multiple:!0,onSuccess:e.uploadFileSuccess,autoUpload:""}},[i("el-button",{attrs:{type:"primary"}},[e._v("上传图片")])],1)],1):e._e(),e.is_make?i("div",{staticClass:"picture-selet__action"},[i("Dialog",{attrs:{title:"创建子级分组"},on:{confirm:function(t){return e.handleMakeGroup({id:e.groupInfo.id,name:t,type:e.fileType},2)}}},[i("el-button",{attrs:{plain:""}},[e._v("创建子级分组")])],1)],1):e._e(),e.photoList.length>0?i("div",{staticClass:"picture-selet__action"},[i("el-checkbox",{attrs:{indeterminate:e.isIndeterminate},on:{change:e.handleAllChange},model:{value:e.checkAll,callback:function(t){e.checkAll=t},expression:"checkAll"}},[e._v(" 当前页全选 ")])],1):e._e(),e.photoList.length>0?i("div",{staticClass:"picture-selet__action"},[i("el-button",{attrs:{disabled:e.is_delete},on:{click:e.handleDeletes}},[e._v("删除")])],1):e._e(),e.photoList.length>0?i("div",{staticClass:"picture-selet__action"},[i("Group",{attrs:{disabled:e.is_move},on:{confirm:e.handleMoveList}},[i("el-button",{attrs:{disabled:e.is_move}},[e._v("移动至")])],1)],1):e._e(),e.photoList.length>0?i("div",{staticClass:"picture-selet__action"},[i("Rename",{attrs:{title:"重命名",disabled:e.is_rename},on:{confirm:e.handleRenameItem},model:{value:e.checkedData,callback:function(t){e.checkedData=t},expression:"checkedData"}},[i("el-button",{attrs:{disabled:e.is_rename},on:{click:e.handleRenameItem}},[e._v("重命名")])],1)],1):e._e()]),e.photoList.length>0?i("ul",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{"min-width":"600px"}},[e.upLoading?i("li",{staticClass:"picture-select__content-loading"},[i("label",{staticClass:"picture-selet__content-label"},[i("div",{staticClass:"picture-selet__content-item"},[e._m(0),i("el-button",{attrs:{type:"text"}},[e._v("上传中...")])],1)])]):e._e(),e._l(e.photoList,(function(t,n){return i("li",{key:t.id},[i("label",{staticClass:"picture-selet__content-label",on:{dblclick:function(i){return i.stopPropagation(),e.handleDblClick(t)}}},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.checkedData,expression:"checkedData"}],staticClass:"picture-selet__content-input",attrs:{type:"checkbox"},domProps:{value:t,checked:Array.isArray(e.checkedData)?e._i(e.checkedData,t)>-1:e.checkedData},on:{change:function(i){var n=e.checkedData,a=i.target,o=!!a.checked;if(Array.isArray(n)){var s=t,c=e._i(n,s);a.checked?c<0&&(e.checkedData=n.concat([s])):c>-1&&(e.checkedData=n.slice(0,c).concat(n.slice(c+1)))}else e.checkedData=o}}}),i("div",{staticClass:"picture-selet__content-item"},[e._m(1,!0),i("div",{staticClass:"picture-selet__content-item-photo"},[i("div",{staticClass:"picture-selet__content-item-cover"},[t.type>0?i("Picture",{attrs:{src:t.url}}):i("Picture",{attrs:{src:"http://manongyun.oss-cn-hangzhou.aliyuncs.com/Qmpaas/le-icon-folder.png"}})],1)]),i("el-button",{attrs:{type:"text"}},[e._v(e._s(t.title_name))])],1)])])}))],2):i("div",{staticClass:"picture-selet__content-empty"},[i("div",[i("Picture",{attrs:{src:"http://qmxq.oss-cn-hangzhou.aliyuncs.com/gallery_bg.png"}}),i("p",[e._v("该分组下暂无内容")])],1)]),i("div",{staticClass:"picture-selet__paging"},[i("el-pagination",{attrs:{background:"",layout:"prev, pager, next,jumper","page-size":e.pageInfo.size,"current-page":e.pageInfo.current,total:e.pageInfo.total},on:{"current-change":e.handleSizeChange}})],1)])])],1)])},C=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"picture-selet__content-item-photo flex flex-direction align-center justify-center"},[n("span",{staticClass:"le-icon le-icon-morentupian"}),n("img",{attrs:{src:i("313f"),alt:""}})])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"picture-selet__content-close"},[i("i",{staticClass:"le-icon le-icon-tick"})])}],x=i("99a5"),D=i("1c03"),L=(i("6a61"),i("e1d4"),i("f5bd"),i("2769"),i("8639"),i("23db"),i("b1fa"),i("eb62"),i("1fc5")),O=i("cd20"),S=i("4c02"),I=i.n(S),w={props:{value:{type:[String,Number,Boolean,Object,Array],default:""},title:{type:[String,Number,Boolean],default:"图片"},placeholder:{type:[String,Number,Boolean],default:""},max:{type:[String,Number,Boolean,Object,Array],default:8},disabled:{type:[String,Number,Boolean,Object,Array],default:!1}},data:function(){return{dialogVisible:!1,inputData:""}},computed:{},created:function(){},watch:{},mounted:function(){return Object(x["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},methods:{handleOpen:function(){this.disabled||(this.dialogVisible=!0)},handleClose:function(){this.dialogVisible=!1},handleConfirm:function(){this.$emit("confirm",this.inputData),this.handleClose()},handleClosed:function(){this.inputData=""}},render:function(){var e=this,t=arguments[0],i=this.dialogVisible,n=this.handleOpen,a=this.handleClose,o=this.handleConfirm,s=this.placeholder,c=this.title,r=this.$slots.trigger||this.$slots.default,l={on:{click:n}},d={props:{visible:i,top:"20%",title:c,width:"360px","append-to-body":!0,"destroy-on-close":!0,"before-close":a},on:{closed:this.handleClosed}};return t("div",I()([{class:"dialog"},l]),[r,t("el-dialog",I()([{},d]),[t("el-input",{attrs:{placeholder:s,maxlength:this.max,"show-word-limit":!0},model:{value:e.inputData,callback:function(t){e.inputData=t}}}),t("span",{slot:"footer",class:"dialog-footer"},[t("el-button",{on:{click:a}},["取 消"]),t("el-button",{attrs:{type:"primary"},on:{click:o,close:a}},["确 定"])])])])}},N=w,P=(i("2d8d"),i("4ac2")),j=Object(P["a"])(N,n,a,!1,null,"9fcbdf92",null),V=j.exports,$=i("7736"),z=(i("4800"),function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{class:["el-cascader-panel",e.border&&"is-bordered"],on:{keydown:e.handleKeyDown}},e._l(e.menus,(function(t,n){return i("div",{staticClass:"el-cascader-item"},[i("el-autocomplete",{attrs:{size:"small","value-key":"label",placeholder:"输入"+e.getlevel(n)+"分组名称搜索","fetch-suggestions":function(t,i){return e.querySearch(t,i,n)},"trigger-on-focus":!1},nativeOn:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:(t.stopPropagation(),e.handleEnter(e.searchValue[n],n))}},model:{value:e.searchValue[n],callback:function(t){e.$set(e.searchValue,n,t)},expression:"searchValue[index]"}},[i("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:function(t){return e.handleEnter(e.searchValue[n],n)}},slot:"append"})],1),i("cascader-menu",{key:n,ref:"menu",refInFor:!0,attrs:{index:n,nodes:t}})],1)})),0)}),A=[],G=(i("af21"),i("3f7e"),i("6afd"),i("aa00"),i("190b")),B=(i("a5c9"),i("fe5b")),M=function(e){return e.stopPropagation()},T={inject:["panel"],components:{},props:{node:{required:!0},nodeId:String},computed:{config:function(){return this.panel.config},isLeaf:function(){return this.node.isLeaf},isDisabled:function(){return this.node.isDisabled},checkedValue:function(){return this.panel.checkedValue},isChecked:function(){return this.node.isSameNode(this.checkedValue)},inActivePath:function(){return this.isInPath(this.panel.activePath)},inCheckedPath:function(){var e=this;return!!this.config.checkStrictly&&this.panel.checkedNodePaths.some((function(t){return e.isInPath(t)}))},value:function(){return this.node.getValueByOption()}},methods:{handleExpand:function(){var e=this,t=this.panel,i=this.node,n=this.isDisabled,a=this.config,o=a.multiple,s=a.checkStrictly;!s&&n||i.loading||(a.lazy&&!i.loaded?t.lazyLoad(i,(function(){var t=e.isLeaf;if(t||e.handleExpand(),o){var n=!!t&&i.checked;e.handleMultiCheckChange(n)}})):t.handleExpand(i))},handleCheckChange:function(){var e=this.panel,t=this.value,i=this.node;e.handleCheckChange(t),e.handleExpand(i)},handleMultiCheckChange:function(e){this.node.doCheck(e),this.panel.calculateMultiCheckedValue()},isInPath:function(e){var t=this.node,i=e[t.level-1]||{};return i.uid===t.uid},renderPrefix:function(e){var t=this.isLeaf,i=this.isChecked,n=this.config,a=n.checkStrictly,o=n.multiple;return o?this.renderCheckbox(e):a?this.renderRadio(e):t&&i?this.renderCheckIcon(e):null},renderPostfix:function(e){var t=this.node,i=this.isLeaf;return t.loading?this.renderLoadingIcon(e):i?null:this.renderExpandIcon(e)},renderCheckbox:function(e){var t=this.node,i=this.config,n=this.isDisabled,a={on:{change:this.handleMultiCheckChange},nativeOn:{}};return i.checkStrictly&&(a.nativeOn.click=M),e("el-checkbox",I()([{attrs:{value:t.checked,indeterminate:t.indeterminate,disabled:n}},a]))},renderRadio:function(e){var t=this.checkedValue,i=this.value,n=this.isDisabled;return Object(B["f"])(i,t)&&(i=t),e("el-radio",{attrs:{value:t,label:i,disabled:n},on:{change:this.handleCheckChange},nativeOn:{click:M}},[e("span")])},renderCheckIcon:function(e){return e("i",{class:"el-icon-check el-cascader-node__prefix"})},renderLoadingIcon:function(e){return e("i",{class:"el-icon-loading el-cascader-node__postfix"})},renderExpandIcon:function(e){return e("i",{class:"el-icon-arrow-right el-cascader-node__postfix"})},renderContent:function(e){var t=this.panel,i=this.node,n=t.renderLabelFn,a=n?n({node:i,data:i.data}):null;return e("span",{class:"el-cascader-node__label"},[a||i.label])}},render:function(e){var t=this,i=this.inActivePath,n=this.inCheckedPath,a=this.isChecked,o=this.isLeaf,s=this.isDisabled,c=this.config,r=this.nodeId,l=c.expandTrigger,d=c.checkStrictly,u=c.multiple,h=!d&&s,p={on:{}};return"click"===l?p.on.click=this.handleExpand:(p.on.mouseenter=function(e){t.handleExpand(),t.$emit("expand",e)},p.on.focus=function(e){t.handleExpand(),t.$emit("expand",e)}),!o||s||d||u||(p.on.click=this.handleCheckChange),e("li",I()([{attrs:{role:"menuitem",id:r,"aria-expanded":i,tabindex:h?null:-1},class:{"el-cascader-node":!0,"is-selectable":d,"in-active-path":i,"in-checked-path":n,"is-active":a,"is-disabled":h}},p]),[this.renderPrefix(e),this.renderContent(e),this.renderPostfix(e)])}},E=T,R=Object(P["a"])(E,o,s,!1,null,null,null),F=R.exports,U=i("666d"),q={name:"ElCascaderMenu",mixins:[U["a"]],inject:["panel"],components:{CascaderNode:F},props:{nodes:{type:Array,required:!0},index:Number},data:function(){return{activeNode:null,hoverTimer:null,id:Object(B["c"])()}},computed:{isEmpty:function(){return!this.nodes.length},menuId:function(){return"cascader-menu-".concat(this.id,"-").concat(this.index)}},methods:{handleExpand:function(e){this.activeNode=e.target},handleMouseMove:function(e){var t=this.activeNode,i=this.hoverTimer,n=this.$refs.hoverZone;if(t&&n)if(t.contains(e.target)){clearTimeout(i);var a=this.$el.getBoundingClientRect(),o=a.left,s=e.clientX-o,c=this.$el,r=c.offsetWidth,l=c.offsetHeight,d=t.offsetTop,u=d+t.offsetHeight;n.innerHTML='\n          <path style="pointer-events: auto;" fill="transparent" d="M'.concat(s," ").concat(d," L").concat(r," 0 V").concat(d,' Z" />\n          <path style="pointer-events: auto;" fill="transparent" d="M').concat(s," ").concat(u," L").concat(r," ").concat(l," V").concat(u,' Z" />\n        ')}else i||(this.hoverTimer=setTimeout(this.clearHoverZone,this.panel.config.hoverThreshold))},clearHoverZone:function(){var e=this.$refs.hoverZone;e&&(e.innerHTML="")},renderEmptyText:function(e){return e("div",{class:"el-cascader-menu__empty-text"},[this.t("el.cascader.noData")])},renderNodeList:function(e){var t=this.menuId,i=this.panel.isHoverMenu,n={on:{}};i&&(n.on.expand=this.handleExpand);var a=this.nodes.map((function(i,a){var o=i.hasChildren;return e("cascader-node",I()([{key:i.uid,attrs:{node:i,"node-id":"".concat(t,"-").concat(a),"aria-haspopup":o,"aria-owns":o?t:null}},n]))}));return[].concat(Object(G["a"])(a),[i?e("svg",{ref:"hoverZone",class:"el-cascader-menu__hover-zone"}):null])}},render:function(e){var t=this.isEmpty,i=this.menuId,n={nativeOn:{}};return this.panel.isHoverMenu&&(n.nativeOn.mousemove=this.handleMouseMove),e("el-scrollbar",I()([{attrs:{tag:"ul",role:"menu",id:i,"wrap-class":"el-cascader-menu__wrap","view-class":{"el-cascader-menu__list":!0,"is-empty":t}},class:"el-cascader-menu"},n]),[t?this.renderEmptyText(e):this.renderNodeList(e)])}},H=q,J=Object(P["a"])(H,c,r,!1,null,null,null),K=J.exports,Z=i("78e0"),Q=i("b96e"),W=(i("2621"),i("e394")),X=0,Y=function(){function e(t,i,n){Object(Z["a"])(this,e),this.data=t,this.config=i,this.parent=n||null,this.level=this.parent?this.parent.level+1:1,this.uid=X++,this.initState(),this.initChildren()}return Object(Q["a"])(e,[{key:"initState",value:function(){var e=this.config,t=e.value,i=e.label;this.value=this.data[t],this.label=this.data[i],this.pathNodes=this.calculatePathNodes(),this.path=this.pathNodes.map((function(e){return e.value})),this.pathLabels=this.pathNodes.map((function(e){return e.label})),this.loading=!1,this.loaded=!1}},{key:"initChildren",value:function(){var t=this,i=this.config,n=i.children,a=this.data[n];this.hasChildren=Array.isArray(a),this.children=(a||[]).map((function(n){return new e(n,i,t)}))}},{key:"isDisabled",get:function(){var e=this.data,t=this.parent,i=this.config,n=i.disabled,a=i.checkStrictly;return e[n]||!a&&t&&t.isDisabled}},{key:"isLeaf",get:function(){var e=this.data,t=this.loaded,i=this.hasChildren,n=this.children,a=this.config,o=a.lazy,s=a.leaf;if(o){var c=Object(W["a"])(e[s])?e[s]:!!t&&!n.length;return this.hasChildren=!c,c}return!i}},{key:"calculatePathNodes",value:function(){var e=[this],t=this.parent;while(t)e.unshift(t),t=t.parent;return e}},{key:"getPath",value:function(){return this.path}},{key:"getValue",value:function(){return this.value}},{key:"getValueByOption",value:function(){return this.config.emitPath?this.getPath():this.getValue()}},{key:"getText",value:function(e,t){return e?this.pathLabels.join(t):this.label}},{key:"isSameNode",value:function(e){var t=this.getValueByOption();return this.config.multiple&&Array.isArray(e)?e.some((function(e){return Object(B["f"])(e,t)})):Object(B["f"])(e,t)}},{key:"broadcast",value:function(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];var a="onParent".concat(Object(B["a"])(e));this.children.forEach((function(t){t&&(t.broadcast.apply(t,[e].concat(i)),t[a]&&t[a].apply(t,i))}))}},{key:"emit",value:function(e){var t=this.parent,i="onChild".concat(Object(B["a"])(e));if(t){for(var n=arguments.length,a=new Array(n>1?n-1:0),o=1;o<n;o++)a[o-1]=arguments[o];t[i]&&t[i].apply(t,a),t.emit.apply(t,[e].concat(a))}}},{key:"onParentCheck",value:function(e){this.isDisabled||this.setCheckState(e)}},{key:"onChildCheck",value:function(){var e=this.children,t=e.filter((function(e){return!e.isDisabled})),i=!!t.length&&t.every((function(e){return e.checked}));this.setCheckState(i)}},{key:"setCheckState",value:function(e){var t=this.children.length,i=this.children.reduce((function(e,t){var i=t.checked?1:t.indeterminate?.5:0;return e+i}),0);this.checked=e,this.indeterminate=i!==t&&i>0}},{key:"syncCheckState",value:function(e){var t=this.getValueByOption(),i=this.isSameNode(e,t);this.doCheck(i)}},{key:"doCheck",value:function(e){this.checked!==e&&(this.config.checkStrictly?this.checked=e:(this.broadcast("check",e),this.setCheckState(e),this.emit("check")))}}]),e}(),ee=function e(t,i){return t.reduce((function(t,n){return n.isLeaf?t.push(n):(!i&&t.push(n),t=t.concat(e(n.children,i))),t}),[])},te=function(){function e(t,i){Object(Z["a"])(this,e),this.config=i,this.initNodes(t)}return Object(Q["a"])(e,[{key:"initNodes",value:function(e){var t=this;e=Object(B["b"])(e),this.nodes=e.map((function(e){return new Y(e,t.config)})),this.flattedNodes=this.getFlattedNodes(!1,!1),this.leafNodes=this.getFlattedNodes(!0,!1)}},{key:"appendNode",value:function(e,t){var i=new Y(e,this.config,t),n=t?t.children:this.nodes;n.push(i)}},{key:"appendNodes",value:function(e,t){var i=this;e=Object(B["b"])(e),e.forEach((function(e){return i.appendNode(e,t)}))}},{key:"getNodes",value:function(){return this.nodes}},{key:"getFlattedNodes",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=e?this.leafNodes:this.flattedNodes;return t?i:ee(this.nodes,e)}},{key:"getNodeByValue",value:function(e){if(e){var t=this.getFlattedNodes(!1,!this.config.lazy).filter((function(t){return Object(B["h"])(t.path,e)||t.value===e}));return t&&t.length?t[0]:null}return null}}]),e}(),ie=i("07c9"),ne=i("65a8"),ae=i("a78f"),oe=ne["a"].keys,se={expandTrigger:"click",multiple:!1,checkStrictly:!0,emitPath:!0,lazy:!1,lazyLoad:B["g"],value:"value",label:"label",children:"children",leaf:"leaf",disabled:"disabled",hoverThreshold:500},ce=function(e){return!e.getAttribute("aria-owns")},re=function(e,t){var i=e.parentNode;if(i){var n=i.querySelectorAll('.el-cascader-node[tabindex="-1"]'),a=Array.prototype.indexOf.call(n,e);return n[a+t]||null}return null},le=function(e,t){if(e){var i=e.id.split("-");return Number(i[i.length-2])}},de=function(e){e&&(e.focus(),!ce(e)&&e.click())},ue=function(e){if(e){var t=e.querySelector("input");t?t.click():ce(e)&&e.click()}},he={name:"ElCascaderPanel",components:{CascaderMenu:K},props:{value:{},options:Array,props:Object,border:{type:Boolean,default:!0},renderLabel:Function},provide:function(){return{panel:this}},data:function(){return{searchValue:[],checkedValue:null,checkedNodePaths:[],store:[],menus:[],activePath:[],loadCount:0}},computed:{config:function(){return Object(ie["a"])(Object(D["a"])({},se),this.props||{})},multiple:function(){return this.config.multiple},checkStrictly:function(){return this.config.checkStrictly},leafOnly:function(){return!this.checkStrictly},isHoverMenu:function(){return"hover"===this.config.expandTrigger},renderLabelFn:function(){return this.renderLabel||this.$scopedSlots.default}},watch:{options:{handler:function(){this.initStore()},immediate:!0,deep:!0},value:function(){this.syncCheckedValue(),this.checkStrictly&&this.calculateCheckedNodePaths()},checkedValue:function(e){Object(B["f"])(e,this.value)||(this.checkStrictly&&this.calculateCheckedNodePaths(),this.$emit("input",e),this.$emit("change",e))}},mounted:function(){Object(B["e"])(this.value)||this.syncCheckedValue()},methods:{getlevel:function(e){return 0===e?"一级":1===e?"二级":2===e?"三级":void 0},handleEnter:function(e,t){e&&e.length>0?this.querySearch(e,B["g"],t):this.initStore()},querySearch:function(e,t,i){var n=this.menus[i],a=e?n.filter(this.createFilter(e)):n;a.length>0?this.menus[i]=a:this.menus[i]=[],t(a)},createFilter:function(e){return function(t){return 0===t.label.toLowerCase().indexOf(e.toLowerCase())}},initStore:function(){var e=this.config,t=this.options;e.lazy&&Object(B["e"])(t)?this.lazyLoad():(this.store=new te(t,e),this.menus=[this.store.getNodes()],this.syncMenuState())},syncCheckedValue:function(){var e=this.value,t=this.checkedValue;Object(B["f"])(e,t)||(this.checkedValue=e,this.syncMenuState())},syncMenuState:function(){var e=this.multiple,t=this.checkStrictly;this.syncActivePath(),e&&this.syncMultiCheckState(),t&&this.calculateCheckedNodePaths(),this.$nextTick(this.scrollIntoView)},syncMultiCheckState:function(){var e=this,t=this.getFlattedNodes(this.leafOnly);t.forEach((function(t){t.syncCheckState(e.checkedValue)}))},syncActivePath:function(){var e=this,t=this.store,i=this.multiple,n=this.activePath,a=this.checkedValue;if(Object(B["e"])(n))if(Object(B["e"])(a))this.activePath=[],this.menus=[t.getNodes()];else{var o=i?a[0]:a,s=this.getNodeByValue(o)||{},c=(s.pathNodes||[]).slice(0,-1);this.expandNodes(c)}else{var r=n.map((function(t){return e.getNodeByValue(t.getValue())}));this.expandNodes(r)}},expandNodes:function(e){var t=this;e.forEach((function(e){return t.handleExpand(e,!0)}))},calculateCheckedNodePaths:function(){var e=this,t=this.checkedValue,i=this.multiple,n=i?Object(B["b"])(t):[t];this.checkedNodePaths=n.map((function(t){var i=e.getNodeByValue(t);return i?i.pathNodes:[]}))},handleKeyDown:function(e){var t=e.target,i=e.keyCode;switch(i){case oe.up:var n=re(t,-1);de(n);break;case oe.down:var a=re(t,1);de(a);break;case oe.left:var o=this.$refs.menu[le(t)-1];if(o){var s=o.$el.querySelector('.el-cascader-node[aria-expanded="true"]');de(s)}break;case oe.right:var c=this.$refs.menu[le(t)+1];if(c){var r=c.$el.querySelector('.el-cascader-node[tabindex="-1"]');de(r)}break;case oe.enter:ue(t);break;case oe.esc:case oe.tab:this.$emit("close");break;default:return}},handleExpand:function(e,t){var i=this.activePath,n=e.level,a=i.slice(0,n-1),o=this.menus.slice(0,n);if(e.isLeaf||(a.push(e),o.push(e.children)),this.activePath=a,this.menus=o,!t){var s=a.map((function(e){return e.getValue()})),c=i.map((function(e){return e.getValue()}));Object(B["h"])(s,c)||(this.$emit("active-item-change",s),this.$emit("expand-change",s))}},handleCheckChange:function(e){this.checkedValue=e},lazyLoad:function(e,t){var i=this,n=this.config;e||(e=e||{root:!0,level:0},this.store=new te([],n),this.menus=[this.store.getNodes()]),e.loading=!0;var a=function(n){var a=e.root?null:e;if(n&&n.length&&i.store.appendNodes(n,a),e.loading=!1,e.loaded=!0,Array.isArray(i.checkedValue)){var o=i.checkedValue[i.loadCount++],s=i.config.value,c=i.config.leaf;if(Array.isArray(n)&&n.filter((function(e){return e[s]===o})).length>0){var r=i.store.getNodeByValue(o);r.data[c]||i.lazyLoad(r,(function(){i.handleExpand(r)})),i.loadCount===i.checkedValue.length&&i.$parent.computePresentText()}}t&&t(n)};n.lazyLoad(e,a)},calculateMultiCheckedValue:function(){this.checkedValue=this.getCheckedNodes(this.leafOnly).map((function(e){return e.getValueByOption()}))},scrollIntoView:function(){if(!this.$isServer){var e=this.$refs.menu||[];e.forEach((function(e){var t=e.$el;if(t){var i=t.querySelector(".el-scrollbar__wrap"),n=t.querySelector(".el-cascader-node.is-active")||t.querySelector(".el-cascader-node.in-active-path");Object(ae["a"])(i,n)}}))}},getNodeByValue:function(e){return this.store.getNodeByValue(e)},getFlattedNodes:function(e){var t=!this.config.lazy;return this.store.getFlattedNodes(e,t)},getCheckedNodes:function(e){var t=this.checkedValue,i=this.multiple;if(i){var n=this.getFlattedNodes(e);return n.filter((function(e){return e.checked}))}return Object(B["e"])(t)?[]:[this.getNodeByValue(t)]},clearCheckedNodes:function(){var e=this.config,t=this.leafOnly,i=e.multiple,n=e.emitPath;i?(this.getCheckedNodes(t).filter((function(e){return!e.isDisabled})).forEach((function(e){return e.doCheck(!1)})),this.calculateMultiCheckedValue()):this.checkedValue=n?[]:null}}},pe=he,fe=Object(P["a"])(pe,z,A,!1,null,null,null),ge=fe.exports,me=ge,ve=Object($["a"])("picture"),be=ve.mapState,ke=ve.mapActions,ye=(ve.mapMutations,{components:{cascaderPanel:me},props:{value:{type:[String,Number,Boolean,Object,Array],default:""},title:{type:[String,Number,Boolean],default:"移动至"}},data:function(){return{dialogVisible:!1,inputData:"",groupData:[],radio:[0,0,0]}},computed:Object(D["a"])({},be(["groups"])),created:function(){},watch:{},mounted:function(){return Object(x["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},methods:Object(D["a"])(Object(D["a"])({},ke(["handleGroups"])),{},{handleOpen:function(){var e=this;this.handleGroups().then((function(t){e.dialogVisible=!0,e.groupData=e.setTreeData(t)}))},handleClose:function(){this.dialogVisible=!1},handleConfirm:function(){if(this.inputData.length>0){var e=this.inputData.pop();this.$emit("confirm",e),this.handleClose()}else this.$message({message:"请选择要移动的分组",type:"warning"})},handleClosed:function(){this.inputData=""},setTreeData:function(e){return this.$heshop.toTree({parentKey:"parent_id",idKey:"id",parentID:0,childrenKey:"children"}).on(e).get()},handleChange:function(e){this.inputData=e}}),render:function(e){var t=this.dialogVisible,i=this.handleOpen,n=this.handleClose,a=this.handleConfirm,o=this.title,s=this.$slots.trigger||this.$slots.default,c={on:{click:i}},r={props:{visible:t,top:"10%",title:o,width:"800px","append-to-body":!0,"destroy-on-close":!0,"before-close":n,filterable:!0},on:{closed:this.handleClosed}},l={props:{value:this.inputData,options:this.groupData,key:1,props:{value:"id",label:"name"}}};return e("div",I()([{class:"dialog"},c]),[s,e("el-dialog",I()([{},r]),[e("div",{class:"dialog-group"},[e("div",{class:"dialog-group__search"},[e("el-input",{attrs:{placeholder:"输入分组名称搜索",size:"small"}},[e("el-button",{slot:"append",attrs:{icon:"el-icon-search"}})])]),e(me,I()([{},l,{on:{change:this.handleChange}}]))]),e("span",{slot:"footer",class:"dialog-footer"},[e("el-button",{on:{click:n}},["取 消"]),e("el-button",{attrs:{type:"primary"},on:{click:a,close:n}},["确 定"])])])])}}),_e=ye,Ce=(i("b945"),Object(P["a"])(_e,l,d,!1,null,"8979c85a",null)),xe=Ce.exports,De={props:{value:{type:[String,Number,Boolean,Object,Array],default:""},title:{type:[String,Number,Boolean],default:"图片"},placeholder:{type:[String,Number,Boolean],default:""},disabled:{type:[String,Number,Boolean,Object,Array],default:!1}},data:function(){return{max:32,dialogVisible:!1,inputData:{name:""}}},methods:{handleOpen:function(){if(!this.disabled){if(this.value.length>0){var e=this.value[0];this.inputData={id:e.id,type:e.type,name:e.title_name,parent_id:e.parent_id},0===e.type?this.max=8:this.max=32}this.dialogVisible=!0}},handleClose:function(){this.dialogVisible=!1},handleConfirm:function(){this.$emit("confirm",this.inputData),this.handleClose()},handleClosed:function(){this.inputData={name:""}}},render:function(e){var t=this,i=this.dialogVisible,n=this.handleOpen,a=this.handleClose,o=this.handleConfirm,s=this.placeholder,c=this.title,r=this.$slots.trigger||this.$slots.default,l={on:{click:n}},d={props:{visible:i,top:"20%",title:c,width:"360px","append-to-body":!0,"destroy-on-close":!0,"before-close":a},on:{closed:this.handleClosed}};return e("div",I()([{class:"dialog"},l]),[r,e("el-dialog",I()([{},d]),[e("el-input",{attrs:{placeholder:s,maxlength:this.max,"show-word-limit":!0},model:{value:t.inputData.name,callback:function(e){t.$set(t.inputData,"name",e)}}}),e("span",{slot:"footer",class:"dialog-footer"},[e("el-button",{on:{click:a}},["取 消"]),e("el-button",{attrs:{type:"primary"},on:{click:o,close:a}},["确 定"])])])])}},Le=De,Oe=(i("d52c"),Object(P["a"])(Le,u,h,!1,null,"45d80a8a",null)),Se=Oe.exports,Ie=Object($["a"])("photo"),we=Ie.mapState,Ne=Ie.mapActions,Pe=Ie.mapMutations,je={components:{Picture:L["a"],Upload:O["a"],Dialog:V,Group:xe,Rename:Se},props:{fileType:{type:[String,Number,Boolean,Object,Array],default:1}},provide:function(){return{uploader:this}},data:function(){return{index:-1,is_edit:0,checkedData:[],checkAll:!1,isIndeterminate:!1,loading:!1,breadcrumb:[{id:-1,name:"全部"}],upLoading:!1}},watch:{index:function(e){this.checkedData=[];var t=null;t=-1==e?{id:-1,name:"全部"}:this.groupList[e],this.breadcrumb=[t],this.setGroupInfo(t),this.LoadPhotoList({id:t.id,current:1,pageSize:15})},checkedData:function(e){e.length==this.photoList.length&&0!==e.length?(this.isIndeterminate=!1,this.checkAll=!0):e.length>0?this.isIndeterminate=!0:(this.checkAll=!1,this.isIndeterminate=!1)}},computed:Object(D["a"])(Object(D["a"])({},we(["groupList","groupInfo","photoList","pageInfo"])),{},{is_make:function(){if("全部"===this.groupInfo.name)return!1;if("未分组"===this.groupInfo.name)return!1;var e=this.groupInfo.path||this.groupInfo.url||"0";return e.split("-").length<3},is_move:function(){if(this.checkedData.length<1)return!0;var e=JSON.stringify(this.checkedData);return e.indexOf('"type":0')>-1},is_delete:function(){if(this.checkedData.length<1)return!0;var e=JSON.stringify(this.checkedData);return e.indexOf('"type":0')>-1&&this.checkedData.length>1||e.indexOf('"type":1')>-1&&e.indexOf('"type":0')>-1},is_rename:function(){if(0===this.checkedData.length)return!0;if(this.checkedData.length>1)return!0;var e=JSON.stringify(this.checkedData);return e.indexOf('"type":1')>-1&&e.indexOf('"type":0')>-1}}),mounted:function(){var e=this;return Object(x["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.LoadGroupList().then((function(){e.LoadPhotoList({id:-1,current:1,pageSize:15})}));case 1:case"end":return t.stop()}}),t)})))()},methods:Object(D["a"])(Object(D["a"])(Object(D["a"])({},Pe(["setGroupInfo"])),Ne(["LoadGroupList","LoadPhotoList","InterGroupItem","UpdateGroupItem","DeleteGroupItem","DeletePhotoList","MovePhotoList","UpdatePhotoItem","upadteGroupInfo"])),{},{handleMakeGroup:function(e){var t=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;this.loading=!0,this.InterGroupItem(e).then((function(e){1==i&&(t.index=-1,t.upadteGroupInfo({id:-1,name:"全部"}),t.LoadGroupList().then((function(){})),t.loading=!1),2==i&&setTimeout((function(){var i=e.parent_id||t.groupInfo.id;t.LoadPhotoList({id:i,current:1,pageSize:15}).then((function(){t.loading=!1})),t.checkedData=[]}),500)})).catch((function(){t.loading=!1}))},handleGroupDelete:function(e){var t=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;this.loading=!0,this.$confirm("此分组及子级分组的图片都将移至未分组中， 是否确认删除？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",center:!0}).then((function(){t.DeleteGroupItem({id:e,type:i}).then((function(){1==i&&setTimeout((function(){t.LoadPhotoList({id:t.groupInfo.id,current:1,pageSize:15}).then((function(){t.loading=!1})),t.checkedData=[]}),500),2==i&&(t.index=-1,t.LoadGroupList().then((function(){t.loading=!1,t.LoadPhotoList({id:-1,current:1,pageSize:15}),t.checkedData=[]})),t.loading=!1)})).catch((function(){t.loading=!1}))})).catch((function(){t.loading=!1}))},uploadFile:function(e){var t=this;return this.upLoading=!0,15===this.photoList.length&&this.photoList.splice(this.photoList.length-1,1),new Promise((function(i,n){var a=new FileReader;a.readAsDataURL(e),a.onload=function(a){t.$heshop.uploadV2({type:1,title:e.name,group_id:t.groupInfo.id,content:a.target.result}).then((function(e){t.loading=!1,i(e)})).catch((function(e){t.loading=!1,t.upLoading=!1,n(e)}))}}))},uploadFileSuccess:function(e){var t=this;return Object(x["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.LoadPhotoList({id:t.groupInfo.id,current:1,pageSize:15});case 2:t.upLoading=!1;case 3:case"end":return e.stop()}}),e)})))()},handleAllChange:function(e){this.isIndeterminate=!1,this.checkedData=e?this.photoList:[]},handleSizeChange:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.LoadPhotoList({id:this.groupInfo.id,current:e,pageSize:15}),this.checkedData=[]},handleDeletes:function(){var e=this;this.loading=!0;var t=[],i=0;for(var n in this.checkedData){var a=this.checkedData[n];a.id&&(i=a.type,t.push(a.id))}if(0===i){if(t[0]){var o=t[0];this.handleGroupDelete(o)}}else this.$confirm("是否确认删除选中内容","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",center:!0}).then((function(){e.DeletePhotoList(t).then((function(){e.LoadPhotoList({id:e.groupInfo.id,current:1,pageSize:15}).then((function(){e.loading=!1})),e.checkedData=[]}))})).catch((function(){e.loading=!1}))},handleMoveList:function(e){var t=this,i=[];this.checkedData.map((function(e){i.push(e.id)})),this.MovePhotoList({list:i,group_id:e}).then((function(){t.LoadPhotoList({id:t.groupInfo.id,current:1,pageSize:15}),t.checkedData=[]}))},handleRenameItem:function(e){var t=this;0==e.type?this.UpdateGroupItem(e).then((function(){t.LoadPhotoList({id:t.groupInfo.id,current:t.pageInfo.current,pageSize:15}),t.checkedData=[]})):e.id&&this.UpdatePhotoItem(e).then((function(){t.LoadPhotoList({id:t.groupInfo.id,current:t.pageInfo.current,pageSize:15}),t.checkedData=[]}))},handleDblClick:function(e){0===e.type&&(this.setGroupInfo(e),this.breadcrumb.push(e),this.LoadPhotoList({id:e.id,current:1,pageSize:15}),this.checkedData=[])},handleCrumbItem:function(e,t){if(0===t&&(this.upadteGroupInfo(e),this.breadcrumb=[e],this.LoadPhotoList({id:e.id,current:1,pageSize:15}),this.checkedData=[]),1===t){this.breadcrumb.length>2&&this.breadcrumb.pop();var i=this.breadcrumb[1];this.upadteGroupInfo(i),this.LoadPhotoList({id:i.id,current:1,pageSize:15}),this.checkedData=[]}},groupNameCheck:function(e){return e.length>8?e.substr(0,8):e}})},Ve=je,$e=(i("87c9"),Object(P["a"])(Ve,_,C,!1,null,"75181fdd",null)),ze=$e.exports,Ae=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"picture-selet"},[i("div",{staticClass:"picture-selet__detail"},[i("el-card",[i("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[i("span",[e._v("分组名称")]),i("span",{staticStyle:{float:"right",padding:"0","font-size":"14px",color:"#8c8c8c","font-weight":"400"}},[e._v("操作")])]),i("div",{staticClass:"picture-selet__detail-group"},[i("el-scrollbar",{style:{height:"632px"}},[i("el-radio-group",{model:{value:e.index,callback:function(t){e.index=t},expression:"index"}},[i("ul",[i("li",[i("el-radio",{staticClass:"picture-selet__detail-radio",attrs:{label:-1}},[i("img",{attrs:{src:"http://manongyun.oss-cn-hangzhou.aliyuncs.com/Qmpaas/le-icon-folder.png"}}),i("span",[e._v("全部")])]),i("div",{staticClass:"picture-selet__detail-action"})],1),e._l(e.groupList,(function(t,n){return i("li",{key:n},[i("el-radio",{staticClass:"picture-selet__detail-radio",attrs:{label:n}},[i("img",{attrs:{src:"http://manongyun.oss-cn-hangzhou.aliyuncs.com/Qmpaas/le-icon-folder.png"}}),e.is_edit===t.id?i("el-input",{attrs:{placeholder:"请输入内容"},model:{value:t.name,callback:function(i){e.$set(t,"name",i)},expression:"item.name"}},[i("el-button",{attrs:{slot:"append",type:"primary"},on:{click:function(i){e.UpdateGroupItem(t),e.is_edit=-1}},slot:"append"},[e._v("确认 ")])],1):i("span",[e._v(e._s(t.name))])],1),n?i("div",{staticClass:"picture-selet__detail-action"},[i("span",{attrs:{type:"text"},on:{click:function(i){e.is_edit=t.id}}},[e._v("编辑")]),e._v(" | "),i("span",{attrs:{type:"text"},on:{click:function(i){return e.handleGroupDelete(t.id,2)}}},[e._v("删除")])]):e._e()],1)}))],2)])],1),i("div",{staticClass:"picture-selet__detail-group-add"},[i("Dialog",{attrs:{title:"新建分组"},on:{confirm:function(t){return e.handleMakeGroup({id:0,name:t})}}},[i("el-button",{attrs:{plain:""}},[e._v("新建分组")])],1)],1)],1)]),i("div",{staticClass:"picture-selet__layout"},[i("div",{staticClass:"picture-selet__header"},[i("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},e._l(e.breadcrumb,(function(t,n){return i("el-breadcrumb-item",{key:n},[i("span",{on:{click:function(i){return e.handleCrumbItem(t,n)}}},[e._v(e._s(t.name||t.title_name))])])})),1)],1),i("div",{staticClass:"picture-selet__content"},[i("div",{staticClass:"picture-selet__tools"},[e.index>-1?i("div",{staticClass:"picture-selet__action"},[i("Upload",{attrs:{action:e.uploadFile,multiple:!0,onSuccess:e.uploadFileSuccess,autoUpload:"",accept:".mp4,.avi,.rmvb"}},[i("el-button",{attrs:{type:"primary"}},[e._v("上传视频")])],1)],1):e._e(),e.is_make?i("div",{staticClass:"picture-selet__action"},[i("Dialog",{attrs:{title:"创建子级分组"},on:{confirm:function(t){return e.handleMakeGroup({id:e.groupInfo.id,name:t},2)}}},[i("el-button",{attrs:{plain:""}},[e._v("创建子级分组")])],1)],1):e._e(),e.photoList.length>0?i("div",{staticClass:"picture-selet__action"},[i("el-checkbox",{attrs:{indeterminate:e.isIndeterminate},on:{change:e.handleAllChange},model:{value:e.checkAll,callback:function(t){e.checkAll=t},expression:"checkAll"}},[e._v(" 当前页全选 ")])],1):e._e(),e.photoList.length>0?i("div",{staticClass:"picture-selet__action"},[i("el-button",{attrs:{disabled:e.is_delete},on:{click:e.handleDeletes}},[e._v("删除")])],1):e._e(),e.photoList.length>0?i("div",{staticClass:"picture-selet__action"},[i("Group",{attrs:{disabled:e.is_move},on:{confirm:e.handleMoveList}},[i("el-button",{attrs:{disabled:e.is_move}},[e._v("移动至")])],1)],1):e._e(),e.photoList.length>0?i("div",{staticClass:"picture-selet__action"},[i("Rename",{attrs:{title:"重命名",disabled:e.is_rename},on:{confirm:e.handleRenameItem},model:{value:e.checkedData,callback:function(t){e.checkedData=t},expression:"checkedData"}},[i("el-button",{attrs:{disabled:e.is_rename},on:{click:e.handleRenameItem}},[e._v("重命名")])],1)],1):e._e()]),e.photoList.length>0?i("ul",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}]},[e.upLoading?i("li",{staticClass:"picture-select__content-loading"},[i("label",{staticClass:"picture-selet__content-label"},[i("div",{staticClass:"picture-selet__content-item"},[e._m(0),i("el-button",{attrs:{type:"text"}},[e._v("上传中...")])],1)])]):e._e(),e._l(e.photoList,(function(t,n){return i("li",{key:t.id},[i("label",{staticClass:"picture-selet__content-label",on:{dblclick:function(i){return i.stopPropagation(),e.handleDblClick(t)}}},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.checkedData,expression:"checkedData"}],staticClass:"picture-selet__content-input",attrs:{type:"checkbox"},domProps:{value:t,checked:Array.isArray(e.checkedData)?e._i(e.checkedData,t)>-1:e.checkedData},on:{change:function(i){var n=e.checkedData,a=i.target,o=!!a.checked;if(Array.isArray(n)){var s=t,c=e._i(n,s);a.checked?c<0&&(e.checkedData=n.concat([s])):c>-1&&(e.checkedData=n.slice(0,c).concat(n.slice(c+1)))}else e.checkedData=o}}}),i("div",{staticClass:"picture-selet__content-item"},[e._m(1,!0),i("div",{staticClass:"picture-selet__content-item-photo"},[t.type>0?i("div",{staticClass:"picture-selet__content-item-icon"},[i("i",{staticClass:"le-icon le-icon-shipin"})]):e._e(),t.type>0?i("Picture",{attrs:{src:t.cover}}):i("Picture",{attrs:{src:"http://manongyun.oss-cn-hangzhou.aliyuncs.com/Qmpaas/le-icon-folder.png"}})],1),i("el-button",{attrs:{slot:"reference",type:"text"},slot:"reference"},[e._v(e._s(t.title_name))])],1)])])}))],2):i("div",{staticClass:"picture-selet__content-empty"},[i("div",[i("Picture",{attrs:{src:"http://qmxq.oss-cn-hangzhou.aliyuncs.com/gallery_bg.png"}}),i("p",[e._v("该分组下暂无内容")])],1)]),i("div",{staticClass:"picture-selet__paging"},[i("el-pagination",{attrs:{background:"",layout:"prev, pager, next,jumper","page-size":e.pageInfo.size,"current-page":e.pageInfo.current,total:e.pageInfo.total},on:{"current-change":e.handleSizeChange}})],1)])])],1)])},Ge=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"picture-selet__content-item-photo flex flex-direction align-center justify-center"},[n("span",{staticClass:"le-icon le-icon-shipin"}),n("img",{attrs:{src:i("313f"),alt:""}})])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"picture-selet__content-close"},[i("i",{staticClass:"le-icon le-icon-tick"})])}],Be=(i("2e6f"),i("5ee2"),i("fa48")),Me={props:{value:{type:[String,Number,Boolean,Object,Array],default:""},title:{type:[String,Number,Boolean],default:"图片"},placeholder:{type:[String,Number,Boolean],default:""},max:{type:[String,Number,Boolean,Object,Array],default:8},disabled:{type:[String,Number,Boolean,Object,Array],default:!1}},data:function(){return{dialogVisible:!1,inputData:""}},computed:{},created:function(){},watch:{},mounted:function(){return Object(x["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},methods:{handleOpen:function(){this.disabled||(this.dialogVisible=!0)},handleClose:function(){this.dialogVisible=!1},handleConfirm:function(){this.$emit("confirm",this.inputData),this.handleClose()},handleClosed:function(){this.inputData=""}},render:function(e){var t=this,i=this.dialogVisible,n=this.handleOpen,a=this.handleClose,o=this.handleConfirm,s=this.placeholder,c=this.title,r=this.$slots.trigger||this.$slots.default,l={on:{click:n}},d={props:{visible:i,top:"20%",title:c,width:"360px","append-to-body":!0,"destroy-on-close":!0,"before-close":a},on:{closed:this.handleClosed}};return e("div",I()([{class:"dialog"},l]),[r,e("el-dialog",I()([{},d]),[e("el-input",{attrs:{placeholder:s,maxlength:this.max,"show-word-limit":!0},model:{value:t.inputData,callback:function(e){t.inputData=e}}}),e("span",{slot:"footer",class:"dialog-footer"},[e("el-button",{on:{click:a}},["取 消"]),e("el-button",{attrs:{type:"primary"},on:{click:o,close:a}},["确 定"])])])])}},Te=Me,Ee=(i("af4b"),Object(P["a"])(Te,p,f,!1,null,"400ace0f",null)),Re=Ee.exports,Fe=Object($["a"])("picture"),Ue=Fe.mapState,qe=Fe.mapActions,He=(Fe.mapMutations,{components:{cascaderPanel:me},props:{value:{type:[String,Number,Boolean,Object,Array],default:""},title:{type:[String,Number,Boolean],default:"移动至"}},data:function(){return{dialogVisible:!1,inputData:"",groupData:[],radio:[0,0,0]}},computed:Object(D["a"])({},Ue(["groups"])),created:function(){},watch:{},mounted:function(){return Object(x["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},methods:Object(D["a"])(Object(D["a"])({},qe(["handleGroups"])),{},{handleOpen:function(){var e=this;this.handleGroups().then((function(t){e.dialogVisible=!0,e.groupData=e.setTreeData(t)}))},handleClose:function(){this.dialogVisible=!1},handleConfirm:function(){if(this.inputData.length>0){var e=this.inputData.pop();this.$emit("confirm",e),this.handleClose()}else this.$message({message:"请选择要移动的分组",type:"warning"})},handleClosed:function(){this.inputData=""},setTreeData:function(e){return this.$heshop.toTree({parentKey:"parent_id",idKey:"id",parentID:0,childrenKey:"children"}).on(e).get()},handleChange:function(e){this.inputData=e}}),render:function(e){var t=this.dialogVisible,i=this.handleOpen,n=this.handleClose,a=this.handleConfirm,o=this.title,s=this.$slots.trigger||this.$slots.default,c={on:{click:i}},r={props:{visible:t,top:"10%",title:o,width:"800px","append-to-body":!0,"destroy-on-close":!0,"before-close":n,filterable:!0},on:{closed:this.handleClosed}},l={props:{value:this.inputData,options:this.groupData,key:1,props:{value:"id",label:"name"}}};return e("div",I()([{class:"dialog"},c]),[s,e("el-dialog",I()([{},r]),[e("div",{class:"dialog-group"},[e("div",{class:"dialog-group__search"},[e("el-input",{attrs:{placeholder:"输入分组名称搜索",size:"small"}},[e("el-button",{slot:"append",attrs:{icon:"el-icon-search"}})])]),e(me,I()([{},l,{on:{change:this.handleChange}}]))]),e("span",{slot:"footer",class:"dialog-footer"},[e("el-button",{on:{click:n}},["取 消"]),e("el-button",{attrs:{type:"primary"},on:{click:a,close:n}},["确 定"])])])])}}),Je=He,Ke=(i("c36c"),Object(P["a"])(Je,g,m,!1,null,"97a30176",null)),Ze=Ke.exports,Qe={props:{value:{type:[String,Number,Boolean,Object,Array],default:""},title:{type:[String,Number,Boolean],default:"图片"},placeholder:{type:[String,Number,Boolean],default:""},disabled:{type:[String,Number,Boolean,Object,Array],default:!1}},data:function(){return{max:32,dialogVisible:!1,inputData:{name:""}}},methods:{handleOpen:function(){if(!this.disabled){if(this.value.length>0){var e=this.value[0];this.inputData={id:e.id,type:e.type,name:e.title_name,parent_id:e.parent_id},0===e.type?this.max=8:this.max=32}this.dialogVisible=!0}},handleClose:function(){this.dialogVisible=!1},handleConfirm:function(){this.$emit("confirm",this.inputData),this.handleClose()},handleClosed:function(){this.inputData={name:""}}},render:function(e){var t=this,i=this.dialogVisible,n=this.handleOpen,a=this.handleClose,o=this.handleConfirm,s=this.placeholder,c=this.title,r=this.$slots.trigger||this.$slots.default,l={on:{click:n}},d={props:{visible:i,top:"20%",title:c,width:"360px","append-to-body":!0,"destroy-on-close":!0,"before-close":a},on:{closed:this.handleClosed}};return e("div",I()([{class:"dialog"},l]),[r,e("el-dialog",I()([{},d]),[e("el-input",{attrs:{placeholder:s,maxlength:this.max,"show-word-limit":!0},model:{value:t.inputData.name,callback:function(e){t.$set(t.inputData,"name",e)}}}),e("span",{slot:"footer",class:"dialog-footer"},[e("el-button",{on:{click:a}},["取 消"]),e("el-button",{attrs:{type:"primary"},on:{click:o,close:a}},["确 定"])])])])}},We=Qe,Xe=(i("5e8c"),Object(P["a"])(We,v,b,!1,null,"789a7e1d",null)),Ye=Xe.exports,et=Object($["a"])("video"),tt=et.mapState,it=et.mapActions,nt=et.mapMutations,at={components:{Picture:L["a"],Upload:Be["a"],Dialog:Re,Group:Ze,Rename:Ye},props:{fileType:{type:[String,Number,Boolean,Object,Array],default:2}},provide:function(){return{uploader:this}},data:function(){return{index:-1,is_edit:0,checkedData:[],checkAll:!1,isIndeterminate:!1,loading:!1,breadcrumb:[{id:-1,name:"全部"}],upLoading:!1}},watch:{index:function(e){this.checkedData=[];var t=null;t=-1==e?{id:-1,name:"全部"}:this.groupList[e],this.breadcrumb=[t],this.setGroupInfo(t),this.LoadPhotoList({id:t.id,current:1,pageSize:15})},checkedData:function(e){e.length>0?this.isIndeterminate=!0:(this.checkAll=!1,this.isIndeterminate=!1)}},computed:Object(D["a"])(Object(D["a"])({},tt(["groupList","groupInfo","photoList","pageInfo"])),{},{is_make:function(){if("全部"===this.groupInfo.name)return!1;if("未分组"===this.groupInfo.name)return!1;var e=this.groupInfo.path||this.groupInfo.url||"0";return e.split("-").length<3},is_move:function(){if(this.checkedData.length<1)return!0;var e=JSON.stringify(this.checkedData);return e.indexOf('"type":0')>-1},is_delete:function(){if(this.checkedData.length<1)return!0;var e=JSON.stringify(this.checkedData);return e.indexOf('"type":0')>-1&&this.checkedData.length>1||e.indexOf('"type":1')>-1&&e.indexOf('"type":0')>-1},is_rename:function(){if(0==this.checkedData.length)return!0;if(this.checkedData.length>1)return!0;var e=JSON.stringify(this.checkedData);return e.indexOf('"type":1')>-1&&e.indexOf('"type":0')>-1}}),mounted:function(){var e=this;return Object(x["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.LoadGroupList().then((function(){e.LoadPhotoList({id:-1,current:1,pageSize:15})}));case 1:case"end":return t.stop()}}),t)})))()},methods:Object(D["a"])(Object(D["a"])(Object(D["a"])({},nt(["setGroupInfo"])),it(["LoadGroupList","LoadPhotoList","InterGroupItem","UpdateGroupItem","DeleteGroupItem","DeletePhotoList","MovePhotoList","UpdatePhotoItem","upadteGroupInfo"])),{},{handleMakeGroup:function(e){var t=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;this.loading=!0,this.InterGroupItem(e).then((function(e){1==i&&(t.index=-1,t.upadteGroupInfo({id:-1,name:"全部"}),t.LoadGroupList().then((function(){}))),2==i&&setTimeout((function(){var i=e.parent_id||t.groupInfo.id;t.LoadPhotoList({id:i,current:1,pageSize:15}).then((function(){t.loading=!1})),t.checkedData=[]}),500)})).catch((function(){t.loading=!1}))},handleGroupDelete:function(e){var t=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;this.loading=!0,this.$confirm("此分组及子级分组的图片都将移至未分组中， 是否确认删除？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",center:!0}).then((function(){t.DeleteGroupItem({id:e,type:i}).then((function(){1==i&&setTimeout((function(){t.LoadPhotoList({id:t.groupInfo.id,current:1,pageSize:15}).then((function(){t.loading=!1})),t.checkedData=[]}),500),2==i&&(t.index=-1,t.LoadGroupList().then((function(){t.loading=!1,t.LoadPhotoList({id:-1,current:1,pageSize:15}),t.checkedData=[]})))})).catch((function(){t.loading=!1}))})).catch((function(){t.loading=!1}))},getVideoImage:function(e,t){if(e&&0==e.type.indexOf("video/")){var i=document.createElement("video");i.src=URL.createObjectURL(e),i.addEventListener("loadeddata",(function(){this.currentTime=1})),i.addEventListener("seeked",(function(){this.width=this.videoWidth,this.height=this.videoHeight;var i=document.createElement("canvas"),n=i.getContext("2d");i.width=this.width,i.height=this.height,n.drawImage(this,0,0,i.width,i.height);var a={url:i.toDataURL("image/jpeg",1),width:this.width,height:this.height,currentTime:this.currentTime,duration:this.duration};i.toBlob((function(i){a.blob=i,"function"==typeof t&&t.call(e,a)}),"image/jpeg")}))}},uploadFile:function(e){var t=this;return this.upLoading=!0,15===this.photoList.length&&this.photoList.splice(this.photoList.length-1,1),new Promise((function(i,n){var a=new FormData;t.getVideoImage(e,(function(o){a.append("content",e),a.append("cover",o.url),a.append("type",2),a.append("title",e.name),a.append("group_id",t.groupInfo.id),t.$heshop.video(a).then((function(e){t.loading=!1,i(e)})).catch((function(e){t.$message({message:e.data.message,type:"error"}),t.loading=!1,t.upLoading=!1,n(e)}))}))}))},uploadFileSuccess:function(){var e=this;return Object(x["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.LoadPhotoList({id:e.groupInfo.id,current:1,pageSize:15});case 2:e.upLoading=!1;case 3:case"end":return t.stop()}}),t)})))()},handleAllChange:function(e){this.isIndeterminate=!1,this.checkedData=e?this.photoList:[]},handleSizeChange:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.LoadPhotoList({id:this.groupInfo.id,current:e,pageSize:15}),this.checkedData=[]},handleDeletes:function(){var e=this;this.loading=!0;var t=[],i=0;for(var n in this.checkedData){var a=this.checkedData[n];a.id&&(i=a.type,t.push(a.id))}if(0===i){if(t[0]){var o=t[0];this.handleGroupDelete(o)}}else this.$confirm("是否确认删除选中内容","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",center:!0}).then((function(){e.DeletePhotoList(t).then((function(){e.LoadPhotoList({id:e.groupInfo.id,current:1,pageSize:15}).then((function(){e.loading=!1})),e.checkedData=[]}))})).catch((function(){}))},handleMoveList:function(e){var t=this,i=[];this.checkedData.map((function(e){i.push(e.id)})),this.MovePhotoList({list:i,group_id:e}).then((function(){t.LoadPhotoList({id:t.groupInfo.id,current:1,pageSize:15}),t.checkedData=[]}))},handleRenameItem:function(e){var t=this;0==e.type?this.UpdateGroupItem(e).then((function(){t.LoadPhotoList({id:t.groupInfo.id,current:t.pageInfo.current,pageSize:15}),t.checkedData=[]})):e.id&&this.UpdatePhotoItem(e).then((function(){t.LoadPhotoList({id:t.groupInfo.id,current:t.pageInfo.current,pageSize:15}),t.checkedData=[]}))},handleDblClick:function(e){0===e.type&&(this.setGroupInfo(e),this.breadcrumb.push(e),this.LoadPhotoList({id:e.id,current:1,pageSize:15}),this.checkedData=[])},handleCrumbItem:function(e,t){if(0===t&&(this.upadteGroupInfo(e),this.breadcrumb=[e],this.LoadPhotoList({id:e.id,current:1,pageSize:15}),this.checkedData=[]),1===t){this.breadcrumb.length>2&&this.breadcrumb.pop();var i=this.breadcrumb[1];this.upadteGroupInfo(i),this.LoadPhotoList({id:i.id,current:1,pageSize:15}),this.checkedData=[]}}})},ot=at,st=(i("6f63"),Object(P["a"])(ot,Ae,Ge,!1,null,"1cdf3e4c",null)),ct=st.exports,rt={components:{photoSelect:ze,videoSelect:ct},data:function(){return{activeName:"image",config:{action:{newGroup:!0,editGroup:!0,upload:!0,newDirectory:!0,onDelete:!0,onMove:!0,onRename:!0,checkall:!0}}}}},lt=rt,dt=Object(P["a"])(lt,k,y,!1,null,null,null);t["default"]=dt.exports},ee90:function(e,t,i){},fa1d:function(e,t,i){}}]);
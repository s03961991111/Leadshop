{"version":3,"sources":["webpack:///./src/pages/order/helper.js","webpack:///./src/pages/order/api.js","webpack:///./src/pages/order/waybill-edit.vue","webpack:///src/pages/order/waybill-edit.vue","webpack:///./src/pages/order/waybill-edit.vue?cfd7","webpack:///./src/pages/order/waybill-edit.vue?9bcc"],"names":["PAGE_HEADERS","transformPageHeaders","response","Object","keys","headers","forEach","item","toUpperCase","pagination","current","pageCount","totalCount","key","map","parseInt","service","Vue","prototype","$heshop","$message","waybillList","page","Promise","resolve","reject","waybill","then","data","catch","error","message","deleteWaybill","id","createWaybill","form","putWaybill","getArea","getDistrict","district","i","length","label","name","value","list","children","default","expressJson","search","include","keyword","code","is_waybill","waybillDetail","staticRenderFns","mobile","address","area","rules","companyList","loading","disabled","methods","routerBack","this","$router","back","submit","$refs","validate","valid","province","city","mounted","console","log","$route","query","render","component"],"mappings":"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","file":"js/order-waybillEdit.04032e29.js","sourcesContent":["const PAGE_HEADERS = [\r\n  'X-PAGINATION-TOTAL-COUNT',\r\n  'X-PAGINATION-PER-PAGE',\r\n  'X-PAGINATION-PAGE-COUNT',\r\n  'X-PAGINATION-CURRENT-PAGE'\r\n];\r\n\r\nexport function transformPageHeaders(response) {\r\n  Object.keys(response.headers).forEach(item => {\r\n    response.headers[item.toUpperCase()] = response.headers[item];\r\n    delete response.headers[item];\r\n  });\r\n  const pagination = {\r\n    current: 1,\r\n    pageCount: 1,\r\n    totalCount: 1\r\n  };\r\n  PAGE_HEADERS.forEach(key => {\r\n    Object.keys(response.headers).map(item => {\r\n      if (key === item) {\r\n        response.headers[item] = parseInt(response.headers[item]);\r\n      }\r\n    });\r\n  });\r\n  pagination.current = response.headers['X-PAGINATION-CURRENT-PAGE'];\r\n  pagination.pageCount = response.headers['X-PAGINATION-PAGE-COUNT'];\r\n  pagination.totalCount = response.headers['X-PAGINATION-TOTAL-COUNT'];\r\n  response.pagination = pagination;\r\n}\r\n","import Vue from 'vue';\r\nimport { transformPageHeaders } from './helper.js';\r\nconst service = Vue.prototype.$heshop;\r\nconst $message = Vue.prototype.$message;\r\n\r\n// 电子面单列表\r\nexport function waybillList(page = 1) {\r\n  return new Promise((resolve, reject) => {\r\n    service\r\n      .waybill('get')\r\n      .page(page, 5)\r\n      .then(response => {\r\n        transformPageHeaders(response);\r\n        const { data, pagination } = response;\r\n        resolve({\r\n          data: data,\r\n          pagination\r\n        });\r\n      })\r\n      .catch(error => {\r\n        reject(error);\r\n        $message(error.data.message);\r\n      });\r\n  });\r\n}\r\n\r\n// 删除电子面单\r\nexport function deleteWaybill(id) {\r\n  return new Promise(resolve => {\r\n    service\r\n      .waybill('delete', id)\r\n      .then(response => {\r\n        resolve(response);\r\n      })\r\n      .catch(error => {\r\n        $message(error.data.message);\r\n      });\r\n  });\r\n}\r\n\r\n// 新建电子面单\r\nexport function createWaybill(form = {}) {\r\n  return new Promise(resolve => {\r\n    service\r\n      .waybill('post', form)\r\n      .then(response => {\r\n        resolve(response);\r\n      })\r\n      .catch(error => {\r\n        $message(error.data.message);\r\n      });\r\n  });\r\n}\r\n\r\n// 更新电子面单\r\nexport function putWaybill(form = {}) {\r\n  return new Promise(resolve => {\r\n    service\r\n      .waybill('put', form)\r\n      .then(response => {\r\n        resolve(response);\r\n      })\r\n      .catch(error => {\r\n        $message(error.data.message);\r\n      });\r\n  });\r\n}\r\n\r\n// 获取地区\r\nexport function getArea() {\r\n  function getDistrict(district) {\r\n    for (let i = 0; i < district.length; i++) {\r\n      district[i].label = district[i].name;\r\n      district[i].value = district[i].name;\r\n      if (district[i].list) {\r\n        district[i].children = district[i].list;\r\n        getDistrict(district[i].children);\r\n      }\r\n    }\r\n  }\r\n  return new Promise(resolve => {\r\n    import('./components/district.json').then(response => {\r\n      getDistrict(response.default);\r\n      resolve(response.default);\r\n    });\r\n  });\r\n}\r\n\r\n// 获取物流公司列表\r\nexport function expressJson() {\r\n  return new Promise(resolve => {\r\n    service\r\n      .search('post', { include: 'setting' }, { keyword: 'expressjson' })\r\n      .then(response => {\r\n        response = response.map(item => {\r\n          return { value: item.name, label: item.code, is_waybill: item.is_waybill };\r\n        });\r\n        resolve(response);\r\n      })\r\n      .catch(error => {\r\n        $message(error.data.message);\r\n      });\r\n  });\r\n}\r\n\r\n// 获取电子面单详情\r\nexport function waybillDetail(id) {\r\n  return new Promise(resolve => {\r\n    service\r\n      .waybill('get', id)\r\n      .then(response => {\r\n        resolve(response);\r\n      })\r\n      .catch(error => {\r\n        $message(error.data.message);\r\n      });\r\n  });\r\n}\r\n","var render, staticRenderFns\nimport script from \"./waybill-edit.vue?vue&type=script&lang=js&\"\nexport * from \"./waybill-edit.vue?vue&type=script&lang=js&\"\nimport style0 from \"./waybill-edit.vue?vue&type=style&index=0&id=1be0c741&scoped=true&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/_vue-loader@15.9.7@vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"1be0c741\",\n  null\n  \n)\n\nexport default component.exports","<script>\r\nimport { createWaybill, expressJson, getArea, putWaybill, waybillDetail } from './api';\r\n\r\nexport default {\r\n  name: 'waybill-edit',\r\n  data() {\r\n    return {\r\n      form: {\r\n        mobile: '',\r\n        name: '',\r\n        address: '',\r\n        code: '',\r\n        area: []\r\n      },\r\n      rules: {\r\n        area: [\r\n          {\r\n            required: true,\r\n            message: '发货地区不能为空'\r\n          }\r\n        ],\r\n        name: [\r\n          {\r\n            required: true,\r\n            message: '姓名不能为空'\r\n          }\r\n        ],\r\n        mobile: [\r\n          {\r\n            required: true,\r\n            message: '联系方式不能为空'\r\n          }\r\n        ],\r\n        address: [\r\n          {\r\n            required: true,\r\n            message: '发货详细地址不能为空'\r\n          }\r\n        ],\r\n        code: [\r\n          {\r\n            required: true,\r\n            message: '快递公司不能为空'\r\n          }\r\n        ]\r\n      },\r\n      district: [],\r\n      companyList: [],\r\n      loading: false,\r\n      disabled: false\r\n    };\r\n  },\r\n  methods: {\r\n    routerBack() {\r\n      this.$router.back(-1);\r\n    },\r\n    submit() {\r\n      this.$refs['form'].validate(valid => {\r\n        if (valid) {\r\n          this.loading = true;\r\n          let form = this.$_.cloneDeep(this.form);\r\n          form.province = form.area[0];\r\n          form.city = form.area[1];\r\n          form.district = form.area[2];\r\n          delete form.area;\r\n          if (!this.$route.query.id) {\r\n            createWaybill(form).then(() => {\r\n              this.routerBack();\r\n              this.loading = false;\r\n            });\r\n          } else {\r\n            putWaybill(form).then(() => {\r\n              this.routerBack();\r\n              this.loading = false;\r\n            });\r\n          }\r\n        }\r\n      });\r\n    }\r\n  },\r\n  mounted() {\r\n    getArea().then(response => {\r\n      this.district = response;\r\n    });\r\n    expressJson().then(response => {\r\n      console.log(response);\r\n      this.companyList = response.filter(item => {\r\n        if (item.is_waybill) {\r\n          return item;\r\n        }\r\n      });\r\n      console.log(this.companyList);\r\n    });\r\n    if (this.$route.query.id) {\r\n      this.loading = true;\r\n      this.disabled = true;\r\n      waybillDetail(this.$route.query.id).then(response => {\r\n        this.form = response;\r\n        this.form.area = [response.province, response.city, response.district];\r\n        this.loading = false;\r\n        this.disabled = false;\r\n      });\r\n    }\r\n  },\r\n  render() {\r\n    const self = this;\r\n    return (\r\n      <div class=\"le-main\">\r\n        <el-breadcrumb separator-class=\"el-icon-arrow-right\" class=\"he-link-text\">\r\n          <el-breadcrumb-item class=\"he-link\">\r\n            <a onClick={self.routerBack}> 电子面单</a>\r\n          </el-breadcrumb-item>\r\n          <el-breadcrumb-item>\r\n            {(() => {\r\n              return self.$route.query.id ? '编辑' : '新增';\r\n            })()}\r\n            电子面单\r\n          </el-breadcrumb-item>\r\n        </el-breadcrumb>\r\n        <el-form\r\n          label-width=\"193px\"\r\n          ref=\"form\"\r\n          v-loading={self.loading}\r\n          props={{\r\n            rules: self.rules,\r\n            model: self.form\r\n          }}>\r\n          <div class=\"le-card\">\r\n            <div class=\"le-card--head flex align-center\">\r\n              <span class=\"le-sign\" />\r\n              <span>快递公司</span>\r\n            </div>\r\n            <el-form-item label=\"快递公司\" prop=\"code\">\r\n              <el-select v-model={self.form.code} placeholder=\"请选择快递公司\">\r\n                {self.companyList.map((item, index) => {\r\n                  return <el-option key={index} label={item.value} value={item.label}></el-option>;\r\n                })}\r\n              </el-select>\r\n            </el-form-item>\r\n          </div>\r\n          <div class=\"le-card\">\r\n            <div class=\"le-card--head flex align-center\">\r\n              <span class=\"le-sign\" />\r\n              <span>发货人信息</span>\r\n            </div>\r\n            <el-form-item label=\"姓名\" prop=\"name\">\r\n              <el-input placeholder=\"请输入姓名\" v-model={self.form.name} />\r\n            </el-form-item>\r\n            <el-form-item label=\"联系方式\" prop=\"mobile\">\r\n              <el-input placeholder=\"请输入联系方式\" v-model={self.form.mobile} />\r\n            </el-form-item>\r\n            <el-form-item label=\"发货地区\" prop=\"area\">\r\n              <el-cascader\r\n                options={self.district}\r\n                v-model={self.form.area}\r\n                placeholder=\"请选择发货地区\"\r\n                props={{ expandTrigger: 'hover' }}\r\n              />\r\n            </el-form-item>\r\n            <el-form-item label=\"发货详细地址\" prop=\"address\">\r\n              <el-input placeholder=\"请输入发货详细地址\" v-model={self.form.address} />\r\n            </el-form-item>\r\n          </div>\r\n        </el-form>\r\n        <div class=\"le-cardpin\">\r\n          <el-button\r\n            type=\"primary\"\r\n            disabled={self.disabled}\r\n            loading={self.loading && !self.disabled}\r\n            onClick={self.submit}>\r\n            保存\r\n          </el-button>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped lang=\"less\">\r\n.le-card {\r\n  margin-top: 24px;\r\n}\r\n</style>\r\n","import mod from \"-!../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/_thread-loader@2.1.3@thread-loader/dist/cjs.js!../../../node_modules/_babel-loader@8.2.2@babel-loader/lib/index.js!../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/_vue-loader@15.9.7@vue-loader/lib/index.js??vue-loader-options!./waybill-edit.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/_thread-loader@2.1.3@thread-loader/dist/cjs.js!../../../node_modules/_babel-loader@8.2.2@babel-loader/lib/index.js!../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/_vue-loader@15.9.7@vue-loader/lib/index.js??vue-loader-options!./waybill-edit.vue?vue&type=script&lang=js&\"","export * from \"-!../../../node_modules/_mini-css-extract-plugin@0.9.0@mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/_css-loader@3.6.0@css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../node_modules/_vue-loader@15.9.7@vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/_postcss-loader@3.0.0@postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/_less-loader@5.0.0@less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/_vue-loader@15.9.7@vue-loader/lib/index.js??vue-loader-options!./waybill-edit.vue?vue&type=style&index=0&id=1be0c741&scoped=true&lang=less&\""],"sourceRoot":""}
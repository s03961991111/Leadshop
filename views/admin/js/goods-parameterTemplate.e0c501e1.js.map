{"version":3,"sources":["webpack:///./src/pages/goods/parameterTemplate.vue?071e","webpack:///./src/pages/goods/parameterTemplate.vue","webpack:///src/pages/goods/parameterTemplate.vue","webpack:///./src/pages/goods/parameterTemplate.vue?3d6d"],"names":["staticRenderFns","name","data","list","page","current","count","size","total","search","sort","checkList","checkAll","isIndeterminate","methods","createParameterTemplate","this","$router","push","path","editParameterTemplate","item","id","selectionChange","length","handleCheckAllChange","forEach","batchDelete","$confirm","then","oneDelete","onDel","$heshop","clearSearch","getList","sortList","e","order","switchPage","mounted","render","component"],"mappings":"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","file":"js/goods-parameterTemplate.e0c501e1.js","sourcesContent":["export * from \"-!../../../node_modules/_mini-css-extract-plugin@0.9.0@mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/_css-loader@3.6.0@css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/_vue-loader@15.9.7@vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/_postcss-loader@3.0.0@postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/_sass-loader@7.3.1@sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/_vue-loader@15.9.7@vue-loader/lib/index.js??vue-loader-options!./parameterTemplate.vue?vue&type=style&index=0&id=1e0fd681&scoped=true&lang=scss&\"","var render, staticRenderFns\nimport script from \"./parameterTemplate.vue?vue&type=script&lang=js&\"\nexport * from \"./parameterTemplate.vue?vue&type=script&lang=js&\"\nimport style0 from \"./parameterTemplate.vue?vue&type=style&index=0&id=1e0fd681&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/_vue-loader@15.9.7@vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"1e0fd681\",\n  null\n  \n)\n\nexport default component.exports","<script>\r\nexport default {\r\n  name: 'parameterTemplate',\r\n  data() {\r\n    return {\r\n      list: [],\r\n      page: {\r\n        current: 1,\r\n        count: 1,\r\n        size: 10,\r\n        total: 1\r\n      },\r\n      search: '',\r\n      sort: 'DESC',\r\n      checkList: [],\r\n      checkAll: false,\r\n      isIndeterminate: false\r\n    };\r\n  },\r\n  methods: {\r\n    // 创建跳转\r\n    createParameterTemplate() {\r\n      this.$router.push({\r\n        path: '/goods/parameterTemplateEdit'\r\n      });\r\n    },\r\n    // 编辑跳转\r\n    editParameterTemplate(item) {\r\n      this.$router.push({\r\n        path: '/goods/parameterTemplateEdit?id=' + item.id\r\n      });\r\n    },\r\n    selectionChange(list) {\r\n      this.checkList = list;\r\n      this.isIndeterminate = this.checkList.length > 0 && this.checkList.length < this.list.length;\r\n      if (this.checkList.length === this.list.length) {\r\n        this.checkAll = true;\r\n      }\r\n      if (this.checkList.length === 0) {\r\n        this.checkAll = false;\r\n      }\r\n    },\r\n    handleCheckAllChange() {\r\n      this.isIndeterminate = false;\r\n      this.checkList = this.list;\r\n      this.list.forEach(item => {\r\n        this.$refs.templateTable.toggleRowSelection(item, this.checkAll);\r\n      });\r\n    },\r\n    // 批量删除\r\n    batchDelete() {\r\n      this.$confirm('是否确定批量删除参数模板？').then(() => {\r\n        let ids = this.checkList.map(item => {\r\n          return item.id;\r\n        });\r\n        this.onDel(ids, '批量删除参数模板成功');\r\n      });\r\n    },\r\n    // 删除单个\r\n    oneDelete(item) {\r\n      this.$confirm('是否确定删除此参数模板？').then(() => {\r\n        this.onDel([item.id], '删除成功');\r\n      });\r\n    },\r\n    onDel(ids, msg) {\r\n      this.$heshop\r\n        .goodsargs('delete', ids)\r\n        .then(res => {\r\n          let page = this.page;\r\n          if (page.count == page.current && page.current > 1) {\r\n            if (page.total - page.size * (page.current - 1) == ids.length) {\r\n              this.page.current -= 1;\r\n            }\r\n          }\r\n          this.getList();\r\n          this.$message.success(msg);\r\n        })\r\n        .catch(err => {\r\n          this.$message.error(err.data.message);\r\n        });\r\n    },\r\n    //   清空搜索\r\n    clearSearch() {\r\n      this.search = '';\r\n      this.getList();\r\n    },\r\n    sortList(e) {\r\n      this.sort = e.order == 'descending' ? 'DESC' : 'ASC';\r\n      this.getList();\r\n    },\r\n    switchPage(e) {\r\n      this.page.current = e;\r\n      this.getList();\r\n    },\r\n    getList() {\r\n      this.$heshop\r\n        .goodsargs('get', {\r\n          search: this.search,\r\n          sort: this.sort\r\n        })\r\n        .page(this.page.current, this.page.size)\r\n        .then(res => {\r\n          let { data, headers } = res;\r\n          this.list = data;\r\n          this.page = {\r\n            current: +headers['x-pagination-current-page'],\r\n            count: +headers['x-pagination-page-count'],\r\n            size: +headers['x-pagination-per-page'],\r\n            total: +headers['x-pagination-total-count']\r\n          };\r\n        })\r\n        .catch(() => {\r\n          this.$message.error('获取失败');\r\n        });\r\n    }\r\n  },\r\n  mounted() {\r\n    this.getList();\r\n  },\r\n  render() {\r\n    const self = this;\r\n    return (\r\n      <div class=\"le-main\">\r\n        <el-button type=\"primary\" onClick={self.createParameterTemplate}>\r\n          新增参数模板\r\n        </el-button>\r\n        <el-form\r\n          class=\"le-card le-search\"\r\n          label-width=\"120px\"\r\n          nativeOn={{\r\n            submit(event) {\r\n              // 阻止表单提交\r\n              event.preventDefault();\r\n              self.getList();\r\n            }\r\n          }}>\r\n          <el-form-item label=\"参数模板搜索\">\r\n            <el-input placeholder=\"输入参数模板搜索\" v-model={self.search} />\r\n          </el-form-item>\r\n          <el-form-item>\r\n            <el-button type=\"primary\" onClick={self.getList}>\r\n              筛选\r\n            </el-button>\r\n            <el-button onClick={self.clearSearch}>清空</el-button>\r\n          </el-form-item>\r\n        </el-form>\r\n        <div class=\"le-card le-table\">\r\n          <div class=\"le-table--setting\">\r\n            <el-checkbox\r\n              v-model={self.checkAll}\r\n              indeterminate={self.isIndeterminate}\r\n              on-change={self.handleCheckAllChange}>\r\n              当页全选\r\n            </el-checkbox>\r\n            <el-button onClick={self.batchDelete} disabled={!self.checkList.length}>\r\n              删除\r\n            </el-button>\r\n          </div>\r\n          <el-table\r\n            {...{\r\n              on: {\r\n                'sort-change': self.sortList,\r\n                'selection-change': self.selectionChange\r\n              }\r\n            }}\r\n            default-sort={{ prop: 'created_time', order: 'descending' }}\r\n            data={self.list}\r\n            row-class-name=\"le-table-row\"\r\n            header-row-class-name=\"le-table-header\"\r\n            ref=\"templateTable\">\r\n            <el-table-column type=\"selection\" width=\"55\" />\r\n            <el-table-column label=\"参数模板名称\" prop=\"title\" />\r\n            <el-table-column\r\n              label=\"创建时间\"\r\n              sortable=\"custom\"\r\n              prop=\"created_time\"\r\n              scopedSlots={{\r\n                default: scope => {\r\n                  return self.$moment(new Date(scope.row.created_time * 1000)).format('Y-MM-DD HH:mm:ss');\r\n                }\r\n              }}\r\n            />\r\n            <el-table-column\r\n              label=\"操作\"\r\n              scopedSlots={{\r\n                default: scope => {\r\n                  return (\r\n                    <div class=\"le-table--operating flex align-center\">\r\n                      <el-button type=\"text\" onClick={self.editParameterTemplate.bind(self, scope.row, scope.$index)}>\r\n                        编辑\r\n                      </el-button>\r\n                      <span class=\"le-operating--line\" />\r\n                      <el-button type=\"text\" onClick={self.oneDelete.bind(self, scope.row)}>\r\n                        删除\r\n                      </el-button>\r\n                    </div>\r\n                  );\r\n                }\r\n              }}\r\n            />\r\n          </el-table>\r\n          <div class=\"le-table--setting flex align-center justify-between\">\r\n            <div>\r\n              <el-checkbox v-model={self.checkAll} indeterminate={self.isIndeterminate}>\r\n                当页全选\r\n              </el-checkbox>\r\n              <el-button onClick={self.batchDelete} disabled={!self.checkList.length}>\r\n                删除\r\n              </el-button>\r\n            </div>\r\n            <el-pagination\r\n              background\r\n              current-page={self.page.current}\r\n              layout=\"prev, pager, next, jumper\"\r\n              on-current-change={self.switchPage}\r\n              page-count={self.page.count}\r\n            />\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped lang=\"scss\">\r\n.le-card {\r\n  margin-top: 24px;\r\n}\r\n.le-search {\r\n  .el-form-item:last-child {\r\n    margin-bottom: 0;\r\n  }\r\n}\r\n\r\n.le-table /deep/ {\r\n  .le-table--setting {\r\n    padding-left: 14px;\r\n    &:first-child {\r\n      margin-bottom: 16px;\r\n    }\r\n    &:last-child {\r\n      margin-top: 16px;\r\n    }\r\n    .el-button {\r\n      margin-left: 15px;\r\n    }\r\n  }\r\n  .le-table-header {\r\n    .el-table-column--selection {\r\n      opacity: 0;\r\n    }\r\n  }\r\n  .le-table-row {\r\n    font-size: 14px;\r\n    font-family: Microsoft YaHei;\r\n    font-weight: 400;\r\n    color: #262626;\r\n    height: 52px;\r\n    .cell {\r\n      padding-left: 10px;\r\n    }\r\n  }\r\n}\r\n</style>\r\n","import mod from \"-!../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/_thread-loader@2.1.3@thread-loader/dist/cjs.js!../../../node_modules/_babel-loader@8.2.2@babel-loader/lib/index.js!../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/_vue-loader@15.9.7@vue-loader/lib/index.js??vue-loader-options!./parameterTemplate.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/_thread-loader@2.1.3@thread-loader/dist/cjs.js!../../../node_modules/_babel-loader@8.2.2@babel-loader/lib/index.js!../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/_vue-loader@15.9.7@vue-loader/lib/index.js??vue-loader-options!./parameterTemplate.vue?vue&type=script&lang=js&\""],"sourceRoot":""}
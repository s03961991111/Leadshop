(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["promoter-level-editor"],{"0e28":function(e,t,n){"use strict";n.d(t,"q",(function(){return l})),n.d(t,"t",(function(){return u})),n.d(t,"a",(function(){return s})),n.d(t,"L",(function(){return d})),n.d(t,"k",(function(){return f})),n.d(t,"j",(function(){return m})),n.d(t,"z",(function(){return p})),n.d(t,"x",(function(){return v})),n.d(t,"u",(function(){return g})),n.d(t,"y",(function(){return h})),n.d(t,"c",(function(){return b})),n.d(t,"v",(function(){return w})),n.d(t,"w",(function(){return k})),n.d(t,"D",(function(){return _})),n.d(t,"d",(function(){return P})),n.d(t,"i",(function(){return y})),n.d(t,"C",(function(){return $})),n.d(t,"B",(function(){return x})),n.d(t,"E",(function(){return O})),n.d(t,"e",(function(){return N})),n.d(t,"f",(function(){return I})),n.d(t,"A",(function(){return A})),n.d(t,"h",(function(){return T})),n.d(t,"F",(function(){return G})),n.d(t,"l",(function(){return C})),n.d(t,"n",(function(){return L})),n.d(t,"I",(function(){return j})),n.d(t,"m",(function(){return q})),n.d(t,"H",(function(){return E})),n.d(t,"J",(function(){return R})),n.d(t,"p",(function(){return U})),n.d(t,"b",(function(){return X})),n.d(t,"K",(function(){return z})),n.d(t,"G",(function(){return B})),n.d(t,"s",(function(){return J})),n.d(t,"g",(function(){return D})),n.d(t,"o",(function(){return K})),n.d(t,"r",(function(){return F}));n("2769"),n("ecf1"),n("f49b"),n("b1fa");var r=n("430a"),a=(n("6afd"),n("2070"),n("eb62"),["X-PAGINATION-TOTAL-COUNT","X-PAGINATION-PER-PAGE","X-PAGINATION-PAGE-COUNT","X-PAGINATION-CURRENT-PAGE"]);function o(e){Object.keys(e.headers).forEach((function(t){e.headers[t.toUpperCase()]=e.headers[t],delete e.headers[t]}));var t={current:1,pageCount:1,totalCount:1};a.forEach((function(t){Object.keys(e.headers).map((function(n){t===n&&(e.headers[n]=parseInt(e.headers[n]))}))})),t.current=e.headers["X-PAGINATION-CURRENT-PAGE"],t.pageCount=e.headers["X-PAGINATION-PAGE-COUNT"],t.totalCount=e.headers["X-PAGINATION-TOTAL-COUNT"],e.pagination=t}n("7c98");var i=r["default"].prototype.$heshop,c=r["default"].prototype.$message.error;function l(e){var t=e.tabKey,n=void 0===t?"all":t,r=e.page,a=void 0===r?1:r,l=e.search,u=void 0===l?"":l,s=e.sort,d=void 0===s?{}:s,f=e.time_start,m=void 0===f?0:f,p=e.time_end,v=void 0===p?0:p,g=e.cost_status,h=void 0===g?null:g,b=e.is_promoter,w=void 0===b?null:b,k=e.group,_=void 0===k?[]:k,P=e.price_start,y=void 0===P?"":P,$=e.price_end,x=void 0===$?"":$;return new Promise((function(e){i.search("post",{include:"goods"},{keyword:{tab_key:n,search:u,sort:d,time_start:m,time_end:v,is_promoter:w,cost_status:h,group:_,price_start:y,price_end:x}}).page(a,10).then((function(t){o(t);var n=t.data,r=t.pagination;e({data:n,pagination:r})})).catch((function(e){c(e.data.message)}))}))}function u(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return new Promise((function(a,o){i.promotergoods("put",{type:e,id:t,tab_key:n},{is_promoter:r}).then(a).catch(o)}))}function s(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new Promise((function(t,n){i.promoter("post",e).then(t).catch((function(e){c(e.data.message),n(e)}))}))}function d(e){return new Promise((function(t,n){i.promoter("get",{behavior:"add_search",search:e}).then((function(e){t(e)})).catch((function(e){c(e.data.message),n(e)}))}))}function f(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{keyword:"",begin_time:null,end_time:null,type:null,level:null};return new Promise((function(n){i.finance("get",t).page(e,10).then((function(e){o(e);var t=e.data,r=e.pagination;n({data:t,pagination:r})})).catch((function(e){c(e.data.message)}))}))}function m(e,t,n){return e=parseInt(e),new Promise((function(r,a){i.finance("put",e,{status:t,content:n}).then(r).catch((function(e){a(e)}))}))}function p(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise((function(n){i.search("post",{include:"promoterorder"},t).page(e,10).then((function(e){o(e);var t=e.data,r=e.pagination;n({data:t,pagination:r})})).catch((function(e){c(e.data.message)}))}))}function v(){return new Promise((function(e){i.promoterlevel("get").then(e).catch((function(e){c(e.data.message)}))}))}function g(e){return e=parseInt(e),new Promise((function(t){i.promoterlevel("delete",e).then(t).catch((function(e){c(e.data.message)}))}))}function h(){return new Promise((function(e){i.promoterlevel("get",{behavior:"option"}).then(e).catch((function(e){c(e.data.message)}))}))}function b(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new Promise((function(t,n){i.promoterlevel("post",e).then(t).catch((function(e){c(e.data.message),n(e)}))}))}function w(e){return e=parseInt(e),new Promise((function(t){i.promoterlevel("get",e).then(t).catch((function(e){c(e.data.message)}))}))}function k(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e=parseInt(e),new Promise((function(n,r){i.promoterlevel("put",e,t).then(n).catch((function(e){c(e.data.message),r(e)}))}))}function _(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1?arguments[1]:void 0;return new Promise((function(n){i.promotermaterial("get",t).page(e,10).then((function(e){o(e);var t=e.data,r=e.pagination;n({data:t,pagination:r})})).catch((function(e){c(e.data.message)}))}))}function P(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new Promise((function(t){i.promotermaterial("post",e).then(t).catch((function(e){c(e.data.message)}))}))}function y(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise((function(n){i.promotermaterial("put",e,t).then(n).catch((function(e){c(e.data.message)}))}))}function $(e){return new Promise((function(t){i.promotermaterial("get",e).then(t).catch((function(e){c(e.data.message)}))}))}function x(e){return new Promise((function(t){i.promotermaterial("delete",e).then(t).catch((function(e){c(e.data.message)}))}))}function O(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise((function(n){i.promoterzone("get",t).page(e,10).then((function(e){o(e);var t=e.data,r=e.pagination;n({data:t,pagination:r})})).catch((function(e){c(e.data.message)}))}))}function N(e){return new Promise((function(t){i.promoterzone("post",e).then(t).catch((function(e){c(e.data.message)}))}))}function I(e){return new Promise((function(t){i.promoterzone("delete",e).then(t).catch((function(e){c(e.data.message)}))}))}function A(e){return e=parseInt(e),new Promise((function(t){i.promoterzone("get",e).then((function(e){t(e)})).catch((function(e){c(e.data.message)}))}))}function T(e,t){return e=parseInt(e),new Promise((function(n,r){i.promoterzone("put",e,t).then(n).catch((function(e){r(e),c(e.data.message)}))}))}function G(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new Promise((function(t,n){i.setting("post",{keyword:"commission_setting",content:e}).then(t).catch((function(e){n(e)}))}))}function C(){return new Promise((function(e,t){i.search("post",{include:"setting"},{keyword:"commission_setting"}).then(e).catch((function(e){c(e.data.message),t()}))}))}function L(){return new Promise((function(e,t){i.search("post",{include:"setting"},{keyword:"promoter_setting"}).then(e).catch((function(e){c(e.data.message),t()}))}))}function j(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new Promise((function(t,n){i.setting("post",{keyword:"promoter_setting",content:e}).then(t).catch((function(e){n(e)}))}))}function q(){return new Promise((function(e,t){i.search("post",{include:"setting"},{keyword:"promoter_rank"}).then(e).catch((function(e){c(e.data.message),t()}))}))}function E(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new Promise((function(t,n){i.setting("post",{keyword:"promoter_rank",content:e}).then(t).catch((function(e){n(e)}))}))}function R(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new Promise((function(t,n){i.setting("post",{keyword:"promoter_recruit_make",content:e}).then(t).catch((function(e){n(e)}))}))}function U(){return new Promise((function(e,t){i.search("post",{include:"setting"},{keyword:"promoter_recruit_make"}).then((function(t){e(t.content)})).catch((function(e){c(e.data.message),t()}))}))}function X(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return new Promise((function(r,a){i.promoter("put",{id:e,behavior:t},n).then(r).catch((function(e){c(e.data.message),a()}))}))}function z(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{uid:"",mobile:""};return new Promise((function(t,n){i.promoter("get",{behavior:"transfer_search",from_uid:e.uid,mobile:e.mobile}).then(t).catch((function(e){c(e.data.message),n(e)}))}))}function B(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new Promise((function(t,n){i.setting("post",{keyword:"promoter_page_setting",content:e}).then(t).catch((function(e){c(e.data.message),n(e)}))}))}function J(){return new Promise((function(e,t){i.search("post",{include:"setting"},{keyword:"promoter_page_setting"}).then((function(t){e(t.content)})).catch((function(e){c(e.data.message),t(e)}))}))}function D(e,t){return new Promise((function(n,r){i.promoter("put",parseInt(e),{level:t}).then(n).catch((function(e){c(e.data.message),r(e)}))}))}function K(e){return new Promise((function(t,n){i.qrcode("post",e).then(t).catch((function(e){c(e.data.message),n(e)}))}))}function F(){return new Promise((function(e,t){i.group("get",{include:"goods"}).then((function(t){e(t)})).catch((function(e){c(e.data.message),t(e)}))}))}},"1ce7":function(e,t,n){"use strict";n("b079")},"717a":function(e,t,n){"use strict";n.r(t);var r,a,o=n("4c02"),i=n.n(o),c=n("99a5"),l=(n("6a61"),n("e1d4"),n("fc2a"),n("a5c9"),n("f5bd"),n("eb62"),n("2070"),n("b12c"),n("2769"),n("0756"),n("0e28")),u={name:"level-editor",data:function(){var e=this,t=/(^[\d]|^[1-9][\d]*)($|[\.][\d]{0,2}$)/,n=function(n,r,a){t.test(r)?(r=Number(r),r>100?a("请输入小于100的数字"):((r<=e.form.second||r<=e.form.third)&&a("一级分销佣金需大于二级分销佣金和三级分销佣金"),a())):a("请输入小数位为两位的数字")},r=function(n,r,a){t.test(r)?(r=Number(r),r>100?a("请输入小于100的数字"):(r<e.form.third&&a("二级分销佣金需大于三级分销佣金"),r>e.form.first&&a("二级分销佣金需小于一级分销佣金"),a())):a("请输入小数位为两位的数字")},a=function(n,r,a){var o=e.$_.cloneDeep(e.levelList).reverse();if(t.test(r))if(r=Number(r),r>100)a("请输入小于100的数字");else{if(r>=Number(e.form.second)&&a("三级分销佣金需小于二级分销佣金"),e.form.level>1){var i=e.form.level,c=o.find((function(e){return e.level<i&&e.first}));if(c){var l=Number(c.first);r<=l&&a("三分销佣金需大于【".concat(c.name,"】的一级分销佣金").concat(l,"%"))}}a()}else a("请输入小数位为两位的数字")},o=function(t,n,r){var a=e.form.condition,o=[];o=Object.keys(a).map((function(e){return{key:e,value:a[e]}}));var i=o.findIndex((function(e){return e.value.checked}));i<0&&r("条件必须选一个");for(var c=0;c<o.length;c++)if(o[c].value.checked&&!o[c].value.num)return void r("值不能为空");r()};return{form:{name:"",level:null,first:"",second:"",third:"",update_type:1,is_auto:1,condition:{all_children:{checked:!1,num:null},total_bonus:{checked:!1,num:null},total_money:{checked:!1,num:null}}},levelList:[],rules:{level:[{required:!0,message:"请选择等级"}],name:[{required:!0,message:"请输入等级名称"}],first:[{required:!0,validator:n,trigger:["blur"]}],second:[{required:!0,validator:r,trigger:["blur"]}],third:[{required:!0,validator:a,trigger:["blur"]}],update_type:[{required:!0,validator:o,trigger:["change"]}]},loading:!0,disabled:!0}},mounted:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var n,r,a,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(l["y"])();case 2:if(n=t.sent,e.levelList=n.list,r=e.$route.query.id,!r){t.next=12;break}return e.loading=!0,t.next=9,Object(l["v"])(r);case 9:for(a=t.sent,o=0;o<e.levelList.length;o++)e.levelList[o].disabled=e.levelList[o].level!==a.level;e.form=a;case 12:e.loading=!1,e.disabled=!1;case 14:case"end":return t.stop()}}),t)})))()},methods:{routerBack:function(){this.$router.back()},submit:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$refs["form"].validate();case 3:if(e.loading=!0,n=e.$route.query.id,n){t.next=10;break}return t.next=8,Object(l["c"])(e.form);case 8:t.next=12;break;case 10:return t.next=12,Object(l["w"])(n,e.form);case 12:e.loading=!1,e.routerBack(),t.next=19;break;case 16:t.prev=16,t.t0=t["catch"](0),e.loading=!1;case 19:case"end":return t.stop()}}),t,null,[[0,16]])})))()},selectionLevel:function(e,t){t.disabled||(this.form.level=e+1,this.form.is_auto=0!==e?1:0)}},render:function(){var e=this,t=arguments[0],n=this;return t("div",{class:"le-main"},[t("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[t("el-breadcrumb-item",[t("a",{on:{click:this.routerBack}},["分销等级"])]),t("el-breadcrumb-item",[n.$route.query.id?"编辑":"添加","分销商等级"])]),t("el-form",i()([{attrs:{"label-width":"193px"},directives:[{name:"loading",value:n.loading}],ref:"form"},{props:{model:n.form,rules:n.rules}}]),[t("div",{class:"le-card le-card-margin"},[t("div",{class:"le-card-head flex align-center"},[t("span",{class:"le-card-line"}),t("span",["等级信息"])]),t("div",{class:"le-card-body"},[t("el-form-item",{attrs:{label:"选择等级",prop:"level"}},[t("div",{class:"flex flex-wrap le-level--box"},[n.levelList.map((function(e,r){var a=n.form.level;return t("div",{on:{click:n.selectionLevel.bind(n,r,e)},class:[{active:r+1===a,"le-level--disabled":e.disabled},"le-level--selection"],key:r},[e.name])}))])]),t("el-form-item",{attrs:{label:"等级名称",prop:"name"}},[t("el-input",{class:"le-small--input",attrs:{placeholder:"请输入等级名称",maxlength:"8","show-word-limit":!0},model:{value:n.form.name,callback:function(t){e.$set(n.form,"name",t)}}})])])]),t("div",{class:"le-card le-card-margin"},[t("div",{class:"le-card-head flex align-center"},[t("span",{class:"le-card-line"}),t("span",["等级佣金"])]),t("div",{class:"le-card-body"},[t("el-form-item",{attrs:{label:"一级分销佣金",prop:"first"}},[t("el-input",i()([{class:"le-small--input"},{nativeOn:{input:function(e){e.target.value=e.target.value.replace(/[^\d.]/g,""),e.target.value=e.target.value.replace(/\.{2,}/g,"."),e.target.value=e.target.value.replace(/^\./g,"0."),e.target.value=e.target.value.replace(/^0[^\.]+/g,"0"),e.target.value=e.target.value.replace(".","$#$").replace(/\./g,"").replace("$#$","."),e.target.value=e.target.value.replace(/^(\d+)\.(\d\d).*$/,"$1.$2"),n.form.first=e.target.value}}},{model:{value:n.form.first,callback:function(t){e.$set(n.form,"first",t)}}}]),[t("template",{slot:"append"},["%"])])]),t("el-form-item",{attrs:{label:"二级分销佣金",prop:"second"}},[t("el-input",i()([{class:"le-small--input"},{nativeOn:{input:function(e){e.target.value=e.target.value.replace(/[^\d.]/g,""),e.target.value=e.target.value.replace(/\.{2,}/g,"."),e.target.value=e.target.value.replace(/^\./g,"0."),e.target.value=e.target.value.replace(/^0[^\.]+/g,"0"),e.target.value=e.target.value.replace(".","$#$").replace(/\./g,"").replace("$#$","."),e.target.value=e.target.value.replace(/^(\d+)\.(\d\d).*$/,"$1.$2"),n.form.second=e.target.value}}},{model:{value:n.form.second,callback:function(t){e.$set(n.form,"second",t)}}}]),[t("template",{slot:"append"},["%"])])]),t("el-form-item",{attrs:{label:"三级分销佣金",prop:"third"}},[t("el-input",i()([{class:"le-small--input"},{nativeOn:{input:function(e){e.target.value=e.target.value.replace(/[^\d.]/g,""),e.target.value=e.target.value.replace(/\.{2,}/g,"."),e.target.value=e.target.value.replace(/^\./g,"0."),e.target.value=e.target.value.replace(/^0[^\.]+/g,"0"),e.target.value=e.target.value.replace(".","$#$").replace(/\./g,"").replace("$#$","."),e.target.value=e.target.value.replace(/^(\d+)\.(\d\d).*$/,"$1.$2"),n.form.third=e.target.value}}},{model:{value:n.form.third,callback:function(t){e.$set(n.form,"third",t)}}}]),[t("template",{slot:"append"},["%"])])])])]),t("div",{class:"le-card le-card-margin"},[t("div",{class:"le-card-head flex align-center"},[t("span",{class:"le-card-line"}),t("span",["等级升级"])]),t("div",{class:"le-card-body"},[t("el-form-item",{attrs:{label:"自动升级"}},[t("el-radio-group",{attrs:{disabled:1===n.form.level},model:{value:n.form.is_auto,callback:function(t){e.$set(n.form,"is_auto",t)}}},[t("el-radio",{attrs:{label:1}},["允许自动升级"]),t("el-radio",{attrs:{label:0}},["禁止自动升级"])]),t("div",{class:"le-prompt-text"},["选择允许自动升级后，将在用户的等级中心显示等级的升级条件和佣金比例"])]),function(){if(1!==n.form.level&&1===n.form.is_auto)return t("el-form-item",{attrs:{label:"升级条件",prop:"update_type"}},[t("el-radio-group",{model:{value:n.form.update_type,callback:function(t){e.$set(n.form,"update_type",t)}}},[t("el-radio",{attrs:{label:1}},["满足以下任意条件"]),t("el-radio",{attrs:{label:2}},["满足以下全部条件"])]),t("div",[t("div",{class:"flex",style:"margin-top: 15px"},[t("el-checkbox",{class:"le-condition--item",model:{value:n.form.condition.total_bonus.checked,callback:function(t){e.$set(n.form.condition.total_bonus,"checked",t)}}},[t("div",{class:"flex align-center"},[t("span",{class:"le-label"},["累计佣金"])])]),t("div",[t("el-input",{class:"le-input--200",attrs:{disabled:!n.form.condition.total_bonus.checked},model:{value:n.form.condition.total_bonus.num,callback:function(t){e.$set(n.form.condition.total_bonus,"num",t)}}},[t("template",{slot:"append"},["元"])])])]),t("div",{class:"flex",style:"margin-top: 15px"},[t("el-checkbox",{class:"le-condition--item",model:{value:n.form.condition.all_children.checked,callback:function(t){e.$set(n.form.condition.all_children,"checked",t)}}},[t("div",{class:"flex align-center"},[t("span",{class:"le-label"},["当前下线数"])])]),t("div",[t("el-input",{class:"le-input--200",attrs:{disabled:!n.form.condition.all_children.checked},model:{value:n.form.condition.all_children.num,callback:function(t){e.$set(n.form.condition.all_children,"num",t)}}},[t("template",{slot:"append"},["人"])])])]),t("div",{class:"flex",style:"margin-top: 15px"},[t("el-checkbox",{class:"le-condition--item",model:{value:n.form.condition.total_money.checked,callback:function(t){e.$set(n.form.condition.total_money,"checked",t)}}},[t("div",{class:"flex align-center"},[t("span",{class:"le-label"},["累计销售金额"])])]),t("div",[t("el-input",{class:"le-input--200",attrs:{disabled:!n.form.condition.total_money.checked},model:{value:n.form.condition.total_money.num,callback:function(t){e.$set(n.form.condition.total_money,"num",t)}}},[t("template",{slot:"append"},["元"])])])])])])}()])])]),t("div",{class:"le-cardpin"},[t("el-button",{attrs:{type:"primary",loading:n.loading&&!n.disabled,disabled:n.disabled},on:{click:n.submit}},["保存"])])])}},s=u,d=(n("1ce7"),n("4ac2")),f=Object(d["a"])(s,r,a,!1,null,"64de15c8",null);t["default"]=f.exports},b079:function(e,t,n){}}]);
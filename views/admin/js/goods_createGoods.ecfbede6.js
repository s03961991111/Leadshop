(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["goods_createGoods"],{"151d":function(e,t,a){"use strict";a("bbf6")},3479:function(e,t,a){"use strict";a("e71b")},"3a5b":function(e,t,a){"use strict";a("82ff")},"3ab9":function(e,t,a){},"44cd":function(e,t,a){"use strict";a("eec2")},5007:function(e,t,a){"use strict";a("f7ef")},5986:function(e,t,a){"use strict";a("3ab9")},"5c31":function(e,t,a){},"5fc5":function(e,t,a){"use strict";a("a391")},"61c9":function(e,t,a){},"62ff":function(e,t,a){},"70a1":function(e,t,a){"use strict";a("724d")},"71ff":function(e,t,a){"use strict";a.r(t);var i,s,l,n,o,r,c=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-form",{attrs:{"label-width":"160px",model:e.form,rules:e.rules},nativeOn:{submit:function(e){e.preventDefault()}}},[0===e.step||1===e.step?a("div",{staticClass:"le-arrow"},[a("ul",[a("li",{staticClass:"active",staticStyle:{"z-index":"3",cursor:"pointer"}},[a("div",{staticClass:"center"},[e._v("1.编辑商品信息")])]),a("li",{class:e.step>0?"active":"",style:0===e.form.status?"z-index: 2;cursor:pointer;":"z-index: 2;"},[a("div",{staticClass:"center"},[e._v("2.编辑商品详情")])])])]):e._e(),0===e.step?a("el-tabs",{staticClass:"le-tabs",attrs:{type:"card"},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"基本信息",name:"first"}},[a("addBasic",{model:{value:e.form,callback:function(t){e.form=t},expression:"form"}})],1),a("el-tab-pane",{attrs:{label:"价格库存",name:"second"}},[a("addPrice",{ref:"addPrice",model:{value:e.form,callback:function(t){e.form=t},expression:"form"}})],1),a("el-tab-pane",{attrs:{label:"物流设置",name:"third"}},[a("addLogistic",{model:{value:e.form,callback:function(t){e.form=t},expression:"form"}})],1),a("el-tab-pane",{attrs:{label:"营销设置",name:"fourth"}},[a("addMarketing",{model:{value:e.form,callback:function(t){e.form=t},expression:"form"}})],1),a("el-tab-pane",{attrs:{label:"其他设置",name:"fifth"}},[a("addOther",{model:{value:e.form,callback:function(t){e.form=t},expression:"form"}})],1)],1):e._e(),1===e.step?[a("goodsEditor",{model:{value:e.form.body.content,callback:function(t){e.$set(e.form.body,"content",t)},expression:"form.body.content"}})]:e._e(),2===e.step?[a("goodsPreview",{attrs:{form:e.form}})]:e._e(),a("div",{staticClass:"le-cardpin"},[0===e.step?[a("el-button",{on:{click:e.save}},[e._v("保存")]),a("el-button",{attrs:{type:"primary"},on:{click:e.nextStep}},[e._v("下一步")])]:1===e.step?[a("el-button",{on:{click:function(t){e.step=2}}},[e._v("预览")]),a("el-button",{on:{click:function(t){e.step=0}}},[e._v("上一步")]),a("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存商品")])]:2===e.step?[a("el-button",{on:{click:function(t){e.step=2}}},[e._v("继续编辑")])]:e._e()],2)],2)},u=[],d=(a("2769"),a("0756"),a("f5bd"),function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("el-form-item",{staticClass:"le-basic__name"},[i("span",{staticClass:"le-label__require",attrs:{slot:"label"},slot:"label"},[e._v("商品名称")]),i("el-input",{attrs:{type:"textarea",placeholder:"请输入商品名称",rows:"3",maxlength:"40","show-word-limit":""},model:{value:e.value.name,callback:function(t){e.$set(e.value,"name",t)},expression:"value.name"}})],1),i("el-form-item",{attrs:{label:"商品副标题"}},[i("el-input",{attrs:{type:"textarea",placeholder:"请输入商品副标题",rows:"5",maxlength:60,"show-word-limit":"",resize:"none"},model:{value:e.value.body.goods_introduce,callback:function(t){e.$set(e.value.body,"goods_introduce",t)},expression:"value.body.goods_introduce"}}),i("el-popover",{attrs:{placement:"right",trigger:"hover"}},[i("img",{attrs:{src:a("d519"),width:"225",height:"400",alt:""}}),i("el-button",{staticClass:"le-introduce--btn",attrs:{slot:"reference",type:"text"},slot:"reference"},[e._v("查看示例")])],1)],1),i("el-form-item",{staticClass:"he-class"},[i("span",{staticClass:"le-label__require",attrs:{slot:"label"},slot:"label"},[e._v("商品分类")]),e._l(e.catObject.result,(function(t,a){return[t.children?e._e():i("el-tag",{key:a,staticClass:"le-cat__footer-tag",attrs:{type:"info",size:"medium",closable:""},on:{close:function(i){return e.deleteTag(t,a)}}},[e._v(" "+e._s(t.value)+" ")])]})),i("el-button",{directives:[{name:"popup",rawName:"v-popup.chooseCategory",value:e.catObject,expression:"catObject",modifiers:{chooseCategory:!0}}],attrs:{plain:"",action:"getGroup",title:"选择分类",width:"801",module:"goods"}},[e._v("选择分类 ")]),i("he-link",{attrs:{href:"goods/groupPublish",target:"_blank"}},[i("el-button",{staticClass:"he-class__button-new",attrs:{type:"text"}},[e._v(" 新建分类 ")])],1),i("span",{staticStyle:{color:"#623ceb"}},[e._v("|")]),i("el-button",{staticClass:"he-class__button-new",attrs:{type:"text"},on:{click:e.getGroupList}},[e._v(" 刷新 ")])],2),i("el-form-item",{attrs:{label:"商品参数"}},[e.$_.isEmpty(e.value.body.goods_args)?e._e():i("el-scrollbar",{ref:"myScrollbar",staticClass:"le-parameter"},e._l(e.value.body.goods_args,(function(t,a){return i("div",{key:a,staticClass:"le-parameter--item"},[i("el-form-item",{attrs:{label:"参数名","label-width":"82px"}},[i("el-input",{staticClass:"le-input--240",attrs:{maxlength:"8","show-word-limit":"",placeholder:"请输入参数名"},model:{value:t.name,callback:function(a){e.$set(t,"name",a)},expression:"item.name"}}),i("div",{staticClass:"le-prompt-text"},[e._v("示例：语言种类")])],1),i("el-form-item",{attrs:{label:"参数值","label-width":"82px"}},[i("el-input",{staticClass:"le-input--600",attrs:{resize:"none",rows:"5",type:"textarea",placeholder:"请输入参数名"},model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"item.value"}}),i("div",{staticClass:"le-prompt-text"},[e._v("建议参数值之间用“；”隔开，示例：汉语；英语；法语；德语")])],1),i("div",{staticClass:"le-deletion le-icon le-icon-cha2",on:{click:function(t){return e.deletionParameter(a)}}})],1)})),0),i("div",[i("el-button",{attrs:{plain:""},on:{click:e.pushParameter}},[e._v("添加参数")]),i("el-button",{directives:[{name:"popup",rawName:"v-popup.chooseParameterTemplate",value:e.args,expression:"args",modifiers:{chooseParameterTemplate:!0}}],attrs:{plain:"",width:"704",action:"getArgs",title:"选择参数模板",module:"goods"}},[e._v("选择参数模板")]),i("he-link",{attrs:{href:"goods/parameterTemplateEdit",target:"_blank"}},[i("el-button",{staticClass:"he-class__button-new",attrs:{type:"text"}},[e._v(" 新建模板 ")])],1)],1)],1),i("el-form-item",{staticClass:"le-banner"},[i("span",{staticClass:"le-label__require",attrs:{slot:"label"},slot:"label"},[e._v("商品轮播图")]),i("vuedraggable",{model:{value:e.value.slideshow,callback:function(t){e.$set(e.value,"slideshow",t)},expression:"value.slideshow"}},e._l(e.value.slideshow,(function(t,a){return i("div",{key:a,staticClass:"le-label__require-item",class:{"le-label__require-image":0===a}},[i("div",{staticClass:"select-cover__120"},[i("pictureDialog",{attrs:{limit:1},scopedSlots:e._u([{key:"preview",fn:function(t){return i("div",{staticClass:"select-cover__120-edit"},[i("el-image",{attrs:{src:t.url,fit:"cover"}}),i("div",{staticClass:"select-cover__120-tips"},[i("span",[e._v("替换")]),e._v(" | "),i("span",{on:{click:function(t){return t.stopPropagation(),function(){e.value.slideshow.splice(a,1)}.apply(null,arguments)}}},[e._v("删除")])])],1)}}],null,!0),model:{value:e.value.slideshow[a],callback:function(t){e.$set(e.value.slideshow,a,t)},expression:"value.slideshow[index]"}},[i("div",{staticClass:"select-cover__120-add",attrs:{slot:"upload"},slot:"upload"},[i("i",{staticClass:"le-icon le-icon-add select-cover__120-icon"}),i("span",{staticClass:"select-cover__120-text"},[e._v("添加图片")])])])],1)])})),0),e.value.slideshow.length<9?i("div",{staticClass:"le-label__require-item"},[i("div",{staticClass:"select-cover__120"},[i("pictureDialog",{attrs:{limit:9-e.value.slideshow.length,max:9},on:{confirm:e.arrayConcat},scopedSlots:e._u([{key:"preview",fn:function(t){return i("div",{staticClass:"select-cover__120-add"},[i("i",{staticClass:"le-icon le-icon-add select-cover__120-icon"}),i("span",{staticClass:"select-cover__120-text"},[e._v("添加图片")])])}}],null,!1,2764396145)},[i("div",{staticClass:"select-cover__120-add",attrs:{slot:"upload"},slot:"upload"},[i("i",{staticClass:"le-icon le-icon-add select-cover__120-icon"}),i("span",{staticClass:"select-cover__120-text"},[e._v("添加图片")])])])],1)]):e._e(),i("p",{staticClass:"he-tips",staticStyle:{"padding-left":"0",clear:"both"}},[e._v(" 建议尺寸：800*800,可拖拽改变图片顺序，首张图为主图，最多上传9张 ")])],1),i("el-form-item",{attrs:{label:"是否添加视频"}},[i("el-switch",{attrs:{"active-value":1,"inactive-value":0},model:{value:e.value.is_video,callback:function(t){e.$set(e.value,"is_video",t)},expression:"value.is_video"}})],1),e.value.is_video?i("el-form-item",{attrs:{label:"视频来源"}},[i("el-radio-group",{model:{value:e.value.videoType,callback:function(t){e.$set(e.value,"videoType",t)},expression:"value.videoType"}},[i("el-radio",{attrs:{label:1}},[e._v("素材库")]),i("el-radio",{attrs:{label:2}},[e._v("网络")])],1)],1):e._e(),e.value.is_video&&2===e.value.videoType?i("el-form-item",[i("span",{staticClass:"le-label__require",attrs:{slot:"label"},slot:"label"},[e._v("主视频地址")]),i("el-input",{staticClass:"le-video__input",attrs:{placeholder:"复制视频地址到这里"},model:{value:e.value.video.url,callback:function(t){e.$set(e.value.video,"url",t)},expression:"value.video.url"}}),i("p",{staticClass:"he-tips",staticStyle:{"padding-left":"0"}},[e._v("支持视频源地址和腾讯视频平台的网络视频")])],1):e._e(),e.value.is_video&&1===e.value.videoType?i("el-form-item",[i("span",{staticClass:"le-label__require",attrs:{slot:"label"},slot:"label"},[e._v("主视频")]),i("div",{staticClass:"select-cover__120"},[i("videoDialog",{scopedSlots:e._u([{key:"preview",fn:function(t){return i("div",{staticClass:"select-cover__120-edit"},[i("el-image",{attrs:{src:t.url.cover,fit:"cover"}}),i("div",{staticClass:"select-cover__120-tips"},[e._v("替换视频")])],1)}}],null,!1,3079278514),model:{value:e.value.video,callback:function(t){e.$set(e.value,"video",t)},expression:"value.video"}},[i("div",{staticClass:"select-cover__120-add",attrs:{slot:"upload"},slot:"upload"},[i("i",{staticClass:"le-icon le-icon-add select-cover__120-icon"}),i("span",{staticClass:"select-cover__120-text"},[e._v("添加视频")])])])],1),i("p",{staticClass:"he-tips",staticStyle:{"padding-left":"0"}},[e._v("建议时长：10~30秒，宽高比 16:9")])]):e._e(),e.value.is_video?i("el-form-item",[i("span",{attrs:{slot:"label"},slot:"label"},[e._v("视频封面")]),i("div",{staticClass:"select-cover__120"},[i("pictureDialog",{attrs:{limit:1},scopedSlots:e._u([{key:"preview",fn:function(t){return i("div",{staticClass:"select-cover__120-edit"},[i("el-image",{attrs:{src:t.url,fit:"cover"}}),i("div",{staticClass:"select-cover__120-tips"},[i("span",[e._v("替换")]),e._v(" | "),i("span",{on:{click:function(t){return t.stopPropagation(),function(t){return e.value.video_cover=""}.apply(null,arguments)}}},[e._v("删除")])])],1)}}],null,!1,2213342761),model:{value:e.value.video_cover,callback:function(t){e.$set(e.value,"video_cover",t)},expression:"value.video_cover"}},[i("div",{staticClass:"select-cover__120-add",attrs:{slot:"upload"},slot:"upload"},[i("i",{staticClass:"le-icon le-icon-add select-cover__120-icon"}),i("span",{staticClass:"select-cover__120-text"},[e._v("添加图片")])])])],1)]):e._e()],1)}),p=[],v=a("99a5"),h=(a("6a61"),a("b1fa"),a("23db"),a("eb62"),a("8639"),a("e1d4"),a("6afd"),a("a5c9"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{ref:"picture",staticClass:"video-select",style:{padding:e.padding}},[a("popup",{on:{confirm:e.handleConfirm}},[a("he-icon",{staticClass:"le-icon",attrs:{color:"RGBA(217, 217, 217, 1)",size:"18px",type:"le-icon-add"}}),"16px"!==e.padding?a("p",{attrs:{type:"text"}},[e._v(" 添加"+e._s(e.title)+" ")]):e._e(),e._v(" "+e._s(e.video)+" "),e.video.url?a("div",{staticClass:"picture-selet-content"},[a("div",{staticClass:"picture-selet-image",style:{"padding-top":e.top}},[a("div",{staticClass:"picture-selet-cover",style:{"background-image":"url("+e.video.cover+")"}})]),a("div",{staticClass:"picture-selet-tips flex justify-center"},[a("div",[e._v(" 替换 ")]),a("div",{staticClass:"he-upload__line"},[e._v(" | ")]),a("div",{on:{click:function(t){return t.stopPropagation(),e.onDel.apply(null,arguments)}}},[e._v(" 删除 ")])])]):e._e()],1)],1)}),f=[],m=a("4c02"),_=a.n(m),g=a("1c03"),b=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"picture-selet__detail"},[a("el-card",[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[e._v("分组名称")])]),a("div",{staticClass:"picture-selet__detail-group"},[a("el-scrollbar",{style:{height:"478px"}},[a("ul",e._l(e.classify,(function(t,i){return a("li",[a("label",{staticClass:"picture-selet__detail-radio"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.uploader.selectClassify,expression:"uploader.selectClassify"}],staticClass:"picture-selet__detail-input",attrs:{type:"radio"},domProps:{value:t.id,checked:e._q(e.uploader.selectClassify,t.id)},on:{change:function(a){return e.$set(e.uploader,"selectClassify",t.id)}}}),a("img",{attrs:{src:"http://manongyun.oss-cn-hangzhou.aliyuncs.com/Qmpaas/le-icon-folder.png"}}),a("span",[e._v(e._s(t.name))])])])})),0)])],1)]),a("div",{staticClass:"picture-selet__layout"},[a("div",{staticClass:"picture-selet__header"},[a("span",[e._v(e._s(e.classifyInfo.name||"未分组"))]),a("div",{staticClass:"picture-selet__action"},[a("Upload",{attrs:{action:e.uploadFile,onSuccess:e.handleSizeChange,autoUpload:""}},[a("el-button",{attrs:{type:"primary"}},[e._v("上传视频")])],1)],1)]),a("div",{staticClass:"picture-selet__content"},[a("ul",e._l(e.pictures,(function(t,i){return a("li",[0===t.type?a("div",{staticClass:"picture-selet__content-label",on:{click:function(a){return a.stopPropagation(),e.handleChange(t)}}},[a("div",{staticClass:"picture-selet__content-item"},[a("div",{staticClass:"picture-selet__content-item-photo"},[a("div",{staticClass:"picture-selet__content-item-image"},[a("div",{staticClass:"picture-selet__content-item-cover",style:{"background-image":"url(http://manongyun.oss-cn-hangzhou.aliyuncs.com/Qmpaas/le-icon-folder.png)"}})])]),a("p",[e._v(" "+e._s(t.title_name)+" ")])])]):e._e(),2===t.type?a("label",{staticClass:"picture-selet__content-label"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.uploader.selectPicture,expression:"uploader.selectPicture"}],staticClass:"picture-selet__content-input",attrs:{type:"radio"},domProps:{value:t,checked:e._q(e.uploader.selectPicture,t)},on:{change:function(a){return e.$set(e.uploader,"selectPicture",t)}}}),a("div",{staticClass:"picture-selet__content-item"},[e._m(0,!0),a("div",{staticClass:"picture-selet__content-item-photo"},[e._m(1,!0),a("div",{staticClass:"picture-selet__content-item-image"},[a("div",{staticClass:"picture-selet__content-item-cover",style:{"background-image":"url("+t.cover+")"}})])]),a("p",[e._v(" 视频"+e._s(t.title_name)+" ")])])]):e._e()])})),0),a("div",{staticClass:"picture-selet__paging"},[a("el-pagination",{attrs:{layout:"prev, pager, next,jumper","page-size":e.pageInfo.size,"current-page":e.pageInfo.current,total:e.pageInfo.total},on:{"current-change":e.handleSizeChange}})],1)])])],1)},y=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"picture-selet__content-close"},[a("i",{staticClass:"le-icon le-icon-tick"})])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"picture-selet__content-item-icon"},[a("i",{staticClass:"le-icon le-icon-shipin"})])}],C=(a("2e6f"),a("af21"),a("5ee2"),a("aa00"),a("2070"),{inject:["uploader"],props:{type:String,action:{type:Function,default:function(){}},name:{type:String,default:"file"},multiple:Boolean,accept:String,onProgress:Function,onSuccess:Function,onError:Function,beforeUpload:Function,onPreview:{type:Function,default:function(){}},onRemove:{type:Function,default:function(){}},fileList:Array,autoUpload:Boolean,listType:String,disabled:Boolean,limit:Number,onExceed:Function},data:function(){return{mouseover:!1,reqs:{}}},methods:{isImage:function(e){return-1!==e.indexOf("image")},handleChange:function(e){var t=e.target.files;t&&this.uploadFiles(t)},uploadFiles:function(e){var t=this;if(this.limit&&this.fileList.length+e.length>this.limit)this.onExceed&&this.onExceed(e,this.fileList);else{var a=Array.prototype.slice.call(e);this.multiple||(a=a.slice(0,1)),0!==a.length&&a.forEach((function(e){t.autoUpload&&t.upload(e)}))}},upload:function(e){var t=this;if(this.$refs.input.value=null,!this.beforeUpload)return this.post(e);var a=this.beforeUpload(e);a&&a.then?a.then((function(a){var i=Object.prototype.toString.call(a);if("[object File]"===i||"[object Blob]"===i){for(var s in"[object Blob]"===i&&(a=new File([a],e.name,{type:e.type})),e)e.hasOwnProperty(s)&&(a[s]=e[s]);t.post(a)}else t.post(e)}),(function(){t.onRemove(null,e)})):!1!==a?this.post(e):this.onRemove(null,e)},abort:function(e){var t=this.reqs;if(e){var a=e;e.uid&&(a=e.uid),t[a]&&t[a].abort()}else Object.keys(t).forEach((function(e){t[e]&&t[e].abort(),delete t[e]}))},handleClick:function(){this.disabled||(this.$refs.input.value=null,this.$refs.input.click())},handleKeydown:function(e){e.target===e.currentTarget&&(13!==e.keyCode&&32!==e.keyCode||this.handleClick())},post:function(e){var t=this,a=e.uid,i=this.action(e,this.uploader.groupID);this.reqs[a]=i,i&&i.then&&i.then((function(i){t.onSuccess(i,e),delete t.reqs[a]})).catch((function(i){console.error("error错误",i),t.onError(i,e),delete t.reqs[a]}))}},render:function(e){var t=this.handleClick,a=(this.drag,this.name),i=this.handleChange,s=this.multiple,l=this.accept,n=this.listType,o=(this.uploadFiles,this.disabled,this.handleKeydown),r={class:{"el-upload":!0},on:{click:t,keydown:o}};return r.class["el-upload--".concat(n)]=!0,e("div",_()([{},r,{attrs:{tabindex:"0"}}]),[this.$slots.default,e("input",{class:"el-upload__input",attrs:{type:"file",name:a,multiple:s,accept:l},ref:"input",on:{change:i}})])}}),k=C,w=a("4ac2"),x=Object(w["a"])(k,i,s,!1,null,null,null),$=x.exports,j=a("7736"),P=Object(j["a"])("video"),O=P.mapState,S=P.mapActions,D=P.mapMutations,T={components:{Upload:$},inject:["uploader"],data:function(){return{keyword:"",pageSize:5,pageTotal:0,pageCurrent:1}},computed:Object(g["a"])({},O(["classify","pictures","pageInfo","classifyInfo"])),mounted:function(){var e=this;return Object(v["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:""==e.uploader.selectClassify&&(e.uploader.selectClassify=e.classify[0].id);case 1:case"end":return t.stop()}}),t)})))()},methods:Object(g["a"])(Object(g["a"])(Object(g["a"])({},D(["setClassifyInfo"])),S(["handlePictures"])),{},{handleSuccess:function(){},handleSizeChange:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;""==this.uploader.selectClassify&&(this.uploader.selectClassify=this.classify[0].id),this.handlePictures({id:this.uploader.selectClassify,current:e})},handleChange:function(e){var t=this;this.handlePictures({id:e.id,current:1}).then((function(a){t.uploader.selectClassify=e.id,t.setClassifyInfo({id:e.id,name:e.title_name})}))},getVideoImage:function(e,t){if(e&&0==e.type.indexOf("video/")){var a=document.createElement("video");a.src=URL.createObjectURL(e),a.addEventListener("loadeddata",(function(){this.currentTime=1})),a.addEventListener("seeked",(function(){this.width=this.videoWidth,this.height=this.videoHeight;var a=document.createElement("canvas"),i=a.getContext("2d");a.width=this.width,a.height=this.height,i.drawImage(this,0,0,a.width,a.height);var s={url:a.toDataURL("image/jpeg",1),width:this.width,height:this.height,currentTime:this.currentTime,duration:this.duration};a.toBlob((function(a){s.blob=a,"function"==typeof t&&t.call(e,s)}),"image/jpeg")}))}},uploadFile:function(e){var t=this;return new Promise((function(a,i){var s=new FormData;t.getVideoImage(e,(function(l){s.append("content",e),s.append("cover",l.url),s.append("type",2),s.append("group_id",t.uploader.selectClassify),t.$heshop.video(s).then((function(e){a(e)})).catch((function(e){i(e)}))}))}))}})},L=T,A=(a("151d"),Object(w["a"])(L,b,y,!1,null,"3dcd469a",null)),E=A.exports,z=Object(j["a"])("video"),N=z.mapState,I=z.mapMutations,q=z.mapActions,F={components:{Detail:E},provide:function(){return{uploader:this}},props:{visible:{type:Boolean,default:!1},limit:{type:Number,default:1}},data:function(){return{selectClassify:"",selectPicture:{},dialogVisible:!1}},computed:Object(g["a"])({},N(["classify","pictures","classifyInfo"])),created:function(){},watch:{selectClassify:function(e){var t=this.classify;for(var a in t){var i=t[a];i.id==e&&this.setClassifyInfo(i)}this.handlePictures({id:e,current:1})}},mounted:function(){var e=this;return Object(v["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.handleClassify();case 1:case"end":return t.stop()}}),t)})))()},methods:Object(g["a"])(Object(g["a"])(Object(g["a"])({},I(["setClassifyInfo"])),q(["handleClassify","handlePictures"])),{},{handleClick:function(){this.dialogVisible=!0},handleClose:function(){this.dialogVisible=!1},handleConfirm:function(){this.dialogVisible=!1,this.$emit("confirm",this.selectPicture)}}),render:function(e){var t=this.dialogVisible,a=this.handleClick,i=this.handleClose,s=this.handleConfirm,l=this.$slots.trigger||this.$slots.default,n={on:{click:a}},o={props:{visible:t,title:"选视频","before-close":i,width:"1077px","destroy-on-close":!0}};return e("div",{class:"goods-dialog"},[e("div",_()([{},n]),[l]),e("el-dialog",_()([{},o]),[e(E),e("template",{slot:"footer"},[e("el-button",{on:{click:i}},["取 消"]),e("el-button",{attrs:{type:"primary"},on:{click:s}},["确 定"])])])])}},R=F,V=(a("bf03"),Object(w["a"])(R,l,n,!1,null,"edfe7f16",null)),B=V.exports,M={components:{popup:B},props:{value:{type:[String,Number,Boolean,Object,Array],default:""},title:{type:[String,Number,Boolean],default:"视频"}},data:function(){return{padding:"28px",top:"100%"}},computed:{video:{get:function(){return this.value},set:function(e){this.$emit("input",e)}}},created:function(){},watch:{},mounted:function(){var e=this;return Object(v["a"])(regeneratorRuntime.mark((function t(){var a,i,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:a=e.$refs.picture.offsetHeight,i=e.$refs.picture.offsetWidth,s=i,a>i?(s=a,e.top=i/a*100+"%"):e.top=a/i*100+"%",e.padding=s>100?"28px":s>60?"10px 0 0 0":"16px";case 5:case"end":return t.stop()}}),t)})))()},methods:{handleConfirm:function(e){this.video=e},onDel:function(){this.video={}}}},U=M,H=(a("8527"),Object(w["a"])(U,h,f,!1,null,"65f59088",null)),J=H.exports,G=a("3335"),X=a.n(G),K={name:"addBasic",components:{heUploadVideo:J,vuedraggable:X.a},props:{value:{type:Object}},data:function(){return{catObject:{cat:[],result:[]},catTree:[],args:{result:[]}}},computed:{},mounted:function(){var e=this;this.getGroupList().then((function(t){e.catTree=t}))},methods:{arrayConcat:function(e){for(var t in e)"[object String]"===Object.prototype.toString.call(e[t])&&this.value.slideshow.push(e[t])},deleteTag:function(e,t){var a=this;this.catObject.result.splice(t,1);var i=e.path.split("-").map(Number),s=i.length;if(3===s){var l=!1,n=!1;this.catObject.result.forEach((function(e,t){e.id===i[1]&&(n||(n=!0,a.catObject.result.splice(t,1)),a.catObject.result.forEach((function(e,t){e.id===i[2]&&(l||(l=!0,a.catObject.result.splice(t,1)))})))}))}else if(2===s){var o=!1;this.catObject.result.forEach((function(e,t){e.id===i[1]&&(o||(o=!0,a.catObject.result.splice(t,1)))}))}this.value.group=this.catObject.result.map((function(e){return e.id}))},getGroup:function(e){this.value.group=e.result.map((function(e){return e.id}))},getArgs:function(e){var t=this;console.log(e);for(var a=0;a<e.result.length;a++)for(var i=0;i<e.result[a].content.length;i++)this.value.body.goods_args.push(e.result[a].content[i]);this.$nextTick().then((function(){t.$refs.myScrollbar.wrap.scrollTop=t.$refs["myScrollbar"].wrap.scrollHeight}))},getGroupList:function(){var e=this;return Object(v["a"])(regeneratorRuntime.mark((function t(){var a,i,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$heshop.group("get",{include:"goods"});case 2:return a=t.sent,e.catObject.cat=a,i=JSON.parse(JSON.stringify(a)),s=e.$heshop.toTree({parentKey:"parent_id",idKey:"id",parentId:0,childrenKey:"children"}).on(i).get(),s.forEach((function(e){e.value=e.name,e.children&&e.children.forEach((function(t){t.value="".concat(e.value," > ").concat(t.name),t.children&&t.children.forEach((function(e){e.value="".concat(t.value," > ").concat(e.name)}))}))})),t.abrupt("return",s);case 8:case"end":return t.stop()}}),t)})))()},pushParameter:function(){var e=this;this.value.body.goods_args.push({name:"",value:""}),this.$nextTick().then((function(){e.$refs.myScrollbar.wrap.scrollTop=e.$refs["myScrollbar"].wrap.scrollHeight}))},deletionParameter:function(e){console.log(e),this.$delete(this.value.body.goods_args,e)}},watch:{"value.slideshow":{handler:function(e,t){var a=this;"undefined"!=typeof this.$refs.form&&e!=t&&setTimeout((function(){a.$refs.form.validateField("slideshow")}),10)},immediate:!0},"value.video":{handler:function(e,t){"undefined"!=typeof this.$refs.form&&e!=t&&this.$refs.form.validateField("video")},immediate:!0},value:{handler:function(e){var t=this,a=e.group,i=[];a.forEach((function(e){t.catTree.forEach((function(t){t.id==e&&i.push(t),t.children&&t.children.forEach((function(t){t.id==e&&i.push(t),t.children&&t.children.forEach((function(t){t.id==e&&i.push(t)}))}))}))})),this.catObject.result=i},deep:!0}}},Y=K,W=(a("789d"),Object(w["a"])(Y,d,p,!1,null,null,null)),Q=W.exports,Z=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-form-item",[a("span",{staticClass:"le-label__require",attrs:{slot:"label"},slot:"label"},[e._v("规格选择")]),a("el-radio-group",{on:{change:e.paramTypeChange},model:{value:e.value.param_type,callback:function(t){e.$set(e.value,"param_type",t)},expression:"value.param_type"}},[a("el-radio",{attrs:{label:1}},[e._v("单规格")]),a("el-radio",{attrs:{label:2}},[e._v("多规格")])],1)],1),1===e.value.param_type?a("el-form-item",[a("span",{staticClass:"le-label__require",attrs:{slot:"label"},slot:"label"},[e._v("规格值")]),a("el-input",{on:{input:e.paramValueChange},model:{value:e.value.param.param_data[0].value[0].value,callback:function(t){e.$set(e.value.param.param_data[0].value[0],"value",t)},expression:"value.param.param_data[0].value[0].value"}})],1):e._e(),2===e.value.param_type?a("specification",{ref:"specification",on:{change:e.handleChange},model:{value:e.value.param,callback:function(t){e.$set(e.value,"param",t)},expression:"value.param"}}):e._e(),1===e.value.param_type?a("el-form-item",[a("span",{staticClass:"le-label__require",attrs:{slot:"label"},slot:"label"},[e._v("商品价格")]),a("el-input",{attrs:{maxlength:8},model:{value:e.value.price,callback:function(t){e.$set(e.value,"price",t)},expression:"value.price"}},[a("template",{slot:"append"},[e._v("元")])],2)],1):e._e(),a("el-form-item",{attrs:{label:"划线价"}},[a("el-input",{attrs:{maxlength:8},model:{value:e.value.line_price,callback:function(t){e.$set(e.value,"line_price",t)},expression:"value.line_price"}},[a("template",{slot:"append"},[e._v("元")])],2),a("p",{staticClass:"he-tips",staticStyle:{"padding-left":"0",margin:"0"}},[e._v("当商品无任何优惠时，显示划线价")])],1),1===e.value.param_type&&e.value.param.goods_data.length>0?a("el-form-item",{attrs:{label:"成本价",maxlength:10}},[a("el-input",{model:{value:e.value.param.goods_data[0].cost_price,callback:function(t){e.$set(e.value.param.goods_data[0],"cost_price",t)},expression:"value.param.goods_data[0].cost_price"}},[a("template",{slot:"append"},[e._v("元")])],2)],1):e._e(),a("el-form-item",[a("span",{staticClass:"le-label__require",attrs:{slot:"label"},slot:"label"},[e._v("库存")]),a("el-input",{attrs:{disabled:2===e.value.param_type},model:{value:e.value.stocks,callback:function(t){e.$set(e.value,"stocks",t)},expression:"value.stocks"}})],1),1===e.value.param_type&&e.value.param.goods_data.length>0?a("el-form-item",{attrs:{label:"重量"}},[a("el-input",{model:{value:e.value.param.goods_data[0].weight,callback:function(t){e.$set(e.value.param.goods_data[0],"weight",t)},expression:"value.param.goods_data[0].weight"}},[a("template",{slot:"append"},[e._v("KG")])],2)],1):e._e(),1===e.value.param_type&&e.value.param.goods_data.length>0?a("el-form-item",{attrs:{label:"货号"}},[a("el-input",{model:{value:e.value.param.goods_data[0].goods_sn,callback:function(t){e.$set(e.value.param.goods_data[0],"goods_sn",t)},expression:"value.param.goods_data[0].goods_sn"}})],1):e._e(),a("el-form-item",[a("span",{staticClass:"le-label__require",attrs:{slot:"label"},slot:"label"},[e._v("单位")]),a("el-input",{on:{input:function(t){e.value.unit=e.unitCheck(e.value.unit)}},model:{value:e.value.unit,callback:function(t){e.$set(e.value,"unit",t)},expression:"value.unit"}})],1),a("el-form-item",{attrs:{label:"虚拟已售"}},[a("el-input",{model:{value:e.value.virtual_sales,callback:function(t){e.$set(e.value,"virtual_sales",t)},expression:"value.virtual_sales"}})],1)],1)},ee=[],te=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"specification"},[a("el-form-item",{attrs:{label:"商品规格",required:""}},[e._l(e.selectData,(function(t,i){return a("div",{key:i+"_"+Date.parse(new Date),staticClass:"specification-attr"},[a("Item",{ref:"selectItem",refInFor:!0,attrs:{is_cover:!e.is_delete(i),size:e.is_size(i),is_delete:e.is_delete(i)},on:{delete:function(t){return e.handleDelete(i)}},model:{value:e.selectData[i],callback:function(t){e.$set(e.selectData,i,t)},expression:"selectData[index]"}})],1)})),a("div",{staticClass:"specification-tools__add"},[a("el-button",{directives:[{name:"popup",rawName:"v-popup.selectGroupTemplate",value:{selectData:e.selectData,result:{}},expression:"{\n          selectData: selectData,\n          result: {}\n        }",modifiers:{selectGroupTemplate:!0}}],attrs:{disabled:e.forbidden,module:"goods",title:"选择规格模板",width:"704",action:"getTemp"}},[e._v("使用规格模板")]),a("el-button",{attrs:{disabled:e.forbidden},on:{click:e.handleAddClick}},[e._v("添加规格")]),a("span",{staticClass:"__tips"},[e._v("最多设置3个规格")])],1)],2),e.tableData.length>0&&e.tableData[0].param_value?a("el-form-item",{attrs:{label:"规格明细"}},[a("Table",{attrs:{data:e.selectData},model:{value:e.tableData,callback:function(t){e.tableData=t},expression:"tableData"}})],1):e._e()],1)},ae=[],ie=(a("b12c"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"specification-item"},[a("div",{staticClass:"specification-item__header"},[a("label",{staticClass:"specification-item__label"},[e._v(" 规格名 ")]),a("div",{staticClass:"specification-item__input"},[a("el-input",{attrs:{type:"text",maxlength:"10","show-word-limit":""},on:{blur:e.handleTitleBlur},model:{value:e.title,callback:function(t){e.title=t},expression:"title"}})],1),e.is_cover?a("div",{staticClass:"specification-item__input __checked"},[a("el-checkbox",{on:{change:e.handleChecked},model:{value:e.checked,callback:function(t){e.checked=t},expression:"checked"}},[e._v("规格图片")])],1):e._e(),e.is_delete?a("i",{staticClass:"le-icon le-icon-cha2 specification-item__header__close",attrs:{slot:"suffix"},on:{click:e.handleDelHeader},slot:"suffix"}):e._e()]),a("div",{staticClass:"specification-item__content"},[a("label",{staticClass:"specification-item__label"},[e._v(" 规格值 ")]),a("div",{staticClass:"specification-item__list"},[e._l(e.tableData,(function(t,i){return a("div",{key:i,staticClass:"specification-item__input"},[a("el-input",{attrs:{type:"text",maxlength:"20","show-word-limit":"","data-index":i},on:{blur:e.handleInputBlur},model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"item.value"}},[e.is_delete_item(i)?a("i",{staticClass:"le-icon le-icon-cha2 specification-item__close",attrs:{slot:"suffix"},on:{click:function(t){return e.handleDelClick(i)}},slot:"suffix"}):e._e()]),e.checked&&e.is_cover?a("div",{staticClass:"specification-item__cover"},[a("pictureDialog",{on:{blur:e.handleImageSync},scopedSlots:e._u([{key:"preview",fn:function(i){return a("div",{staticClass:"specification-item__cover-edit"},[a("el-image",{attrs:{src:i.url,fit:"cover"}}),a("i",{staticClass:"le-icon le-icon-cha2 specification-item__cover-close",on:{click:function(a){return a.stopPropagation(),function(a){t.image="",e.handleImageSync()}.apply(null,arguments)}}})],1)}}],null,!0),model:{value:t.image,callback:function(a){e.$set(t,"image",a)},expression:"item.image"}},[a("div",{staticClass:"specification-item__cover-add",attrs:{slot:"upload"},slot:"upload"},[a("i",{staticClass:"le-icon le-icon-add specification-item__cover-icon"}),a("span",{staticClass:"specification-item__cover-text"},[e._v("添加图片")])])])],1):e._e()],1)})),a("div",{staticClass:"specification-item__input"},[e.tableData.length<20?a("span",{staticClass:"specification-item__add",on:{click:e.handleAddClick}},[e._v("添加规格值")]):e._e()]),e.checked&&e.is_cover?a("div",{staticClass:"specification-item__tips"},[e._v(" 仅支持为第一组规格设置规格图片，建议尺寸：800 x 800像素 ")]):e._e()],2)])])}),se=[],le={props:{value:{type:[Object,Array]},size:{type:Number,default:1},is_cover:{type:Boolean,default:!1},is_delete:{type:Boolean,default:!1},onError:{type:Function}},data:function(){return{checked:!1,title:"",tableData:[{value:"",image:""}],errorList:[]}},computed:{selectData:{get:function(){return this.value},set:function(e){this.$emit("input",e)}}},mounted:function(){var e=this;return Object(v["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.value.value&&(e.tableData=JSON.parse(JSON.stringify(e.value.value))),e.checked=e.value.image_status,e.title=e.value.name,e.errorList=[];case 4:case"end":return t.stop()}}),t)})))()},methods:{is_delete_item:function(e){return this.tableData.length!=this.size},handleDelClick:function(e){this.tableData.splice(e,1),this.handleDataSync()},handleAddClick:function(){this.tableData.length<20&&(this.tableData.push({value:"",image:""}),this.handleDataSync())},handleTitleBlur:function(e){e.target.value&&(this.selectData.name=this.title,this.handleDataSync())},handleInputBlur:function(e){for(var t in this.selectData.value){var a=this.selectData.value[t];if(e.target.dataset.index!==t&&a.value&&a.value==e.target.value)return void this.$message({message:"已存在相同规格值",type:"warning"})}this.handleDataSync()},handleDataSync:function(){this.selectData.value=JSON.parse(JSON.stringify(this.tableData)),this.$emit("input",this.selectData)},handleDataCheck:function(){for(var e in this.selectData.value){var t=this.selectData.value[e];t.value&&""==t.value&&this.errorList.push("规格值不能为空")}},handleImageCheck:function(){for(var e in this.selectData.value){var t=this.selectData.value[e];t.image&&""==t.image&&this.errorList.push("规格图片不能为空")}},handleDelHeader:function(e){this.$emit("delete",e)},handleChecked:function(e){this.selectData.image_status=e},handleImageSync:function(e){this.handleDataSync()}}},ne=le,oe=(a("70a1"),Object(w["a"])(ne,ie,se,!1,null,"91bc68c6",null)),re=oe.exports,ce=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-popover",{staticClass:"specification-popover",attrs:{placement:"bottom-start",title:"",width:"124"},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[a("div",{staticClass:"specification-popover__content"},[a("el-input",{attrs:{type:e.type},on:{input:e.inputChange},model:{value:e.inputValue,callback:function(t){e.inputValue=t},expression:"inputValue"}})],1),a("div",{staticClass:"specification-popover__footer"},[a("el-button",{attrs:{type:"text"},on:{click:function(t){e.visible=!1}}},[e._v("取消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.handleConfirm}},[e._v("确定")])],1),a("el-button",{staticStyle:{"padding-left":"0"},attrs:{slot:"reference",type:"text"},slot:"reference"},[e._t("default")],2)],1)},ue=[],de={inject:["self"],props:{field:{type:String,default:""},type:{type:String,default:"numebr"}},data:function(){return{visible:!1,inputValue:null}},methods:{inputChange:function(e){"goods_sn"!==this.field&&(this.inputValue=e.replace(/[^\d\.]/g,""))},handleConfirm:function(){if(this.self){for(var e in this.self.checkedCities){var t=this.self.checkedCities[e];t[this.field]>=0&&(t[this.field]=this.inputValue)}this.visible=!1,this.inputValue=null}}}},pe=de,ve=(a("3479"),Object(w["a"])(pe,ce,ue,!1,null,"ad7ab7e6",null)),he=ve.exports,fe={components:{popover:he},provide:function(){return{self:this}},props:{value:{type:[Array]},data:{type:[Array]}},data:function(){return{numsum:0,checkAll:!1,isIndeterminate:!1,checkedCities:[]}},methods:{handleSelection:function(e){var t=e.length;this.checkedCities=e,this.checkAll=t===this.value.length,this.isIndeterminate=t>0&&t<this.value.length},handleCheckAllChange:function(){this.$refs.multipleTable.toggleAllSelection()},inputChange:function(e){var t=this,a=e.target.value,i=function(a){t.$message({message:a,type:"warning"}),e.target.style.borderColor="red"};"price"===e.target.name&&a>9999999&&i("价格最大不能超过9999999"),"stocks"===e.target.name&&a>999999999&&i("库存最大值不能超过999999999"),"cost_price"===e.target.name&&a>9999999&&i("成本价最大不能超过9999999"),"weight"===e.target.name&&a>1e4&&i("重量最大不能超过10000kg"),e.target.name},clearNoNum:function(e,t,a){"goods_sn"!==a&&("stocks"==a?t.row[a]=e.replace(/[^\d]/g,""):(e=e.replace(/[^\d.]/g,""),e=e.replace(/\.{2,}/g,"."),e=e.replace(".","$#$").replace(/\./g,"").replace("$#$","."),e=e.replace(/^(\-)*(\d+)\.(\d\d).*$/,"$1$2.$3"),e.indexOf(".")<0&&""!=e?t.row[a]=parseFloat(e):t.row[a]=e))}},render:function(){var e=this,t=arguments[0],a=this.handleSelection,i=this.data,s=this.inputChange,l=this.clearNoNum,n=(this.numsum,[]),o=this.value.length<8?56*this.value.length+92:"526",r={props:{"use-virtual":!0,data:this.value,border:!1,stripe:!1,"row-height":56,rules:"rules",height:o+"px","tooltip-effect":"dark","big-data-checkbox":!0},on:{"selection-change":a},ref:"multipleTable"},c=function(e){var a=i[e];a.name&&n.push({props:{width:156,label:a.name},scopedSlots:{default:function(a){var i=a.row["param_value"].split("_");return t("div",{class:"__table_tag"},[i[e]])}}})};for(var u in i)c(u);var d=[{name:"price",label:"价格",unique:!0,fixed:"right",width:110},{name:"stocks",label:"库存",fixed:"right",unique:!0,width:110},{name:"cost_price",label:"成本价(元)",fixed:"right",unique:!1,width:110},{name:"weight",label:"重量(kg)",fixed:"right",unique:!1,width:110},{name:"goods_sn",fixed:"right",label:"货号",unique:!1,width:110}],p=function(a){var i=d[a];i.name&&n.push({props:Object(g["a"])({},i),scopedSlots:{header:function(){return i.unique?t("label",[t("span",{style:"color: red"},["*"])," ",i.label]):i.label},default:function(a){var n={on:{keyup:s}},o=function(e){l(e,a,i.name)};return"stocks"===i.name&&a.row[i.name],t("el-input",_()([{},n,{on:{blur:s,input:o},attrs:{name:i.name},model:{value:a.row[i.name],callback:function(t){e.$set(a.row,i.name,t)}}}]))}}})};for(var v in d)p(v);var h={props:{indeterminate:this.isIndeterminate},on:{change:this.handleCheckAllChange}},f=this.checkAll,m=this.checkedCities.length>0?t("div",{class:"footer_popover"},[t(he,{attrs:{field:"price"}},["价格"]),t(he,{attrs:{field:"stocks"}},["库存"]),t(he,{attrs:{field:"cost_price"}},["成本价"]),t(he,{attrs:{field:"weight"}},["重量"]),t(he,{attrs:{field:"goods_sn"}},["货号"])]):"";return t("div",{class:"specification-table"},[t("u-table",_()([{},r]),[t("u-table-column",{attrs:{type:"selection",fixed:"left",width:"40"}}),n.map((function(e){return t("u-table-column",_()([{},e]))}))]),t("div",{class:"specification-table__footer"},[t("div",{class:"__all_checkbox"},[t("el-checkbox",_()([{},h,{model:{value:f,callback:function(e){f=e}}}]),[t("span")])]),t("span",{class:"__all_tips"},["批量设置"]),m])])}},me=fe,_e=(a("e00a"),Object(w["a"])(me,o,r,!1,null,"47d63b18",null)),ge=_e.exports,be=a("190b"),ye=a("78e0"),Ce=a("b96e"),ke=(a("2621"),function(e){var t=e.map((function(e){return e.value})).join("_");return{param_value:e[0].param_value?e[0].param_value+t:t,price:e[0].price?e[0].price:"",stocks:e[0].stocks?e[0].stocks:"",cost_price:e[0].cost_price?e[0].cost_price:"",weight:e[0].weight?e[0].weight:"",goods_sn:e[0].goods_sn?e[0].goods_sn:""}}),we=function(){function e(t){Object(ye["a"])(this,e),this.dataList=t}return Object(Ce["a"])(e,[{key:"run",value:function(e){if(this.dataList.length>1)return this.dataList.reduce(this.sortTable);var t=[],a=this.dataList.shift();for(var i in a){var s=a[i];s.value&&t.push({cost_price:"",goods_sn:"",param_value:s.value,price:"",stocks:"",weight:""})}return t}},{key:"sortTable",value:function(e,t){for(var a=[],i=0;i<e.length;i++)for(var s=0;s<t.length;s++)if(Array.isArray(e[i])){var l=[].concat(Object(be["a"])(e[i]),[t[s]]);a.push(ke(l))}else{var n=[e[i],t[s]];a.push(ke(n))}return a}}]),e}(),xe=a("897d"),$e=a.n(xe),je={components:{Item:re,Table:ge},props:{value:{type:[Object,Array]}},data:function(){return{errorList:[],tableData:[],totalPrice:-1,totalStocks:0}},computed:{selectData:{get:function(){return this.value.param_data&&this.value.param_data.length>0?this.value.param_data:[{name:"",image_status:!1,value:[{value:"",image:""},{value:"",image:""}]}]},set:function(e){this.value.param_data=e}},forbidden:function(){return this.selectData.length>=3}},watch:{selectData:{deep:!0,handler:function(e){this.handleSumClick(e)}},tableData:{deep:!0,handler:function(e){this.value.goods_data=e,this.totalStock(e),this.value.stock=this.totalStocks,this.value.price=this.totalPrice>=0?this.totalPrice:0,this.$emit("change",this.value)}}},mounted:function(){var e=this;return Object(v["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.tableData=e.value.goods_data||[];case 1:case"end":return t.stop()}}),t)})))()},methods:{is_size:function(e){return 0===e?2:1},is_delete:function(e){return 0!==e},totalStock:function(e){var t=this;this.totalPrice=-1,this.totalStocks=0,e.reduce((function(e,a){(-1==t.totalPrice||t.totalPrice>a.price)&&(t.totalPrice=a.price),t.totalStocks+=parseInt(a.stocks)}),0);var a=e.findIndex((function(e){return!e.stocks}));a>-1&&(this.totalStocks="")},handleSumClick:function(e){var t=[];for(var a in e){var i=e[a];i.value&&t.push(i.value)}if(this.tableData.length>0){var s=JSON.parse(JSON.stringify(this.tableData)),l=new we(t).run(),n={};for(var o in s){var r=s[o];if(r.param_value){var c=$e()(r.param_value);n[c]=r}}for(var u in l){var d=l[u];if(d.param_value){var p=$e()(d.param_value);n[p]&&(l[u]=n[p])}}this.tableData=l}else this.tableData=new we(t).run()},handleAddClick:function(){this.selectData.length<3&&this.selectData.push({title:"",size:1,is_delete:!0,is_cover:!1,data:[{name:""}]})},handleDataCheck:function(){this.errorList=[];var e=this.$refs.selectItem;for(var t in e){var a=e[t];if(""==a.title){this.errorList.push("规格名不能为空");break}var i=a.tableData;for(var s in i){var l=i[s];if(""==l.value){this.errorList.push("规格值不能为空");break}if(a.is_cover&&a.checked&&""==l.image){this.errorList.push("规格图片不能为空");break}}}return console.log(this.errorList),this.errorList},handleDelete:function(e){this.selectData.splice(e,1)},getTemp:function(e){var t=this,a=e.result;if(0!==a.param_data.length){var i=a.param_data.map((function(e){return{image:"",value:e.name}}));1===this.selectData.length&&""===this.selectData[0].name?this.selectData=[{image_status:!1,name:a.param_name,value:i}]:this.selectData.push({image_status:!1,name:a.param_name,value:i}),this.$nextTick((function(){t.$refs.selectItem[t.$refs.selectItem.length-1].handleDataSync()}))}}}},Pe=je,Oe=(a("5007"),Object(w["a"])(Pe,te,ae,!1,null,"0af28ed6",null)),Se=Oe.exports,De={props:{value:{type:Object}},methods:{unitCheck:function(e){return e=e.substr(0,2),e.replace(/[0-9]/g,"")},handleChange:function(e){console.log(e),this.value.stocks=e.stock,this.value.price=e.price,console.log(this.value.stocks)},paramValueChange:function(e){this.value.param.goods_data[0].param_value=e},paramTypeChange:function(){this.value.param={goods_data:[{param_value:"",price:"",stocks:1,cost_price:"",weight:"",goods_sn:""}],param_data:[{name:"",image_status:!1,value:[{value:"",image:""},{value:"",image:""}]}]},this.value.stocks=1,this.value.price="0",1===this.value.param_type&&(this.value.param.param_data=[{name:"",image_status:!1,value:[{value:"",image:""}]}])},getData:function(e){var t=this,a=0;console.log(e),e.forEach((function(e){t.value.price>e.price&&(t.value.price=e.price),a+=e.stocks?parseInt(e.stocks):0})),console.log(a),this.value.stocks=a},handleDataCheck:function(){return this.$refs.specification.handleDataCheck()}},watch:{"value.stocks":{handler:function(e){console.log("stocks"),console.log(e),1===this.value.param_type&&(this.value.param.goods_data[0].stocks=e)},deep:!0,immediate:!0},"value.price":{handler:function(e){1===this.value.param_type&&(this.value.param.goods_data[0].price=e)},deep:!0,immediate:!0}},components:{specification:Se}},Te=De,Le=(a("85d7"),Object(w["a"])(Te,Z,ee,!1,null,"47c92017",null)),Ae=Le.exports,Ee=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-form",{ref:"form",staticClass:"he-add-logistic",attrs:{model:e.value,"label-width":"160px"}},[a("el-form-item",{attrs:{label:"配送方式"}},[a("span",{staticClass:"he-delivery"},[e._v("快递配送")])]),a("el-form-item",[a("span",{staticClass:"le-label__require",attrs:{slot:"label"},slot:"label"},[e._v("运费设置")]),a("div",{staticStyle:{"margin-bottom":"10px"}},[a("el-radio",{staticClass:"he-margin-right",attrs:{label:1},model:{value:e.value.ft_type,callback:function(t){e.$set(e.value,"ft_type",t)},expression:"value.ft_type"}},[e._v("统一运费")]),a("el-input",{attrs:{disabled:2===e.value.ft_type},nativeOn:{keyup:function(t){e.value.ft_price=e.oninput(e.value.ft_price)}},model:{value:e.value.ft_price,callback:function(t){e.$set(e.value,"ft_price",t)},expression:"value.ft_price"}},[a("template",{slot:"append"},[e._v("元")])],2)],1),a("div",{staticClass:"el-row--flex"},[a("div",[a("el-radio",{staticClass:"he-margin-right",attrs:{label:2},model:{value:e.value.ft_type,callback:function(t){e.$set(e.value,"ft_type",t)},expression:"value.ft_type"}},[e._v("运费模板")]),a("el-select",{directives:[{name:"loading",rawName:"v-loading",value:e.templateLoading,expression:"templateLoading"}],attrs:{placeholder:"请选择",disabled:1===e.value.ft_type},model:{value:e.value.ft_id,callback:function(t){e.$set(e.value,"ft_id",t)},expression:"value.ft_id"}},e._l(e.templateList,(function(e){return a("el-option",{key:e.id,attrs:{value:e.id,label:e.name}})})),1)],1),a("div",{staticClass:"flex justify-center align-center he-btn"},[a("el-button",{attrs:{type:"text"},on:{click:function(t){return e.router("/order/freightPublish")}}},[e._v(" 新建 ")]),a("span",{staticClass:"le-line-btn"}),a("el-button",{attrs:{type:"text"},on:{click:e.getShipping}},[e._v(" 刷新 ")])],1)]),a("p",{staticClass:"he-tips",staticStyle:{margin:"7px 0 0 15px"}},[e._v("模板支持对不同区域，按件或按重计算运费")])]),a("el-form-item",{attrs:{label:"包邮设置"}},[a("div",{staticClass:"el-row--flex"},[a("div",[a("span",{staticClass:"he-margin-right"},[e._v("包邮模板")]),a("el-select",{directives:[{name:"loading",rawName:"v-loading",value:e.freeLoading,expression:"freeLoading"}],attrs:{placeholder:"请选择"},model:{value:e.value.pfr_id,callback:function(t){e.$set(e.value,"pfr_id",t)},expression:"value.pfr_id"}},e._l(e.freeRules,(function(e){return a("el-option",{key:e.id,attrs:{value:e.id,label:e.name}})})),1)],1),a("div",{staticClass:"flex justify-center align-center he-btn"},[a("el-button",{attrs:{type:"text"},on:{click:function(t){return e.router("/order/shippingPublish")}}},[e._v("新建")]),a("span",{staticClass:"le-line-btn"}),a("el-button",{attrs:{type:"text"},on:{click:e.getFreeShipping}},[e._v("刷新")])],1)]),a("p",{staticClass:"he-tips",staticStyle:{margin:"7px 0 0 0"}},[e._v("模板支持分区域设置包邮条件，指定商品包邮")])])],1)},ze=[],Ne=a("a964"),Ie={props:{value:Object},data:function(){return{templateList:[],freeRules:[],freeLoading:!1,templateLoading:!1}},methods:{getShipping:function(){var e=this;this.templateLoading=!0,this.$heshop.option("get",{module:"logistics",include:"freighttemplate"}).then((function(t){e.templateLoading=!1,e.templateList=t})).catch((function(t){e.templateLoading=!1,e.$message.error(t.data.message)}))},getFreeShipping:function(){var e=this;this.freeLoading=!0,this.$heshop.option("get",{module:"logistics",include:"packagefreerules"}).then((function(t){e.freeLoading=!1,e.freeRules=t})).catch((function(t){e.freeLoading=!1,e.$message.error(t.data.message)}))},router:function(e){var t=this.$router.resolve({path:e});window.open(t.href,"_blank")},oninput:function(e){return Object(Ne["a"])(e)}},mounted:function(){var e=this;return Object(v["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.getFreeShipping(),e.getShipping();case 2:case"end":return t.stop()}}),t)})))()}},qe=Ie,Fe=(a("a190"),Object(w["a"])(qe,Ee,ze,!1,null,"03aac9b9",null)),Re=Fe.exports,Ve=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-form-item",{attrs:{label:"发放优惠券"}},[a("div",{staticClass:"le-coupon"},e._l(e.value.coupon,(function(t,i){return a("div",{key:i,staticClass:"le-coupon-item flex align-center justify-between"},[a("span",[e._v(e._s(t.info.name))]),a("el-input-number",{staticClass:"le-input-number",attrs:{min:1,max:999999},nativeOn:{keyup:function(t){return e.positiveInteger.apply(null,arguments)}},model:{value:t.number,callback:function(a){e.$set(t,"number",a)},expression:"item.number"}}),a("i",{staticClass:"le-icon le-icon-cha2",on:{click:function(t){return e.value.coupon.splice(i,1)}}})],1)})),0),a("div",{staticClass:"flex"},[a("el-button",{directives:[{name:"popup",rawName:"v-popup.chooseCoupon",value:e.coupon,expression:"coupon",modifiers:{chooseCoupon:!0}}],staticClass:"le-coupon-btn",attrs:{module:"goods",title:"选择优惠券",width:"857"}},[e._v(" 选择优惠券 ")]),a("div",{staticClass:"flex align-center"},[a("he-link",{attrs:{href:"features/coupon/detail",target:"_blank"}},[a("span",{staticClass:"le-text-btn le-new"},[e._v("新建")])]),a("span",{staticClass:"le-line"}),a("span",{staticClass:"le-text-btn le-refresh"},[e._v("刷新")])],1)],1),a("div",{staticClass:"he-tips",staticStyle:{"padding-left":"0",clear:"both"}},[e._v(" 购买此商品支付成功后，将自动发放优惠券 ")])])],1)},Be=[],Me={props:{value:{type:Object}},computed:{coupon:{get:function(){return this.value.coupon},set:function(e){this.value.coupon=e}}},methods:{positiveInteger:function(e){e.target.value=e.target.value.replace(/[^\d]/g,"")}}},Ue=Me,He=(a("5986"),Object(w["a"])(Ue,Ve,Be,!1,null,"32ee00a0",null)),Je=He.exports,Ge=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-form-item",{attrs:{label:"每人限购"}},[a("div",{staticStyle:{"margin-bottom":"5px"}},[a("el-switch",{attrs:{"active-value":1,"inactive-value":0},model:{value:e.value.limit_buy_status,callback:function(t){e.$set(e.value,"limit_buy_status",t)},expression:"value.limit_buy_status"}})],1),1===e.value.limit_buy_status?a("el-input",{staticClass:"le-limit",attrs:{maxlength:7},on:{input:function(t){e.value.limit_buy_value=t.replace(/[^\d]/g,"")}},model:{value:e.value.limit_buy_value,callback:function(t){e.$set(e.value,"limit_buy_value",t)},expression:"value.limit_buy_value"}},[a("el-select",{attrs:{slot:"prepend",placeholder:"请选择"},slot:"prepend",model:{value:e.value.limit_buy_type,callback:function(t){e.$set(e.value,"limit_buy_type",t)},expression:"value.limit_buy_type"}},[a("el-option",{attrs:{label:"每天",value:"day"}}),a("el-option",{attrs:{label:"每周",value:"week"}}),a("el-option",{attrs:{label:"每月",value:"month"}}),a("el-option",{attrs:{label:"永久",value:"all"}})],1),a("template",{slot:"append"},[e._v("件")])],2):e._e()],1),a("el-form-item",{attrs:{label:"起购量"}},[a("el-input",{attrs:{maxlength:7},on:{input:function(t){e.value.min_number=t.replace(/[^\d]/g,"")}},model:{value:e.value.min_number,callback:function(t){e.$set(e.value,"min_number",t)},expression:"value.min_number"}},[a("template",{slot:"append"},[e._v("件")])],2),a("p",{staticClass:"he-tips",staticStyle:{margin:"7px 0 0 0"}},[e._v("商品库存低于起购数时，买家无法下单购买")])],1),a("el-form-item",{attrs:{label:"商品服务"}},[e._l(e.form.serviceObject.select,(function(t,i){return a("el-tag",{key:i,staticClass:"le-cat__footer-tag",attrs:{type:"info",size:"medium",closable:""},on:{close:function(a){return e.deleteTag(t,i)}}},[e._v(" "+e._s(t.title)+" ")])})),a("el-button",{directives:[{name:"popup",rawName:"v-popup.selectService",value:e.form.serviceObject,expression:"form.serviceObject",modifiers:{selectService:!0}}],staticClass:"he-class__button",attrs:{plain:"",title:"选择服务",width:"392",height:"456",module:"goods"}},[e._v("选择服务 ")]),a("he-link",{attrs:{href:"goods/servicePublish",target:"_blank"}},[a("el-button",{staticClass:"he-class__button-new",attrs:{type:"text"}},[e._v(" 新建服务 ")])],1),a("span",{staticStyle:{color:"#623ceb"}},[e._v("|")]),a("el-button",{staticClass:"he-class__button-new",attrs:{type:"text"},on:{click:e.getList}},[e._v(" 刷新 ")])],2),a("el-form-item",{attrs:{label:"上架设置"}},[a("el-radio-group",{model:{value:e.value.is_sale,callback:function(t){e.$set(e.value,"is_sale",t)},expression:"value.is_sale"}},[a("el-radio",{attrs:{label:1}},[e._v("立即上架")]),a("el-radio",{attrs:{label:0}},[e._v("暂不上架")])],1)],1)],1)},Xe=[],Ke={props:{value:{type:Object}},data:function(){return{form:{name:"",region:"",date1:"",date2:"",delivery:!1,type:[],resource:"",desc:"",serviceObject:{list:[],select:[],search:""}},list:[],select:[]}},mounted:function(){var e=this;return Object(v["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:setTimeout((function(){e.getList()}),800);case 1:case"end":return t.stop()}}),t)})))()},methods:{getList:function(){var e=this;this.$heshop.option("get",{module:"goods",include:"service"}).then((function(t){e.form.serviceObject.select=[];for(var a=e.value.services,i=0;i<t.length;i++){t[i].check=!1;for(var s=0;s<a.length;s++)t[i].id===a[s]&&(t[i].check=!0,e.form.serviceObject.select.push(t[i]))}e.form.serviceObject.list=t})).catch((function(t){e.$message.error(t.data.message)}))},deleteTag:function(e,t){this.form.serviceObject.list.forEach((function(t){t.id===e.id&&(t.check=!1)})),this.form.serviceObject.select.splice(t,1)}},watch:{"form.serviceObject.select":{handler:function(e){var t=this;this.value.services=[],e.forEach((function(e){t.value.services.push(e.id)}))},immediate:!0}}},Ye=Ke,We=(a("44cd"),Object(w["a"])(Ye,Ge,Xe,!1,null,"005ba102",null)),Qe=We.exports,Ze=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-row",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"le-top"},[a("el-col",{staticClass:"el-row--flex is-justify-center",attrs:{span:24}},[a("div",{attrs:{id:"div2"}},[a("div",{staticClass:"he-editor__preview-header"},[e._v("详情页预览图")]),a("div",{staticClass:"he-editor__preview-body",domProps:{innerHTML:e._s(e.editorHtml)}})]),a("div",{ref:"edit",attrs:{id:"div1"}}),a("pictureDialog",{ref:"pictureDialog",attrs:{limit:10,max:10},on:{confirm:e.confirm}})],1)],1)},et=[],tt=a("5fd4"),at=a.n(tt),it=a("83a7"),st=a("4453"),lt=a("8595"),nt=a("46d3"),ot=(at.a.$,at.a.BtnMenu),rt=(at.a.DropListMenu,at.a.PanelMenu,at.a.DropList,at.a.Panel,at.a.Tooltip,function(e){Object(st["a"])(a,e);var t=Object(lt["a"])(a);function a(e){var i;Object(ye["a"])(this,a);var s=at.a.$('<div class="w-e-menu" data-title="Alert">\n                <div>\n                <i class="w-e-icon-image"></i>\n</div>\n            </div>');return i=t.call(this,s,e),Object(nt["a"])(Object(it["a"])(i),"editor",void 0),i.editor=e,i}return Object(Ce["a"])(a,[{key:"clickHandler",value:function(){var e=this.editor,t=e.config,a=t.uploadFile;a&&"function"===typeof a&&a()}},{key:"tryChangeActive",value:function(){this.active()}}]),a}(ot)),ct={name:"goodsEditor",props:{value:{type:String}},data:function(){return{editor:null,editorHtml:"",loading:!1}},methods:{createEdit:function(){var e=this;this.editor=new at.a("#div1"),this.editor.menus.extend("alertMenuKey",rt),this.editor.config.uploadImgMaxSize=104857600,this.editor.config.uploadImgAccept=["jpg","jpeg","png","gif","bmp","webp"],this.editor.config.uploadImgMaxLength=10,this.editor.config.uploadImgTimeout=5e3,this.editor.config.uploadFileName=(new Date).valueOf(),this.editor.config.uploadFile=function(){e.$refs.pictureDialog.handleClick()},this.editor.config.showFullScreen=!1,this.editor.config.showLinkImg=!1,this.editor.config.menus=["bold","head","fontSize","italic","foreColor","backColor","fontName","strikeThrough","justify","underline","undo","image","redo","alertMenuKey"],this.editor.config.onchange=function(t){e.$emit("input",t),e.editorHtml=t},this.editor.config.height=508,this.editor.config.onchangeTimeout=500,this.editor.create(),this.editorHtml=this.value,this.editor.txt.html(this.value)},confirm:function(e){for(var t=this.editor,a=0;a<e.length;a++)t.cmd.do("insertHTML",'<img style="width: 100%" src="'.concat(e[a],'"/>'))}},mounted:function(){this.createEdit(),this.$nextTick((function(){for(var e=document.querySelectorAll("#div1 img"),t=0;t<e.length;t++)(0===e[t].width||e[t].width>414)&&(e[t].style.width="100%")}))},beforeDestroy:function(){this.editor.destroy(),this.editor=null}},ut=ct,dt=(a("3a5b"),Object(w["a"])(ut,Ze,et,!1,null,"28678360",null)),pt=dt.exports,vt=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-row",[i("el-col",{staticClass:"el-row--flex is-justify-center",attrs:{span:24}},[i("div",{staticClass:"he-goodsPreview"},[i("div",{staticClass:"he-goodsPreview__zoom"},[i("div",{staticClass:"he-goodsPreview__content"},[i("div",{staticClass:"he-goodsPreview__banner"},[i("el-carousel",{attrs:{trigger:"click",height:"750px","indicator-position":"none"},on:{change:e.change}},e._l(e.form.slideshow,(function(e,t){return i("el-carousel-item",{key:t},[i("img",{staticClass:"he-goodsPreview__banner-img",attrs:{src:e,alt:""}})])})),1),i("div",{staticClass:"he-goodsPreview__indicators"},[e._v(" "+e._s(e.initialIndex+1)+"/"+e._s(e.form.slideshow.length)+" ")])],1),i("div",{staticClass:"he-goodsPreview__name he-goodsPreview__item"},[i("div",[i("span",{staticClass:"price"},[e._v(e._s(e.form.price))]),i("span",{staticClass:"origin-price"},[e._v("￥"+e._s(e.form.line_price))]),i("span",{staticClass:"sale"},[e._v("已售"+e._s(e.form.sales)+e._s(e.form.unit))])]),i("div",{staticClass:"el-row--flex is-justify-space-between"},[i("div",{staticClass:"he-goodsPreview__title"},[e._v(" "+e._s(e.form.name)+" ")]),i("div",{staticClass:"he-goodsPreview__share"},[i("he-icon",{attrs:{type:"le-icon-fenxiang"}}),i("div",[e._v("分享")])],1)])]),i("div",{staticClass:"he-goodsPreview__item he-goodsPreview__parameter"},[i("div",{staticClass:"el-row--flex is-justify-space-between is-align-middle"},[i("div",{staticClass:"el-row--flex is-align-middle"},[i("div",{staticClass:"label"},[e._v("规格")]),i("div",{staticClass:"content"},[e._v("请选择")])]),i("he-icon",{staticClass:"arrow",attrs:{type:"le-icon-arrow-right"}})],1),i("div",{staticClass:"el-row--flex is-justify-space-between is-align-middle"},[i("div",{staticClass:"el-row--flex is-align-middle"},[i("div",{staticClass:"label"},[e._v("运费")]),i("div",{staticClass:"content"},[e._v("送至北京东区 ￥12.00")])]),i("he-icon",{staticClass:"arrow",attrs:{type:"le-icon-arrow-right"}})],1),i("div",{staticClass:"el-row--flex is-justify-space-between is-align-middle"},[i("div",{staticClass:"el-row--flex is-align-middle"},[i("div",{staticClass:"label"},[e._v("包邮")]),i("div",{staticClass:"content"},[e._v("满￥99部分地区包邮")])]),i("he-icon",{staticClass:"arrow",attrs:{type:"le-icon-arrow-right"}})],1)]),i("div",{staticClass:"he-goodsPreview__item he-goodsPreview__evaluation"},[i("div",{staticClass:"he-goodsPreview__evaluation-header el-row--flex is-justify-space-between is-align-middle"},[i("div",{staticClass:"he-title el-row--flex is-align-middle"},[i("div",{staticClass:"he-title__sign"}),i("div",[e._v("评价")]),i("div",[e._v("（6523）")])]),i("div",{staticClass:"el-row--flex is-align-middle he-more"},[i("div",{staticClass:"he-more__top"},[e._v("查看全部")]),i("he-icon",{staticClass:"arrow",attrs:{type:"le-icon-arrow-right"}})],1)]),i("div",{staticClass:"el-row--flex he-header is-justify-space-between is-align-middle"},[i("div",{staticClass:"el-row--flex is-align-middle"},[i("img",{staticClass:"he-header__avatar",attrs:{src:a("aea3")}}),i("div",{staticClass:"he-header__name"},[e._v("中国人")])]),i("div",{staticClass:"he-header__star el-row--flex"},e._l(5,(function(e,t){return i("he-icon",{key:t,staticClass:"he-header__star-item",attrs:{type:"le-icon-star"}})})),1)]),i("div",{staticClass:"he-header__body"},[e._v(" 手感还不错，聚酯纤维的， 类似雪纺的手感，线头较多，颜色偏暗，长度没有模特那么长，膝盖下面一点，总体比较满意， 如果外面的白纱稍微有点质感会更好，现在有点轻飘飘的，不挺 ")]),i("div",{staticClass:"he-header__footer"})]),i("div",{staticClass:"he-detail"},[i("div",{staticClass:"he-detail__title"},[e._v(" - 商品详情 -")]),i("div",{staticClass:"he-detail__body",domProps:{innerHTML:e._s(e.form.body.content)}})])]),i("div",{staticClass:"he-goodsPreview__footer el-row--flex"},[i("div",{staticClass:"he-icon el-column--flex"},[i("he-icon",{attrs:{type:"le-icon-nav_home_normal"}}),i("div",[e._v("首页")])],1),i("div",{staticClass:"he-icon"},[i("he-icon",{attrs:{type:"le-icon-productdetails_tab_customerservice"}}),i("div",[e._v("首页")])],1),i("div",{staticClass:"he-icon"},[i("he-icon",{attrs:{type:"le-icon-nav_shoppingcart_normal1"}}),i("div",[e._v("购物车")])],1),i("div",{staticClass:"he-cat"},[e._v(" 加入购物车 ")]),i("div",{staticClass:"he-bay"},[e._v(" 立即购买 ")])])])])])],1)},ht=[],ft={name:"goodsPreview",props:{img:{type:Array,default:function(){return[]}},detail:{type:String,default:function(){return""}},form:{type:Object}},data:function(){return{initialIndex:0}},methods:{change:function(e){this.initialIndex=e}}},mt=ft,_t=(a("5fc5"),Object(w["a"])(mt,vt,ht,!1,null,"7868acf8",null)),gt=_t.exports,bt={name:"create-goods",components:{addBasic:Q,addPrice:Ae,addLogistic:Re,addMarketing:Je,addOther:Qe,goodsEditor:pt,goodsPreview:gt},data:function(){return{form:{name:"",body:{goods_introduce:"",goods_args:[]},group:[],param:{goods_data:[{param_value:"",price:"",stocks:0,cost_price:"",weight:"",goods_sn:""}],param_data:[{name:"",image_status:!1,value:[{value:"",image:""}]}]},stocks:0,slideshow:[],param_type:1,ft_type:1,unit:"件",is_video:0,videoType:1,video:{},video_cover:"",is_sale:0,min_number:""},rules:{},step:0,activeName:"first"}},methods:{nextStep:function(){"first"===this.activeName?this.activeName="second":"second"===this.activeName?this.activeName="third":"third"===this.activeName?this.activeName="fourth":"fourth"===this.activeName?this.activeName="fifth":this.step=1,console.log("打野的")},save:function(){var e=this,t=this.firstVerify();if(!t)return this.step=0,this.activeName="first",!1;var a=this.secondVerify();if(!a)return this.step=0,this.activeName="second",!1;var i=this.thirdVerify();if(!i)return this.step=0,this.activeName="third",!1;var s=this.$_.cloneDeep(this.form);s.param_data=s.param.param_data,s.goods_data=JSON.stringify(s.param.goods_data),delete s.param,s.is_video&&(s.video.type=s.videoType,delete s.videoType),console.log(s),this.$heshop.goods("post",s).then((function(t){console.log(t),e.$router.replace({path:"/goods/index"})})).catch((function(t){e.$message({type:"error",message:t.data.message})}))},getDetail:function(){var e=this;console.log(this.$route.query.id),this.$heshop.goods("get",parseInt(this.$route.query.id)).then((function(t){console.log(t),t.video=t.video?t.video:{type:1},t.videoType=t.video.type,t.body.goods_args=t.body.goods_args?t.body.goods_args:[],e.form=t})).catch((function(t){e.$message.error(t.data.message)}))},firstVerify:function(){var e=this.form,t=e.name,a=e.group,i=e.body,s=e.slideshow,l=e.is_video,n=e.video,o=e.videoType;if(!t)return this.$message({type:"error",message:"请输入商品名称"}),!1;if(this.$_.isEmpty(a))return this.$message({type:"error",message:"请选择商品分类"}),!1;var r=i.goods_args;console.log(r);for(var c=0;c<r.length;c++)if(!r[c].name||!r[c].value)return this.$message({type:"error",message:"商品参数不能为空"}),!1;if(this.$_.isEmpty(s))return this.$message({type:"error",message:"请选择商品轮播图"}),!1;if(1===l)if(1===o){if(!n.url)return this.$message({type:"error",message:"请选择主视频"}),!1}else if(2===o){if(!n.url)return this.$message({type:"error",message:"请输入主视频地址"}),!1;if(console.log(n.url),n.url.length>100)return this.$message({type:"error",message:"网络图片地址最多允许100字符"}),!1}return!0},secondVerify:function(){var e=this.form,t=e.param_type,a=e.param,i=e.stocks,s=e.unit,l=e.price;if(1===t){if(!a.goods_data[0].param_value)return this.$message({type:"error",message:"请输入商品规格值"}),!1;if(!a.goods_data[0].price||0==a.goods_data[0].price)return this.$message({type:"error",message:"请输入商品价格"}),!1}else if(2===t){var n=[];if(n=this.$refs.addPrice.handleDataCheck(),console.log(n),n.length>0)return this.$message({type:"error",message:n[0]}),!1}return l&&0!=l?i&&0!=i?!!s||(this.$message({type:"error",message:"请输入商品单位"}),!1):(this.$message({type:"error",message:"请输入商品库存"}),!1):(this.$message({type:"error",message:"请输入商品价格"}),!1)},thirdVerify:function(){var e=this.form,t=e.ft_type,a=e.ft_price,i=e.ft_id;if(1===t){if(console.log(t),!a)return this.$message({type:"error",message:"请输入统一运费"}),!1}else if(!i)return this.$message({type:"error",message:"请选择运费模板"}),!1;return!0}},mounted:function(){console.log(this.$route.query.id),this.$route.query.id&&this.getDetail()}},yt=bt,Ct=(a("cf0e"),Object(w["a"])(yt,c,u,!1,null,"02ff9360",null));t["default"]=Ct.exports},"724d":function(e,t,a){},7614:function(e,t,a){},"789d":function(e,t,a){"use strict";a("7614")},"7d1e":function(e,t,a){},"82ff":function(e,t,a){},8527:function(e,t,a){"use strict";a("62ff")},"85d7":function(e,t,a){"use strict";a("5c31")},a190:function(e,t,a){"use strict";a("61c9")},a32f:function(e,t,a){},a391:function(e,t,a){},a482:function(e,t,a){},aea3:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAMAAABg3Am1AAABhlBMVEUAAADMzMz////f39/m5ub////x8fHy8vLz8/P19fX19fXl5eXt7e329vbj4+Py8vLz8/Pn5+fj4+P09PTy8vL09PT09PT09PTe3t709PT19fXz8/P19fXe3t709PT09PT09PT09PTo6Ojy8vL09PTy8vL09PTb29vd3d319fXz8/Pd3d3y8vLz8/Pz8/P09PT19fX19fXz8/Pb29vd3d309PTz8/Pz8/Pz8/Pz8/P09PT09PTZ2dnz8/Pz8/P09PTz8/Pz8/PY2Njz8/PZ2dny8vLz8/PV1dXy8vLy8vLy8vLy8vLz8/PV1dXz8/Pz8/PU1NTU1NTT09Py8vLz8/Py8vLz8/PS0tLT09PX19fy8vLz8/POzs7Pz8/Q0NDR0dHS0tLT09PU1NTV1dXW1tbX19fY2NjZ2dna2trb29vc3Nzd3d3e3t7f39/g4ODh4eHi4uLj4+Pk5OTl5eXm5ubn5+fo6Ojp6enq6urr6+vs7Ozt7e3u7u7v7+/w8PDx8fHy8vLz8/PH1FUFAAAAXHRSTlMABQUIChESExYZGh0dHiUoKSouMFBaW1xeXmhpaWxvcHV3eHh4eXmAgIKDiY6QkZGSk5qio7W4u7y9ycrMzc7Oz9XY2tvc3ezx8vP09fb29/n6+/v7/Pz+/v7+/v41k/wAAAJuSURBVBgZhcGHQxIBFAfglw2VHGmUmjkqbWeWVqaWI0nRtKWNq/cOVMRxjhBFAY8f/3lAJO+O4fdREc/1viHfzOLijG+o77qHzlDdNWJAMUa6qqk8T/8HFPnQ76HSqnrnUNLc3SoqoXEMZY1doSJePyrwe8ml/Rsq+tZODjcNnMG4QYp3CWda8tKpRj+c0llw8TdS3rk3cLBju1vrG1YkCae35+ifHmipaEg4SwJWAg69lFM7C+Vky2TJ4+UotNlaynoKxV5nllNsRqE9pYyLc1AsFo0Dx1DmLhFRJ5SYKU4chtZJRMMoSG2yuJgxKMNEtQYK4kEWF7agGLV0Dcohixuv2VCu0WMoERY3Xk1CeUIvoOyxuPFyAsoregclwuLGq0koPpqBEhMWFw6noMzQVyjJFRYX3klDWaQlaBaLSyAObYn80BIBFge24OAnHxz2hUXhUBIO7+klHFK7ovBKHE6vqQ9OqUiQWXJYwgm4PKM2uMW3l4UzzPC+Dbc2qjNQJHkU2fsTTdgo8quOaByKHdk+hnJgHUEbJ6JuFMTDwkHryEY6nQbs2Lr5O7BzgoJuIqr5iLxUNMgiLLK2cxA7jGyHhFmYwwn897GGMp4jb19YcpjFNJlZcjiUQN5zyqpfQM6hyVISr9nIWainnAfISqywlMEWch7SP+cnkLHFUg6bh8iYOE95VxeAY6mAwylg4SqdajGwwVJJDEYLKT3xIEsFvJm+RQ63v0sl/PMOubTOSwXzrVSkeVLKmmymEi48+iQlfXp0gUprGPwsRb4MNlB5l+9NBUUJTt2/TGdo6hgYnf5umj+mRwc6msjtL1+7GNFdRl/7AAAAAElFTkSuQmCC"},bbf6:function(e,t,a){},bf03:function(e,t,a){"use strict";a("a32f")},cf0e:function(e,t,a){"use strict";a("a482")},d519:function(e,t,a){e.exports=a.p+"img/goods-introduce-example.d3e39ab9.png"},e00a:function(e,t,a){"use strict";a("7d1e")},e71b:function(e,t,a){},eec2:function(e,t,a){},f7ef:function(e,t,a){}}]);
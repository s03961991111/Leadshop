{"version":3,"sources":["webpack:///./src/pages/goods/parameterTemplateEdit.vue","webpack:///src/pages/goods/parameterTemplateEdit.vue","webpack:///./src/pages/goods/parameterTemplateEdit.vue?a23d","webpack:///./src/pages/goods/parameterTemplateEdit.vue?f515"],"names":["staticRenderFns","name","data","form","title","content","rules","loading","disabled","methods","pushParameter","this","push","value","deletionParameter","length","$delete","index","submit","$refs","validate","valid","method","getDetail","$heshop","mounted","$route","query","id","render","component"],"mappings":"mKAAI,EAAQA,E,qBCCZ,G,oBAAA,CACEC,KAAM,wBACNC,KAFF,WAGI,MAAO,CACLC,KAAM,CACJC,MAAO,GACPC,QAAS,CACjB,CACU,KAAV,GACU,MAAV,MAIMC,MAAO,CACLF,MAAO,CACf,CACU,UAAV,EACU,QAAV,eAGQC,QAAS,CACjB,CACU,UAAV,EACU,UAAV,gBACY,IAAZ,uBACA,uBACgB,EAAhB,YAGY,QAKNE,SAAS,EACTC,UAAU,IAGdC,QAAS,CACPC,cADJ,WAEMC,KAAKR,KAAKE,QAAQO,KAAK,CACrBX,KAAM,GACNY,MAAO,MAGXC,kBAPJ,SAOA,GACUH,KAAKR,KAAKE,QAAQU,QAAU,GAChCJ,KAAKK,QAAQL,KAAKR,KAAKE,QAASY,IAElCC,OAXJ,WAWA,WACMP,KAAKQ,MAAM,QAAQC,UAAS,SAAlC,GACQ,IAAIC,EA0BF,OAAO,EAzBP,EAAV,WACU,IAAV,SAEYC,EADE,EAAd,QACqB,MAEA,OAEX,IAAV,oCACU,EAAV,QACA,eACA,kBACY,EAAZ,yBACY,EAAZ,WACY,EAAZ,cACc,KAAd,gCAGA,mBACA,UACc,EAAd,kCAEc,EAAd,sCASIC,UA5CJ,SA4CA,cACMZ,KAAKa,QACX,6BACA,kBACQ,EAAR,OACQ,EAAR,eAEA,mBACQ,EAAR,oCAIEC,QA9FF,WA+FQd,KAAKe,OAAOC,MAAMC,KACpBjB,KAAKH,UAAW,EAChBG,KAAKY,UAAUZ,KAAKe,OAAOC,MAAMC,MAGrCC,OApGF,WAoGA,0BACA,OACI,OAAO,EAAX,aACA,WADA,6CAEA,wBAFA,4CAIA,8BAJA,4EASA,CACQ,MAAR,OACQ,MAAR,UAXA,OAaA,UAbA,IAcA,OAdA,qBAeA,SAfA,kCAgBA,eAhBA,gCAiBA,SAjBA,KAiBA,UAjBA,gCAmBA,KAnBA,iCAuBA,aAvBA,MAsBA,gBAtBA,aAqBA,aArBA,4BAqBA,OArBA,gDA0BA,OA1BA,KA0BA,WA1BA,MA0BA,cA1BA,CA2BA,oCACM,OAAN,SAAQ,MACR,gBADA,mBAAQ,MAAR,CAAU,MAEV,MAFU,cAEV,QAFQ,IAER,WAFA,eAAQ,MAAR,CAAU,UAIV,IAJU,mBAAV,EAAU,YAQV,UARQ,MAOR,gBAPQ,MAAR,CAAU,MAMV,OANU,SAAV,YAAY,EAAZ,KAMA,EANA,uBAAQ,MAUR,kBAVA,iCAAQ,MAAR,CAAU,MAYV,MAZU,cAYV,QAZQ,IAYR,YAZA,eAAQ,MAAR,CAAU,OAeV,OAfU,KAgBV,IAhBU,KAiBV,WAjBU,YAmBV,UAnBQ,MAkBR,gBAlBQ,MAAR,CAAU,MAcV,QAdU,SAAV,YAAY,EAAZ,KAcA,EAdA,wBAAQ,MAqBR,kBArBA,oCAuBA,WACQ,GAAR,aACU,OAAV,SAAY,MAEZ,mCAFY,GAAZ,CAAc,MAGd,iCALA,UAnDA,2CAkEA,iBAlEA,cAkEA,IAlEA,6BAuEA,cAvEA,4BAyEA,UAzEA,SA0EA,WA1EA,QA2EA,wBA3EA,UA4EA,WA5EA,eCvGkd,I,wBFQ9cC,EAAY,eACd,EACA,EACA9B,GACA,EACA,KACA,WACA,MAIa,aAAA8B,E,6CGnBf","file":"js/goods-parameterTemplateEdit.cb320b52.js","sourcesContent":["var render, staticRenderFns\nimport script from \"./parameterTemplateEdit.vue?vue&type=script&lang=js&\"\nexport * from \"./parameterTemplateEdit.vue?vue&type=script&lang=js&\"\nimport style0 from \"./parameterTemplateEdit.vue?vue&type=style&index=0&id=1acb526e&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/_vue-loader@15.9.7@vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"1acb526e\",\n  null\n  \n)\n\nexport default component.exports","<script>\r\nexport default {\r\n  name: 'parameterTemplateEdit',\r\n  data() {\r\n    return {\r\n      form: {\r\n        title: '',\r\n        content: [\r\n          {\r\n            name: '',\r\n            value: ''\r\n          }\r\n        ]\r\n      },\r\n      rules: {\r\n        title: [\r\n          {\r\n            required: true,\r\n            message: '参数模板名称不能为空'\r\n          }\r\n        ],\r\n        content: [\r\n          {\r\n            required: true,\r\n            validator: (rule, value, callback) => {\r\n              for (let i = 0; i < value.length; i++) {\r\n                if (!value[i].value || !value[i].name) {\r\n                  callback('参数内容不能为空');\r\n                }\r\n              }\r\n              callback();\r\n            }\r\n          }\r\n        ]\r\n      },\r\n      loading: false,\r\n      disabled: false\r\n    };\r\n  },\r\n  methods: {\r\n    pushParameter() {\r\n      this.form.content.push({\r\n        name: '',\r\n        value: ''\r\n      });\r\n    },\r\n    deletionParameter(index) {\r\n      if (this.form.content.length <= 1) return;\r\n      this.$delete(this.form.content, index);\r\n    },\r\n    submit() {\r\n      this.$refs['form'].validate(valid => {\r\n        if (valid) {\r\n          this.loading = true;\r\n          let method = undefined;\r\n          if (this.form.id) {\r\n            method = 'put';\r\n          } else {\r\n            method = 'post';\r\n          }\r\n          let data = this.$heshop.utils.deepClone(this.form);\r\n          this.$heshop\r\n            .goodsargs(method, data)\r\n            .then(res => {\r\n              this.$message.success('保存成功');\r\n              this.loading = false;\r\n              this.$router.push({\r\n                path: '/goods/parameterTemplate'\r\n              });\r\n            })\r\n            .catch(err => {\r\n              if (err.data[0]) {\r\n                this.$message.error(err.data[0].message);\r\n              } else {\r\n                this.$message.error(err.data.message);\r\n              }\r\n            });\r\n        } else {\r\n          return false;\r\n        }\r\n      });\r\n    },\r\n    // 获取详情\r\n    getDetail(id) {\r\n      this.$heshop\r\n        .goodsargs('get', parseInt(id))\r\n        .then(res => {\r\n          this.form = res;\r\n          this.disabled = false;\r\n        })\r\n        .catch(error => {\r\n          this.$message.error(error.data.message);\r\n        });\r\n    }\r\n  },\r\n  mounted() {\r\n    if (this.$route.query.id) {\r\n      this.disabled = true;\r\n      this.getDetail(this.$route.query.id);\r\n    }\r\n  },\r\n  render() {\r\n    const self = this;\r\n    return (\r\n      <div class=\"le-main\">\r\n        <el-breadcrumb separator-class=\"el-icon-arrow-right\">\r\n          <el-breadcrumb-item>\r\n            <a href=\"javascript:history.back()\">参数模板</a>\r\n          </el-breadcrumb-item>\r\n          <el-breadcrumb-item>新增参数模板</el-breadcrumb-item>\r\n        </el-breadcrumb>\r\n        <el-form\r\n          props={{\r\n            model: self.form,\r\n            rules: self.rules\r\n          }}\r\n          class=\"le-card\"\r\n          ref=\"form\"\r\n          label-width=\"164px\"\r\n          v-loading={self.loading}>\r\n          <el-form-item label=\"参数模板名称\" prop=\"title\">\r\n            <el-input\r\n              maxlength=\"10\"\r\n              show-word-limit\r\n              v-model={self.form.title}\r\n              class=\"le-input--240\"\r\n              placeholder=\"请输入参数模板名称\"\r\n            />\r\n          </el-form-item>\r\n          <el-form-item label=\"参数内容\" prop=\"content\" class=\"le-content\">\r\n            {self.form.content.map((item, index, array) => {\r\n              return (\r\n                <div class=\"le-parameter\">\r\n                  <el-form-item label=\"参数名\" label-width=\"82px\" key={index + '_name'}>\r\n                    <el-input\r\n                      maxlength=\"8\"\r\n                      show-word-limit\r\n                      v-model={item.name}\r\n                      class=\"le-input--240\"\r\n                      placeholder=\"请输入参数名\"\r\n                    />\r\n                    <div class=\"le-prompt-text\">示例：语言种类</div>\r\n                  </el-form-item>\r\n                  <el-form-item label=\"参数值\" label-width=\"82px\" key={index + '_value'}>\r\n                    <el-input\r\n                      v-model={item.value}\r\n                      resize=\"none\"\r\n                      rows=\"5\"\r\n                      type=\"textarea\"\r\n                      class=\"le-input--600\"\r\n                      placeholder=\"请输入参数值\"\r\n                    />\r\n                    <div class=\"le-prompt-text\">建议参数值之间用“；”隔开，示例：汉语；英语；法语；德语</div>\r\n                  </el-form-item>\r\n                  {(() => {\r\n                    if (array.length !== 1) {\r\n                      return (\r\n                        <div\r\n                          class=\"le-deletion le-icon le-icon-cha2\"\r\n                          onClick={self.deletionParameter.bind(self, index)}\r\n                        />\r\n                      );\r\n                    }\r\n                  })()}\r\n                </div>\r\n              );\r\n            })}\r\n          </el-form-item>\r\n          <el-form-item>\r\n            <el-button onClick={self.pushParameter} plain={true}>\r\n              添加参数\r\n            </el-button>\r\n          </el-form-item>\r\n        </el-form>\r\n        <div class=\"le-cardpin\">\r\n          <el-button\r\n            type=\"primary\"\r\n            disabled={self.disabled}\r\n            loading={self.loading && !self.disabled}\r\n            onClick={self.submit}>\r\n            保存\r\n          </el-button>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped lang=\"scss\">\r\n.le-card {\r\n  margin-top: 24px;\r\n  padding-top: 40px;\r\n}\r\n.le-input--240 {\r\n  width: 240px;\r\n}\r\n.le-input--600 {\r\n  width: 600px;\r\n}\r\n.le-prompt-text {\r\n  margin-top: 5px;\r\n}\r\n.le-parameter {\r\n  width: 706px;\r\n  height: 244px;\r\n  background: #f3f5f7;\r\n  border-radius: 4px;\r\n  padding: 24px 0 0 0;\r\n  position: relative;\r\n  margin-bottom: 16px;\r\n  .le-deletion {\r\n    height: auto;\r\n    cursor: pointer;\r\n    position: absolute;\r\n    right: 0;\r\n    top: 0;\r\n    width: 16px;\r\n    transform: translate(50%, -50%);\r\n    opacity: 0;\r\n  }\r\n  &:hover {\r\n    .le-deletion {\r\n      opacity: 1;\r\n    }\r\n  }\r\n}\r\n/deep/ .le-content.el-form-item.is-error.is-required {\r\n  .el-input__inner,\r\n  .el-textarea__inner {\r\n    border-color: #dcdfe6 !important;\r\n  }\r\n}\r\n</style>\r\n","import mod from \"-!../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/_thread-loader@2.1.3@thread-loader/dist/cjs.js!../../../node_modules/_babel-loader@8.2.2@babel-loader/lib/index.js!../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/_vue-loader@15.9.7@vue-loader/lib/index.js??vue-loader-options!./parameterTemplateEdit.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/_thread-loader@2.1.3@thread-loader/dist/cjs.js!../../../node_modules/_babel-loader@8.2.2@babel-loader/lib/index.js!../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/_vue-loader@15.9.7@vue-loader/lib/index.js??vue-loader-options!./parameterTemplateEdit.vue?vue&type=script&lang=js&\"","export * from \"-!../../../node_modules/_mini-css-extract-plugin@0.9.0@mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/_css-loader@3.6.0@css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/_vue-loader@15.9.7@vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/_postcss-loader@3.0.0@postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/_sass-loader@7.3.1@sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/_vue-loader@15.9.7@vue-loader/lib/index.js??vue-loader-options!./parameterTemplateEdit.vue?vue&type=style&index=0&id=1acb526e&scoped=true&lang=scss&\""],"sourceRoot":""}
{"version":3,"sources":["webpack:///./src/pages/order/waybill.vue?d8e8","webpack:///./src/pages/order/helper.js","webpack:///./src/pages/order/api.js","webpack:///./src/pages/order/waybill.vue","webpack:///src/pages/order/waybill.vue","webpack:///./src/pages/order/waybill.vue?b640"],"names":["PAGE_HEADERS","transformPageHeaders","response","Object","keys","headers","forEach","item","toUpperCase","pagination","current","pageCount","totalCount","key","map","parseInt","service","Vue","prototype","$heshop","$message","waybillList","page","Promise","resolve","reject","waybill","then","data","catch","error","message","deleteWaybill","id","createWaybill","form","putWaybill","getArea","getDistrict","district","i","length","label","name","value","list","children","default","expressJson","search","include","keyword","code","is_waybill","waybillDetail","staticRenderFns","methods","getWaybillList","deleteBill","this","$confirm","editBill","$router","push","path","query","routerWaybillEdit","switchPage","number","openTutorials","mounted","render","component"],"mappings":"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","file":"js/order-waybill.51baef4d.js","sourcesContent":["export * from \"-!../../../node_modules/_mini-css-extract-plugin@0.9.0@mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/_css-loader@3.6.0@css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../node_modules/_vue-loader@15.9.7@vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/_postcss-loader@3.0.0@postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/_less-loader@5.0.0@less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/_vue-loader@15.9.7@vue-loader/lib/index.js??vue-loader-options!./waybill.vue?vue&type=style&index=0&id=f4a97aa2&scoped=true&lang=less&\"","const PAGE_HEADERS = [\r\n  'X-PAGINATION-TOTAL-COUNT',\r\n  'X-PAGINATION-PER-PAGE',\r\n  'X-PAGINATION-PAGE-COUNT',\r\n  'X-PAGINATION-CURRENT-PAGE'\r\n];\r\n\r\nexport function transformPageHeaders(response) {\r\n  Object.keys(response.headers).forEach(item => {\r\n    response.headers[item.toUpperCase()] = response.headers[item];\r\n    delete response.headers[item];\r\n  });\r\n  const pagination = {\r\n    current: 1,\r\n    pageCount: 1,\r\n    totalCount: 1\r\n  };\r\n  PAGE_HEADERS.forEach(key => {\r\n    Object.keys(response.headers).map(item => {\r\n      if (key === item) {\r\n        response.headers[item] = parseInt(response.headers[item]);\r\n      }\r\n    });\r\n  });\r\n  pagination.current = response.headers['X-PAGINATION-CURRENT-PAGE'];\r\n  pagination.pageCount = response.headers['X-PAGINATION-PAGE-COUNT'];\r\n  pagination.totalCount = response.headers['X-PAGINATION-TOTAL-COUNT'];\r\n  response.pagination = pagination;\r\n}\r\n","import Vue from 'vue';\r\nimport { transformPageHeaders } from './helper.js';\r\nconst service = Vue.prototype.$heshop;\r\nconst $message = Vue.prototype.$message;\r\n\r\n// 电子面单列表\r\nexport function waybillList(page = 1) {\r\n  return new Promise((resolve, reject) => {\r\n    service\r\n      .waybill('get')\r\n      .page(page, 5)\r\n      .then(response => {\r\n        transformPageHeaders(response);\r\n        const { data, pagination } = response;\r\n        resolve({\r\n          data: data,\r\n          pagination\r\n        });\r\n      })\r\n      .catch(error => {\r\n        reject(error);\r\n        $message(error.data.message);\r\n      });\r\n  });\r\n}\r\n\r\n// 删除电子面单\r\nexport function deleteWaybill(id) {\r\n  return new Promise(resolve => {\r\n    service\r\n      .waybill('delete', id)\r\n      .then(response => {\r\n        resolve(response);\r\n      })\r\n      .catch(error => {\r\n        $message(error.data.message);\r\n      });\r\n  });\r\n}\r\n\r\n// 新建电子面单\r\nexport function createWaybill(form = {}) {\r\n  return new Promise(resolve => {\r\n    service\r\n      .waybill('post', form)\r\n      .then(response => {\r\n        resolve(response);\r\n      })\r\n      .catch(error => {\r\n        $message(error.data.message);\r\n      });\r\n  });\r\n}\r\n\r\n// 更新电子面单\r\nexport function putWaybill(form = {}) {\r\n  return new Promise(resolve => {\r\n    service\r\n      .waybill('put', form)\r\n      .then(response => {\r\n        resolve(response);\r\n      })\r\n      .catch(error => {\r\n        $message(error.data.message);\r\n      });\r\n  });\r\n}\r\n\r\n// 获取地区\r\nexport function getArea() {\r\n  function getDistrict(district) {\r\n    for (let i = 0; i < district.length; i++) {\r\n      district[i].label = district[i].name;\r\n      district[i].value = district[i].name;\r\n      if (district[i].list) {\r\n        district[i].children = district[i].list;\r\n        getDistrict(district[i].children);\r\n      }\r\n    }\r\n  }\r\n  return new Promise(resolve => {\r\n    import('./components/district.json').then(response => {\r\n      getDistrict(response.default);\r\n      resolve(response.default);\r\n    });\r\n  });\r\n}\r\n\r\n// 获取物流公司列表\r\nexport function expressJson() {\r\n  return new Promise(resolve => {\r\n    service\r\n      .search('post', { include: 'setting' }, { keyword: 'expressjson' })\r\n      .then(response => {\r\n        response = response.map(item => {\r\n          return { value: item.name, label: item.code, is_waybill: item.is_waybill };\r\n        });\r\n        resolve(response);\r\n      })\r\n      .catch(error => {\r\n        $message(error.data.message);\r\n      });\r\n  });\r\n}\r\n\r\n// 获取电子面单详情\r\nexport function waybillDetail(id) {\r\n  return new Promise(resolve => {\r\n    service\r\n      .waybill('get', id)\r\n      .then(response => {\r\n        resolve(response);\r\n      })\r\n      .catch(error => {\r\n        $message(error.data.message);\r\n      });\r\n  });\r\n}\r\n","var render, staticRenderFns\nimport script from \"./waybill.vue?vue&type=script&lang=js&\"\nexport * from \"./waybill.vue?vue&type=script&lang=js&\"\nimport style0 from \"./waybill.vue?vue&type=style&index=0&id=f4a97aa2&scoped=true&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/_vue-loader@15.9.7@vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"f4a97aa2\",\n  null\n  \n)\n\nexport default component.exports","<script>\r\nimport { deleteWaybill, waybillList } from './api.js';\r\n\r\nexport default {\r\n  name: 'waybill',\r\n  data() {\r\n    return {\r\n      list: [],\r\n      pagination: {\r\n        current: 1,\r\n        pageCount: 1\r\n      }\r\n    };\r\n  },\r\n  methods: {\r\n    getWaybillList() {\r\n      waybillList(this.pagination.current).then(response => {\r\n        this.list = response.data;\r\n        this.pagination = response.pagination;\r\n      });\r\n    },\r\n    deleteBill(item, index) {\r\n      this.$confirm('发货信息删除请谨慎操作，确定删除？', '提示')\r\n        .then(() => {\r\n          deleteWaybill(item.id).then(() => {\r\n            console.log('1');\r\n            this.$delete(this.list, index);\r\n            console.log(this.list);\r\n            console.log(this.pagination);\r\n            if (this.list.length === 0) {\r\n              if (this.pagination.current > 1) {\r\n                this.pagination.current -= 1;\r\n                this.getWaybillList();\r\n              }\r\n            }\r\n          });\r\n        })\r\n        .catch(() => {\r\n          // Don't do\r\n        });\r\n    },\r\n    editBill(item) {\r\n      this.$router.push({\r\n        path: '/order/waybill-edit',\r\n        query: {\r\n          id: item.id\r\n        }\r\n      });\r\n    },\r\n    routerWaybillEdit() {\r\n      this.$router.push({\r\n        path: '/order/waybill-edit'\r\n      });\r\n    },\r\n    switchPage(number) {\r\n      this.pagination.current = number;\r\n      this.getWaybillList();\r\n    },\r\n    openTutorials() {\r\n      this.$confirm('电子面单使用教程', {\r\n        message: '<div>123</div>'\r\n      });\r\n    }\r\n  },\r\n  mounted() {\r\n    this.getWaybillList();\r\n  },\r\n  render() {\r\n    const self = this;\r\n    return (\r\n      <div class=\"le-main\">\r\n        <div class=\"le-prompt\">\r\n          温馨提示：如需打印电子面单，请安装云打印。\r\n          <el-button\r\n            onClick={() => {\r\n              window.open('https://kbydy.cn/CloudPrint/intro');\r\n            }}\r\n            type=\"text\">\r\n            安装教程\r\n          </el-button>\r\n          <br />\r\n          温馨提示：必看\r\n          <el-button\r\n            type=\"text\"\r\n            {...{\r\n              directives: [\r\n                {\r\n                  name: 'popup',\r\n                  modifiers: {\r\n                    waybillTutorials: true\r\n                  }\r\n                }\r\n              ]\r\n            }}\r\n            width=\"680\"\r\n            hide_cancel={true}\r\n            title=\"电子面单使用教程\"\r\n            module=\"order\">\r\n            《电子面单使用教程》\r\n          </el-button>\r\n          <br />\r\n          当前支持电子面单的快递公司：申通快递、中通快递、圆通快递、韵达快递、百世快递、德邦、EMS、邮政快递包裹、优速快递、速尔快递、丰网速运、众邮快递、品骏、京广快递、极兔速递、顺丰速运\r\n        </div>\r\n        <el-button type=\"primary\" onClick={self.routerWaybillEdit}>\r\n          新增发货信息\r\n        </el-button>\r\n        <div class=\"le-card le-table\">\r\n          <el-table data={self.list} cell-class-name=\"le-table-row\" header-row-class-name=\"le-table-header\">\r\n            <el-table-column label=\"快递公司\" prop=\"company_name\" />\r\n            <el-table-column\r\n              label=\"发货人信息\"\r\n              scopedSlots={{\r\n                default: scope => {\r\n                  const { name, mobile, province, city, district, address } = scope.row;\r\n                  return [\r\n                    [<div>姓名： {name}</div>],\r\n                    [<div>联系方式：{mobile}</div>],\r\n                    [\r\n                      <div>\r\n                        地址：{province}\r\n                        {city}\r\n                        {district}\r\n                        {address}\r\n                      </div>\r\n                    ]\r\n                  ];\r\n                }\r\n              }}\r\n            />\r\n            <el-table-column\r\n              label=\"操作\"\r\n              scopedSlots={{\r\n                default: scope => {\r\n                  return (\r\n                    <div class=\"le-table--operating flex align-center\">\r\n                      <el-button type=\"text\" onClick={self.editBill.bind(self, scope.row)}>\r\n                        编辑\r\n                      </el-button>\r\n                      <span class=\"le-operating--line\" />\r\n                      <el-button type=\"text\" onClick={self.deleteBill.bind(self, scope.row, scope.$index)}>\r\n                        删除\r\n                      </el-button>\r\n                    </div>\r\n                  );\r\n                }\r\n              }}\r\n            />\r\n          </el-table>\r\n          <div class=\"le-pagination flex justify-end\">\r\n            <el-pagination\r\n              background={true}\r\n              current-page={self.pagination.current}\r\n              page-count={self.pagination.pageCount}\r\n              on-current-change={self.switchPage}\r\n              layout=\"prev, pager, next, jumper\"\r\n            />\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped lang=\"less\">\r\n.le-prompt {\r\n  padding: 15px 24px 15px 24px;\r\n  background: #fff5d1;\r\n  border-radius: 8px;\r\n  font-size: 12px;\r\n  font-family: Microsoft YaHei;\r\n  font-weight: 400;\r\n  color: #595959;\r\n  line-height: 18px;\r\n  margin-bottom: 24px;\r\n  .el-button {\r\n    padding: 0;\r\n  }\r\n}\r\n.le-card {\r\n  margin-top: 24px;\r\n}\r\n.le-table::v-deep {\r\n  .le-table-row {\r\n    height: 92px;\r\n    font-size: 14px;\r\n    font-family: Microsoft YaHei;\r\n    font-weight: 400;\r\n    color: #262626;\r\n    line-height: 20px;\r\n    .cell {\r\n      padding-left: 10px;\r\n    }\r\n  }\r\n}\r\n.le-table--operating {\r\n  .el-button--text:first-child {\r\n    padding-left: 0;\r\n  }\r\n}\r\n</style>\r\n","import mod from \"-!../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/_thread-loader@2.1.3@thread-loader/dist/cjs.js!../../../node_modules/_babel-loader@8.2.2@babel-loader/lib/index.js!../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/_vue-loader@15.9.7@vue-loader/lib/index.js??vue-loader-options!./waybill.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/_thread-loader@2.1.3@thread-loader/dist/cjs.js!../../../node_modules/_babel-loader@8.2.2@babel-loader/lib/index.js!../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/_vue-loader@15.9.7@vue-loader/lib/index.js??vue-loader-options!./waybill.vue?vue&type=script&lang=js&\""],"sourceRoot":""}
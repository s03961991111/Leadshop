(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["promoter-pages-create-dynamic"],{"3d1e":function(t,e,n){"use strict";var i=n("6250"),a=n.n(i);a.a},"3ec6":function(t,e,n){"use strict";n.r(e);var i=n("90cc"),a=n("58d0");for(var o in a)["default"].indexOf(o)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(o);n("5fbc");var r,c=n("5d80"),s=Object(c["a"])(a["default"],i["b"],i["c"],!1,null,"0caa3277",null,!1,i["a"],r);e["default"]=s.exports},"45b6":function(t,e,n){"use strict";var i=n("99ca").default;Object.defineProperty(e,"__esModule",{value:!0}),e.goods=c,e.promotermaterial=s,e.promotermaterialShare=d,e.recruit=u,e.useAgreement=l,e.agreement=h,e.receiveRecruitToken=f,e.applyMonitoring=p,e.applyPromoter=v,e.personalCenter=m,e.applyAudit=g,e.promoterzone=y,e.dynamicLike=b,e.dynamicDel=w,e.publishDynamic=_,e.dynamicDetail=x,e.dynamicEdit=k,e.searchGoods=P,e.promoterlevel=C,e.promoterorderList=E,e.promoterOrderCount=L,e.promoterChildList=O,e.promoterChildCount=$,e.rankList=z,e.finance=N,e.financeList=T,e.userDetail=S,n("f9ee"),n("c342"),n("211d"),n("ba85");var a=i(n("910f")),o=n("765d"),r=a.default.prototype.$heshop;function c(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{search:"",sort_key:"created_time",sort_value:"ASC"},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10;return new Promise((function(i,a){r.promotergoods("get",e).page(t,n).then((function(t){(0,o.transformPageHeaders)(t);var e=t.data,n=t.pagination;i({data:e,pagination:n})})).catch(a)}))}function s(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:10;return new Promise((function(a,c){r.promotermaterial("get",{type:e,content:n}).page(t,i).then((function(t){(0,o.transformPageHeaders)(t);var e=t.data,n=t.pagination;a({data:e,pagination:n})})).catch(c)}))}function d(t){return new Promise((function(e,n){r.promotermaterial("post",{id:t},{}).then(e).catch(n)}))}function u(){return new Promise((function(t,e){r.search("post",{include:"setting"},{keyword:"promoter_recruit_make"}).then((function(e){t(e.content)})).catch(e)}))}function l(){return new Promise((function(t,e){r.search("post",{include:"setting"},{keyword:"promoter_setting",content_key:"use_agreement"}).then(t).catch(e)}))}function h(){return new Promise((function(t,e){r.search("post",{include:"setting"},{keyword:"promoter_setting"}).then((function(e){var n=e.content,i=n.agreement_content,a=n.agreement_title;t({agreement_content:i,agreement_title:a})})).catch(e)}))}function f(t){return new Promise((function(e,n){r.promoter("get",{behavior:"recruiting",invite_id:t}).then(e).catch(n)}))}function p(){return new Promise((function(t,e){r.promoter("get",{behavior:"apply_check"}).then(t).catch(e)}))}function v(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return new Promise((function(e,n){r.promoter("post",{apply_content:t}).then(e).catch(n)}))}function m(){return new Promise((function(t,e){r.promoter("get").then(t).catch(e)}))}function g(){return new Promise((function(t,e){r.promoter("get",{behavior:"apply_audit"}).then(t).catch(e)}))}function y(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1?arguments[1]:void 0;return new Promise((function(n,i){r.promoterzone("get",{UID:e}).page(t,10).then((function(t){(0,o.transformPageHeaders)(t);var e=t.data,i=t.pagination;n({data:e,pagination:i})})).catch(i)}))}function b(t){return new Promise((function(e,n){r.promoterzone("post",{behavior:"vote"},{zone_id:t}).then(e).then(n)}))}function w(t){return new Promise((function(e,n){r.promoterzone("delete",t).then(e).then(n)}))}function _(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new Promise((function(e,n){r.promoterzone("post",t).then(e).catch(n)}))}function x(t){return t=parseInt(t),new Promise((function(e,n){r.promoterzone("get",t).then(e).catch(n)}))}function k(t,e){return t=parseInt(t),new Promise((function(n,i){r.promoterzone("put",t,e).then(n).catch(i)}))}function P(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise((function(n,i){r.search("post",{include:"goods"},{keyword:e}).page(t,10).then((function(t){(0,o.transformPageHeaders)(t);var e=t.data,i=t.pagination;n({data:e,pagination:i})})).catch(i)}))}function C(){return new Promise((function(t,e){r.promoterlevel("get").then(t).catch(e)}))}function E(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1?arguments[1]:void 0,n=e.time_type,i=void 0===n?"all":n,a=e.time_start,c=void 0===a?"":a,s=e.time_end,d=void 0===s?"":s;return new Promise((function(e,n){r.promoterorder("get",{time_type:i,time_start:c,time_end:d}).page(t,10).then((function(t){(0,o.transformPageHeaders)(t);var n=t.data,i=t.pagination;e({data:n,pagination:i})})).catch(n)}))}function L(t){var e=t.time_type,n=void 0===e?"all":e,i=t.time_start,a=void 0===i?"":i,o=t.time_end,c=void 0===o?"":o;return new Promise((function(t,e){r.promoterorder("get",{time_type:n,time_start:a,time_end:c,behavior:"count"}).then(t).catch(e)}))}function O(t,e){return new Promise((function(n,i){r.promoter("post",{behavior:"search"},{parent:e}).page(t,10).then((function(t){(0,o.transformPageHeaders)(t);var e=t.data,i=t.pagination;n({data:e,pagination:i})})).catch(i)}))}function $(){return new Promise((function(t,e){r.promoter("post",{behavior:"tab"},{}).then(t).catch(e)}))}function z(t){var e=t.ranking_dimension,n=void 0===e?"":e,i=t.ranking_time,a=void 0===i?1:i;return new Promise((function(t,e){r.rank("get",{ranking_dimension:n,ranking_time:a}).then((function(e){t(e)})).catch(e)}))}function N(t){var e=t.price,n=void 0===e?"":e,i=t.type,a=void 0===i?null:i,o=t.extra,c=void 0===o?{}:o;return new Promise((function(t,e){r.finance("post",{model:"promoter"},{price:n,type:a,extra:c}).then(t).catch(e)}))}function T(t,e){var n=e.model,i=void 0===n?"promoter":n,a=e.status,o=void 0===a?null:a,c=e.first_day,s=void 0===c?null:c,d={model:i,status:o};return s&&(d.first_day=s),new Promise((function(t,e){r.finance("get",d).then(t).catch(e)}))}function S(t){return new Promise((function(e,n){r.users("get",{behavior:"simple_info",UID:t}).then(e).catch(n)}))}},4680:function(t,e,n){var i=n("a1a8");e=i(!1),e.push([t.i,".he-item[data-v-0caa3277]{width:%?150?%;height:%?150?%;margin:0 %?20?% %?20?% 0;background:#f4f5f6;position:relative;border-radius:%?8?%}uni-video[data-v-0caa3277]{width:%?150?%;height:%?150?%}.he-delete-icon[data-v-0caa3277]{position:absolute;top:0;right:0;z-index:10;\r\n  /*width: 60px;*/\r\n  /*height: 60px;*/padding:%?16?%;-webkit-transform:translate(50%,-50%);transform:translate(50%,-50%);font-size:%?28?%;color:#f5212d}.he-preview-image[data-v-0caa3277]{width:100%;height:100%;border-radius:%?8?%;display:block}.iconshipin[data-v-0caa3277]{color:#666;width:%?48?%;height:%?48?%;font-size:%?48?%;margin-bottom:%?5?%}.he-add-text[data-v-0caa3277]{font-size:%?22?%;font-family:PingFang SC;font-weight:500;color:#666;margin-top:%?5?%}.he-loading[data-v-0caa3277]{width:100%;height:100%;font-size:%?28?%;font-family:PingFang SC;font-weight:500;color:#fff;text-align:center}.he-loading__image[data-v-0caa3277]{width:%?96?%;height:%?96?%;margin-top:%?52?%;margin-bottom:%?40?%}.image-cover[data-v-0caa3277]{width:%?150?%;height:%?150?%}.play[data-v-0caa3277]{width:%?52?%;height:%?52?%;position:absolute;top:50%;left:50%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%)}",""]),t.exports=e},"4ca2":function(t,e,n){"use strict";n.r(e);var i=n("8cd6"),a=n.n(i);for(var o in i)["default"].indexOf(o)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(o);e["default"]=a.a},"58d0":function(t,e,n){"use strict";n.r(e);var i=n("9e88"),a=n.n(i);for(var o in i)["default"].indexOf(o)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(o);e["default"]=a.a},"5fbc":function(t,e,n){"use strict";var i=n("8019"),a=n.n(i);a.a},6250:function(t,e,n){var i=n("9bb3");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var a=n("5c0d").default;a("660ed448",i,!0,{sourceMap:!1,shadowMode:!1})},"765d":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.transformPageHeaders=a,n("cf00"),n("cd8f"),n("5eab"),n("7423"),n("ba85");var i=["X-PAGINATION-TOTAL-COUNT","X-PAGINATION-PER-PAGE","X-PAGINATION-PAGE-COUNT","X-PAGINATION-CURRENT-PAGE"];function a(t){Object.keys(t.headers).forEach((function(e){t.headers[e.toUpperCase()]=t.headers[e],delete t.headers[e]}));var e={current:1,pageCount:1,totalCount:1};i.forEach((function(e){Object.keys(t.headers).map((function(n){e===n&&(t.headers[n]=parseInt(t.headers[n]))}))})),e.current=t.headers["X-PAGINATION-CURRENT-PAGE"],e.pageCount=t.headers["X-PAGINATION-PAGE-COUNT"],e.totalCount=t.headers["X-PAGINATION-TOTAL-COUNT"],t.pagination=e}},8019:function(t,e,n){var i=n("4680");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var a=n("5c0d").default;a("9ead08b4",i,!0,{sourceMap:!1,shadowMode:!1})},"80d3":function(t,e,n){"use strict";n.r(e);var i=n("bc49"),a=n("4ca2");for(var o in a)["default"].indexOf(o)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(o);n("3d1e");var r,c=n("5d80"),s=Object(c["a"])(a["default"],i["b"],i["c"],!1,null,"66fa29bc",null,!1,i["a"],r);e["default"]=s.exports},"8cd6":function(t,e,n){"use strict";var i=n("99ca").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,n("b5aa"),n("5c5d"),n("7423");var a=i(n("e9ff")),o=i(n("06c4")),r=i(n("382c")),c=i(n("3ec6")),s=n("7736"),d=n("45b6"),u={name:"create-dynamic",components:{heUploadImage:r.default,heUploadVideo:c.default},data:function(){return{content:"",pic_list:[],link:{param:null},id:null,type:1,video_cover:"",video_list:{url:"",cover:""}}},computed:(0,o.default)((0,o.default)({},(0,s.mapGetters)("setting",{getPicLimit:"getPicLimit",getVideoLimit:"getVideoLimit"})),{},{submitDisabled:function(t){var e=t.content,n=t.$h;return n.test.isEmpty(e)},switchStyle:function(t){var e=t.type;return 1===e?{transform:"translateX(0)"}:{transform:"translateX(142rpx)"}},switchItemStyle:function(t){var e=t.type;return 2===e?{transform:"translateX(-142rpx)"}:{transform:"translateX(0)"}}}),methods:{removeImage:function(t){this.pic_list.slice(t,1),this.$delete(this.pic_list,t)},uploaded:function(t){this.pic_list=t.map((function(t){return t.response}))},uploadVideoCover:function(t){this.video_cover=t[0].response},removeVideoCover:function(){this.video_cover=""},publishDynamic:function(){var t=this;return(0,a.default)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(e.prev=0,!t.id){e.next=8;break}return e.next=4,(0,d.dynamicEdit)(t.id,{content:t.content,pic_list:t.pic_list,video_list:t.video_list,video_cover:t.video_cover,link:t.link,type:t.type});case 4:uni.$emit("update"),uni.navigateBack({delta:1}),e.next=12;break;case 8:return e.next=10,(0,d.publishDynamic)({content:t.content,pic_list:t.pic_list,video_list:t.video_list,video_cover:t.video_cover,link:t.link,type:t.type});case 10:uni.$emit("update"),uni.navigateBack({delta:1});case 12:e.next=16;break;case 14:e.prev=14,e.t0=e["catch"](0);case 16:case"end":return e.stop()}}),e,null,[[0,14]])})))()},setTextarea:function(t){this.content=t.detail.value},routerDynamicGoods:function(){uni.navigateTo({url:"/promoter/pages/dynamic-goods"})},switchType:function(){1===this.type?this.type=2:this.type=1},removeVideo:function(){this.video_list={url:"",cover:""}},successVideo:function(t){this.video_list={url:t.video,cover:""}}},onShow:function(){var t=uni.getStorageSync(this.$storageKey.dynamic_goods);t&&(this.link=t,uni.removeStorageSync(this.$storageKey.dynamic_goods))},onLoad:function(t){var e=this;return(0,a.default)(regeneratorRuntime.mark((function n(){var i,a,r,c,s,u,l,h,f,p,v,m,g,y;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(!t.id){n.next=22;break}return n.prev=1,e.id=t.id,n.next=5,(0,d.dynamicDetail)(t.id);case 5:i=n.sent,a=i.content,r=i.pic_list,c=i.link,s=i.type,u=i.video_list,l=i.video_cover,e.type=s,e.content=a,e.link=c?JSON.parse(c):c,1===e.type?(e.pic_list=r,e.$nextTick((function(){e.$refs.uploadImage.lists=r.map((function(t){return{url:t,response:t}}))}))):(u=JSON.parse(u),e.video_list=u,e.video_cover=l,e.$nextTick((function(){e.$refs.uploadVideo.video=u.url,l&&(e.$refs.uploadCover.lists=[{url:l,response:l}])}))),n.next=20;break;case 18:n.prev=18,n.t0=n["catch"](1);case 20:n.next=23;break;case 22:t.data&&(h=JSON.parse(t.data),f=h.pic_list,p=h.content,v=h.type,m=h.video_cover,g=h.video_list,y=h.goods,e.type=v,e.content=p,1===v?(e.pic_list=f,e.$nextTick((function(){e.$refs.uploadImage.lists=f.map((function(t){return{url:t,response:t}}))}))):(e.video_list=g,e.video_cover=m,e.$nextTick((function(){e.$refs.uploadVideo.video=g.url,m&&(e.$refs.uploadCover.lists=[{url:m,response:m}])}))),e.$h.test.isEmpty(y)||uni.setStorageSync(e.$storageKey.dynamic_goods,{extend:!0,index:2,name:"单一商品",param:(0,o.default)((0,o.default)({},y),{},{slideshow:JSON.parse(y.slideshow)}),path:"/pages/goods/detail"}));case 23:case"end":return n.stop()}}),n,null,[[1,18]])})))()}};e.default=u},"90cc":function(t,e,n){"use strict";var i;n.d(e,"b",(function(){return a})),n.d(e,"c",(function(){return o})),n.d(e,"a",(function(){return i}));var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-uni-view",{},[t.video?n("v-uni-view",{staticClass:"he-item"},[n("v-uni-cover-view",{staticClass:"he-delete-icon iconfont iconevaluate_uploadpictures_deleto",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.remove.apply(void 0,arguments)}}}),n("v-uni-video",{attrs:{id:"myVideo",controls:!1,src:t.video,"show-center-play-btn":!1},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.play.apply(void 0,arguments)}}}),t.isPlay?t._e():n("v-uni-image",{staticClass:"play",attrs:{src:t.ipAddress+"/play.png"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.play.apply(void 0,arguments)}}})],1):t._e(),t.video?t._e():n("v-uni-button",{staticClass:"cu-btn he-item flex flex-direction justify-center align-center",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.chooseVideo.apply(void 0,arguments)}}},[n("v-uni-view",{staticClass:"iconfont iconshipin"}),n("v-uni-view",{staticClass:"he-add-text"},[t._v("添加视频")])],1),n("he-toast",{model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},[n("v-uni-view",{staticClass:"he-loading flex flex-direction align-center"},[n("v-uni-image",{staticClass:"he-loading__image",attrs:{src:t.ipAddress+"/upload-loading.gif"}}),n("v-uni-text",[t._v("视频上传中...")])],1)],1)],1)},o=[]},"9bb3":function(t,e,n){var i=n("a1a8");e=i(!1),e.push([t.i,'@charset "UTF-8";\n/* start--主题色--start */\n/* end--主题色--end */.font-family-sc[data-v-66fa29bc], .content .he-area__num[data-v-66fa29bc], .image .he-top[data-v-66fa29bc], .goods .add-goods[data-v-66fa29bc], .item-name[data-v-66fa29bc], .item-price[data-v-66fa29bc], .item-change[data-v-66fa29bc], .he-tip[data-v-66fa29bc], .publish-dynamic[data-v-66fa29bc]{font-family:PingFang SC}.font-family-din[data-v-66fa29bc]{font-family:DIN}.he-card[data-v-66fa29bc]{background-color:#fff;padding:%?32?%;border-radius:%?16?%;margin-bottom:%?16?%}.iconbtn_arrow[data-v-66fa29bc]{font-size:%?18?%;color:#bebebe}[data-v-66fa29bc] .input-placeholder{font-family:PingFang SC;font-size:%?26?%;font-weight:500;color:#999}.he-page-content[data-v-66fa29bc]{padding:%?20?%}.content[data-v-66fa29bc]{padding:%?24?%}.content .he-textarea[data-v-66fa29bc]{width:%?662?%;height:%?280?%}.content .he-area__num[data-v-66fa29bc]{font-size:%?24?%;font-weight:500;color:#999;line-height:1.1;text-align:right}.image[data-v-66fa29bc]{padding:0 0 %?24?% %?24?%}.image .he-top[data-v-66fa29bc]{height:%?72?%;line-height:%?72?%;font-size:%?26?%;font-weight:500}.image .he-top .he-title[data-v-66fa29bc]{color:#222}.image .he-top .he-number[data-v-66fa29bc]{color:#999;margin-left:%?15?%}.he-switch[data-v-66fa29bc]{height:%?56?%;width:%?284?%;background:#f5f5f5;border-radius:%?28?%;margin-bottom:%?32?%}.he-switch .switch-item[data-v-66fa29bc]{width:%?142?%;height:%?54?%;line-height:%?52?%;background:#fff;border:%?1?% solid transparent;border-radius:%?28?%;font-size:%?24?%;font-family:PingFang SC;font-weight:500;text-align:center;-webkit-transform:translateX(%?142?%);transform:translateX(%?142?%);-webkit-transition-duration:.2s;transition-duration:.2s;position:relative;z-index:10}[data-theme="red_theme"] .he-switch .switch-item[data-v-66fa29bc]{border-color:#e60b30!important}[data-theme="purple_theme"] .he-switch .switch-item[data-v-66fa29bc]{border-color:#8f2df3!important}[data-theme="blue_theme"] .he-switch .switch-item[data-v-66fa29bc]{border-color:#33a7ff!important}[data-theme="green_theme"] .he-switch .switch-item[data-v-66fa29bc]{border-color:#1fc551!important}[data-theme="orange_theme"] .he-switch .switch-item[data-v-66fa29bc]{border-color:#ff7f00!important}[data-theme="golden_theme"] .he-switch .switch-item[data-v-66fa29bc]{border-color:#caa45a!important}[data-theme="red_theme"] .he-switch .switch-item[data-v-66fa29bc]{color:#e60b30!important}[data-theme="purple_theme"] .he-switch .switch-item[data-v-66fa29bc]{color:#8f2df3!important}[data-theme="blue_theme"] .he-switch .switch-item[data-v-66fa29bc]{color:#33a7ff!important}[data-theme="green_theme"] .he-switch .switch-item[data-v-66fa29bc]{color:#1fc551!important}[data-theme="orange_theme"] .he-switch .switch-item[data-v-66fa29bc]{color:#ff7f00!important}[data-theme="golden_theme"] .he-switch .switch-item[data-v-66fa29bc]{color:#caa45a!important}.he-switch .item[data-v-66fa29bc]{width:%?142?%;height:%?54?%;line-height:%?52?%;font-size:%?24?%;font-family:PingFang SC;font-weight:500;text-align:center;color:#666}.goods[data-v-66fa29bc]{padding:%?24?%}.goods .iconpersonalcenter_add[data-v-66fa29bc]{font-size:%?28?%;color:#d7d7d7;margin-right:%?18?%}.goods .iconbtn_arrow[data-v-66fa29bc]{font-size:%?20?%;color:#bebebe}.goods .add-goods[data-v-66fa29bc]{font-size:%?28?%;font-weight:500;color:#222;line-height:%?36?%}.item-content[data-v-66fa29bc]{width:%?420?%;height:%?100?%;margin-left:%?24?%}.item-name[data-v-66fa29bc]{font-size:%?26?%;font-weight:500;color:#222;line-height:%?48?%}.item-price[data-v-66fa29bc]{font-size:%?22?%;font-weight:500;color:#999;line-height:%?40?%}.item-change[data-v-66fa29bc]{height:%?100?%;line-height:%?100?%;font-size:%?22?%;font-weight:500;color:#999;padding-left:%?45?%}.he-tip[data-v-66fa29bc]{font-size:%?22?%;font-weight:500;color:#999}.publish-dynamic[data-v-66fa29bc]{margin-top:%?80?%;width:100%;height:%?80?%;font-size:%?28?%;font-weight:500;color:#fff;border-radius:%?40?%}[data-theme="red_theme"] .publish-dynamic[data-v-66fa29bc]{background-color:#e60b30!important}[data-theme="purple_theme"] .publish-dynamic[data-v-66fa29bc]{background-color:#8f2df3!important}[data-theme="blue_theme"] .publish-dynamic[data-v-66fa29bc]{background-color:#33a7ff!important}[data-theme="green_theme"] .publish-dynamic[data-v-66fa29bc]{background-color:#1fc551!important}[data-theme="orange_theme"] .publish-dynamic[data-v-66fa29bc]{background-color:#ff7f00!important}[data-theme="golden_theme"] .publish-dynamic[data-v-66fa29bc]{background-color:#caa45a!important}.publish-dynamic[disabled][data-v-66fa29bc]{background:#ccc!important;color:#fff}',""]),t.exports=e},"9e88":function(t,e,n){"use strict";var i=n("99ca").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,n("4cfc");var a=i(n("7ab1")),o={name:"he-upload-video",components:{heToast:a.default},props:{maxSize:{type:[String,Number],default:function(){return 2097152}}},data:function(){return{video:null,loading:!1,cover:"",videoContext:null,isPlay:!1}},mounted:function(){this.videoContext=uni.createVideoContext("myVideo",this)},methods:{chooseVideo:function(){var t=this;uni.chooseVideo({count:1,sourceType:["camera","album"],success:function(e){e.size>t.maxSize&&t.maxSize>0?t.$h.toast("超出允许的文件大小"):(t.loading=!0,t.$heshop.uploadVideo(e.tempFilePath).then((function(e){t.video=e,t.videoContext=uni.createVideoContext("myVideo",t),t.loading=!1,t.$emit("on-success",{video:e})})))}})},remove:function(){this.video=null,this.$emit("on-remove")},play:function(){this.isPlay?(this.videoContext.pause(),this.isPlay=!1):(this.videoContext.play(),this.isPlay=!0)}}};e.default=o},b5aa:function(t,e){!function(e){"use strict";var n,i=Object.prototype,a=i.hasOwnProperty,o="function"===typeof Symbol?Symbol:{},r=o.iterator||"@@iterator",c=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag",d="object"===typeof t,u=e.regeneratorRuntime;if(u)d&&(t.exports=u);else{u=e.regeneratorRuntime=d?t.exports:{},u.wrap=w;var l="suspendedStart",h="suspendedYield",f="executing",p="completed",v={},m={};m[r]=function(){return this};var g=Object.getPrototypeOf,y=g&&g(g(T([])));y&&y!==i&&a.call(y,r)&&(m=y);var b=P.prototype=x.prototype=Object.create(m);k.prototype=b.constructor=P,P.constructor=k,P[s]=k.displayName="GeneratorFunction",u.isGeneratorFunction=function(t){var e="function"===typeof t&&t.constructor;return!!e&&(e===k||"GeneratorFunction"===(e.displayName||e.name))},u.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,P):(t.__proto__=P,s in t||(t[s]="GeneratorFunction")),t.prototype=Object.create(b),t},u.awrap=function(t){return{__await:t}},C(E.prototype),E.prototype[c]=function(){return this},u.AsyncIterator=E,u.async=function(t,e,n,i){var a=new E(w(t,e,n,i));return u.isGeneratorFunction(e)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},C(b),b[s]="Generator",b[r]=function(){return this},b.toString=function(){return"[object Generator]"},u.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){while(e.length){var i=e.pop();if(i in t)return n.value=i,n.done=!1,n}return n.done=!0,n}},u.values=T,N.prototype={constructor:N,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=n,this.done=!1,this.delegate=null,this.method="next",this.arg=n,this.tryEntries.forEach(z),!t)for(var e in this)"t"===e.charAt(0)&&a.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=n)},stop:function(){this.done=!0;var t=this.tryEntries[0],e=t.completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function i(i,a){return c.type="throw",c.arg=t,e.next=i,a&&(e.method="next",e.arg=n),!!a}for(var o=this.tryEntries.length-1;o>=0;--o){var r=this.tryEntries[o],c=r.completion;if("root"===r.tryLoc)return i("end");if(r.tryLoc<=this.prev){var s=a.call(r,"catchLoc"),d=a.call(r,"finallyLoc");if(s&&d){if(this.prev<r.catchLoc)return i(r.catchLoc,!0);if(this.prev<r.finallyLoc)return i(r.finallyLoc)}else if(s){if(this.prev<r.catchLoc)return i(r.catchLoc,!0)}else{if(!d)throw new Error("try statement without catch or finally");if(this.prev<r.finallyLoc)return i(r.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&a.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var r=o?o.completion:{};return r.type=t,r.arg=e,o?(this.method="next",this.next=o.finallyLoc,v):this.complete(r)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),z(n),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var i=n.completion;if("throw"===i.type){var a=i.arg;z(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,i){return this.delegate={iterator:T(t),resultName:e,nextLoc:i},"next"===this.method&&(this.arg=n),v}}}function w(t,e,n,i){var a=e&&e.prototype instanceof x?e:x,o=Object.create(a.prototype),r=new N(i||[]);return o._invoke=L(t,n,r),o}function _(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(i){return{type:"throw",arg:i}}}function x(){}function k(){}function P(){}function C(t){["next","throw","return"].forEach((function(e){t[e]=function(t){return this._invoke(e,t)}}))}function E(t){function e(n,i,o,r){var c=_(t[n],t,i);if("throw"!==c.type){var s=c.arg,d=s.value;return d&&"object"===typeof d&&a.call(d,"__await")?Promise.resolve(d.__await).then((function(t){e("next",t,o,r)}),(function(t){e("throw",t,o,r)})):Promise.resolve(d).then((function(t){s.value=t,o(s)}),(function(t){return e("throw",t,o,r)}))}r(c.arg)}var n;function i(t,i){function a(){return new Promise((function(n,a){e(t,i,n,a)}))}return n=n?n.then(a,a):a()}this._invoke=i}function L(t,e,n){var i=l;return function(a,o){if(i===f)throw new Error("Generator is already running");if(i===p){if("throw"===a)throw o;return S()}n.method=a,n.arg=o;while(1){var r=n.delegate;if(r){var c=O(r,n);if(c){if(c===v)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(i===l)throw i=p,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i=f;var s=_(t,e,n);if("normal"===s.type){if(i=n.done?p:h,s.arg===v)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(i=p,n.method="throw",n.arg=s.arg)}}}function O(t,e){var i=t.iterator[e.method];if(i===n){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=n,O(t,e),"throw"===e.method))return v;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return v}var a=_(i,t.iterator,e.arg);if("throw"===a.type)return e.method="throw",e.arg=a.arg,e.delegate=null,v;var o=a.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=n),e.delegate=null,v):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,v)}function $(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function z(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function N(t){this.tryEntries=[{tryLoc:"root"}],t.forEach($,this),this.reset(!0)}function T(t){if(t){var e=t[r];if(e)return e.call(t);if("function"===typeof t.next)return t;if(!isNaN(t.length)){var i=-1,o=function e(){while(++i<t.length)if(a.call(t,i))return e.value=t[i],e.done=!1,e;return e.value=n,e.done=!0,e};return o.next=o}}return{next:S}}function S(){return{value:n,done:!0}}}(function(){return this||"object"===typeof self&&self}()||Function("return this")())},bc49:function(t,e,n){"use strict";var i;n.d(e,"b",(function(){return a})),n.d(e,"c",(function(){return o})),n.d(e,"a",(function(){return i}));var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-uni-view",{staticClass:"he-page-content",attrs:{"data-theme":t.theme}},[n("v-uni-view",{staticClass:"he-card content"},[n("v-uni-textarea",{staticClass:"he-textarea",attrs:{value:t.content,placeholder:"请输入动态内容","disable-default-padding":!0,"hold-keyboard":!0},on:{input:function(e){arguments[0]=e=t.$handleEvent(e),t.setTextarea.apply(void 0,arguments)}}})],1),n("v-uni-view",{staticClass:"he-card image"},[n("v-uni-view",{staticClass:"he-top"},[n("v-uni-text",{staticClass:"he-title"},[t._v("添加素材")])],1),n("v-uni-view",{staticClass:"he-switch flex",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.switchType.apply(void 0,arguments)}}},[n("v-uni-view",{staticClass:"switch-item",style:[t.switchStyle]},[t._v(t._s(1===t.type?"添加图片":"添加视频"))]),n("v-uni-view",{staticClass:"item",style:[t.switchItemStyle]},[t._v(t._s(1===t.type?"添加视频":"添加图片"))])],1),n("v-uni-view",{staticClass:"he-bottom"},[n("he-upload-image",{directives:[{name:"show",rawName:"v-show",value:1===t.type,expression:"type === 1"}],ref:"uploadImage",attrs:{sizeType:["compressed"],"max-count":9,"max-size":t.getPicLimit},on:{"on-remove":function(e){arguments[0]=e=t.$handleEvent(e),t.removeImage.apply(void 0,arguments)},"on-uploaded":function(e){arguments[0]=e=t.$handleEvent(e),t.uploaded.apply(void 0,arguments)}}}),n("v-uni-view",{directives:[{name:"show",rawName:"v-show",value:1===t.type,expression:"type === 1"}],staticClass:"he-tip"},[t._v("最多上传9张图片")]),n("v-uni-view",{directives:[{name:"show",rawName:"v-show",value:2===t.type,expression:"type === 2"}],staticClass:"flex"},[n("he-upload-video",{ref:"uploadVideo",attrs:{"max-size":t.getVideoLimit},on:{"on-success":function(e){arguments[0]=e=t.$handleEvent(e),t.successVideo.apply(void 0,arguments)},"on-remove":function(e){arguments[0]=e=t.$handleEvent(e),t.removeVideo.apply(void 0,arguments)}}}),n("he-upload-image",{ref:"uploadCover",attrs:{sizeType:["compressed"],"max-count":1,"add-text":"视频封面","max-size":t.getPicLimit},on:{"on-remove":function(e){arguments[0]=e=t.$handleEvent(e),t.removeVideoCover.apply(void 0,arguments)},"on-uploaded":function(e){arguments[0]=e=t.$handleEvent(e),t.uploadVideoCover.apply(void 0,arguments)}}})],1)],1)],1),n("v-uni-view",{staticClass:"he-card goods flex justify-between align-center",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.routerDynamicGoods.apply(void 0,arguments)}}},[n("v-uni-view",{staticClass:"flex flex-sub"},[t.$h.test.isEmpty(t.link.param)?[n("v-uni-text",{staticClass:"iconfont iconpersonalcenter_add"}),n("v-uni-text",{staticClass:"add-goods"},[t._v("添加商品")])]:[n("he-image",{attrs:{"image-style":{borderRadius:"8rpx"},width:100,height:100,src:t.link.param.slideshow[0]}}),n("v-uni-view",{staticClass:"item-content flex flex-direction justify-center"},[n("v-uni-view",{staticClass:"item-name he-line-1"},[t._v(t._s(t.link.param.name))]),n("v-uni-view",{staticClass:"item-price"},[t._v("￥"+t._s(t.link.param.price))])],1),n("v-uni-view",{staticClass:"flex-sub item-change"},[t._v("更改")])]],2),n("v-uni-text",{staticClass:"iconfont iconbtn_arrow"})],1),n("v-uni-button",{staticClass:"cu-btn publish-dynamic",attrs:{disabled:t.submitDisabled},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.publishDynamic.apply(void 0,arguments)}}},[t._v(t._s((t.id,"发布动态")))]),n("v-uni-view",{staticClass:"safe-area-inset-bottom"})],1)},o=[]},e9ff:function(t,e,n){"use strict";function i(t,e,n,i,a,o,r){try{var c=t[o](r),s=c.value}catch(d){return void n(d)}c.done?e(s):Promise.resolve(s).then(i,a)}function a(t){return function(){var e=this,n=arguments;return new Promise((function(a,o){var r=t.apply(e,n);function c(t){i(r,a,o,c,s,"next",t)}function s(t){i(r,a,o,c,s,"throw",t)}c(void 0)}))}}Object.defineProperty(e,"__esModule",{value:!0}),e.default=a,n("f9ee")}}]);